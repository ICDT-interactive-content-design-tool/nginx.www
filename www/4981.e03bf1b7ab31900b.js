"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4981],{1814:(de,Dt,p)=>{p.d(Dt,{In:()=>ot,MA:()=>v,Mo:()=>j,NV:()=>E,S3:()=>T,dt:()=>yt,h8:()=>b,k0:()=>R});const T={fill:"transparent",stroke:"#129bff",strokeWidth:1},E={stroke:"#5F6CE1",strokeWidth:1,strokeLinecap:"round",strokeDasharrays:[4,2,1,2]},ot={fill:"#FFFFFF",stroke:"#5F6CE1",strokeWidth:1,width:7,height:7},j={fill:"transparent",stroke:"transparent",strokeWidth:1},yt={fill:"none",stroke:"#5F6CE1",strokeWidth:1},b={stroke:"#129bff",strokeWidth:1,strokeLinecap:"round",strokeDasharray:8},v={fill:"transparent"},R={fill:"none",stroke:"#999",strokeWidth:1,strokeDasharray:2}},7851:(de,Dt,p)=>{p.d(Dt,{BG:()=>b,IX:()=>yt,Q8:()=>h,RZ:()=>R,SS:()=>v,T1:()=>k,Ug:()=>M,n2:()=>E,yo:()=>j});var T=p(5811);const E=_=>{var P;return null===(P=_.split(/(?=[MLCSQTAHVZmlcsqtahvz])/))||void 0===P?void 0:P.map(u=>{let K={type:u.substring(0,1)},B=(V=u.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?V.split(/\s/).map(tt=>(0,T.q)(parseFloat(tt),1e6)):[];var V;return B.length&&(K.points=B),K})},j=_=>{let P=[],u=[],K=[],B=[];return _.forEach(V=>{switch(["M","L","C","S","Q","T"].includes(V.type)&&V.points&&V.points.forEach((Nt,dt)=>{dt%2==0?P.push(Nt):u.push(Nt)}),V.type){case"A":var tt;7==(null===(tt=V.points)||void 0===tt?void 0:tt.length)&&(K.push(V.points[5]),B.push(V.points[6]));break;case"H":var J;null!==(J=V.points)&&void 0!==J&&J.length&&(P.push(V.points[0]),K.push(V.points[0]));break;case"V":var I;null!==(I=V.points)&&void 0!==I&&I.length&&(u.push(V.points[0]),B.push(V.points[0]));break;case"a":var vt;if(7==(null===(vt=V.points)||void 0===vt?void 0:vt.length)){let Nt=P[P.length-1];P.push(Nt+V.points[5]),K.push(Nt+V.points[5]);let dt=u[u.length-1];u.push(dt+V.points[6]),B.push(dt+V.points[6])}break;case"h":var Mt;if(null!==(Mt=V.points)&&void 0!==Mt&&Mt.length){let Nt=P[P.length-1];P.push(Nt+V.points[0]),K.push(Nt+V.points[0])}break;case"v":var Kt;if(null!==(Kt=V.points)&&void 0!==Kt&&Kt.length){let Nt=u[u.length-1];u.push(Nt+V.points[0]),B.push(Nt+V.points[0])}break;case"M":case"L":case"C":case"S":case"Q":case"T":var te;null===(te=V.points)||void 0===te||te.forEach((Nt,dt)=>{dt%2==0?K.push(Nt):B.push(Nt)});break;case"m":case"l":case"c":case"s":case"q":case"t":var Ft;null===(Ft=V.points)||void 0===Ft||Ft.forEach((Nt,dt)=>{if(dt%2==0){let W=P[P.length-1];P.push(W+Nt),K.push(W+Nt)}else{let W=u[u.length-1];u.push(W+Nt),B.push(W+Nt)}})}}),{minX:Math.min.apply(null,K),minY:Math.min.apply(null,B),maxX:Math.max.apply(null,K),maxY:Math.max.apply(null,B)}},yt=(_,P)=>P.map(u=>{let K=[];switch(u.type){case"a":var B;7==(null===(B=u.points)||void 0===B?void 0:B.length)&&K.push([(0,T.q)(u.points[0]/_.width,1e6),(0,T.q)(u.points[1]/_.height,1e6),u.points[2],u.points[3],u.points[4],(0,T.q)(u.points[5]/_.width,1e6),(0,T.q)(u.points[6]/_.height,1e6)]);break;case"A":var V;7==(null===(V=u.points)||void 0===V?void 0:V.length)&&K.push([(0,T.q)(u.points[0]/_.width,1e6),(0,T.q)(u.points[1]/_.height,1e6),u.points[2],u.points[3],u.points[4],(0,T.q)((u.points[5]-_.x)/_.width,1e6),(0,T.q)((u.points[6]-_.y)/_.height,1e6)]);break;case"h":var tt;null!==(tt=u.points)&&void 0!==tt&&tt.length&&K.push([(0,T.q)(u.points[0]/_.width,1e6)]);break;case"H":var J;null!==(J=u.points)&&void 0!==J&&J.length&&K.push([(0,T.q)((u.points[0]-_.x)/_.width,1e6)]);break;case"v":var I;null!==(I=u.points)&&void 0!==I&&I.length&&K.push([(0,T.q)(u.points[0]/_.height,1e6)]);break;case"V":var vt;null!==(vt=u.points)&&void 0!==vt&&vt.length&&K.push([(0,T.q)((u.points[0]-_.y)/_.height,1e6)]);break;case"z":case"Z":break;case"M":case"L":case"C":case"S":case"Q":case"T":var Mt;if(null!==(Mt=u.points)&&void 0!==Mt&&Mt.length)for(let te=0,Ft=u.points.length-1;te<Ft;te+=2)K.push([(0,T.q)((u.points[te]-_.x)/_.width,1e6),(0,T.q)((u.points[te+1]-_.y)/_.height,1e6)]);break;case"m":case"l":case"c":case"s":case"q":case"t":var Kt;if(null!==(Kt=u.points)&&void 0!==Kt&&Kt.length)for(let te=0,Ft=u.points.length-1;te<Ft;te+=2)K.push([(0,T.q)(u.points[te]/_.width,1e6),(0,T.q)(u.points[te+1]/_.height,1e6)])}return K.length?{type:u.type,ratios:K}:{type:u.type}}),b=(_,P)=>P.map(u=>{switch(u.type){case"a":var K,B;return`${u.type}${null!==(K=null===(B=u.ratios)||void 0===B||null===(B=B.map(St=>{var it,$t,X,F,d,at,mt;return[(0,T.q)(_.width*(null!==(it=St[0])&&void 0!==it?it:0),1e6),(0,T.q)(_.height*(null!==($t=St[1])&&void 0!==$t?$t:0),1e6),null!==(X=St[2])&&void 0!==X?X:0,null!==(F=St[3])&&void 0!==F?F:0,null!==(d=St[4])&&void 0!==d?d:0,(0,T.q)(_.width*(null!==(at=St[5])&&void 0!==at?at:0),1e6),(0,T.q)(_.height*(null!==(mt=St[6])&&void 0!==mt?mt:0),1e6)]}))||void 0===B||null===(B=B.map(St=>St.join(" ")))||void 0===B?void 0:B.join(" "))&&void 0!==K?K:""}`;case"A":var V,tt;return`${u.type}${null!==(V=null===(tt=u.ratios)||void 0===tt||null===(tt=tt.map(St=>{var it,$t,X,F,d,at,mt;return[(0,T.q)(_.width*(null!==(it=St[0])&&void 0!==it?it:0),1e6),(0,T.q)(_.height*(null!==($t=St[1])&&void 0!==$t?$t:0),1e6),null!==(X=St[2])&&void 0!==X?X:0,null!==(F=St[3])&&void 0!==F?F:0,null!==(d=St[4])&&void 0!==d?d:0,(0,T.q)(_.x+_.width*(null!==(at=St[5])&&void 0!==at?at:0),1e6),(0,T.q)(_.y+_.height*(null!==(mt=St[6])&&void 0!==mt?mt:0),1e6)]}))||void 0===tt||null===(tt=tt.map(St=>St.join(" ")))||void 0===tt?void 0:tt.join(" "))&&void 0!==V?V:""}`;case"h":var J,I;return`${u.type}${null!==(J=null===(I=u.ratios)||void 0===I||null===(I=I.map(St=>{var it;return(0,T.q)(_.width*(null!==(it=St[0])&&void 0!==it?it:0),1e6)}))||void 0===I?void 0:I.join(" "))&&void 0!==J?J:""}`;case"H":var vt,Mt;return`${u.type}${null!==(vt=null===(Mt=u.ratios)||void 0===Mt||null===(Mt=Mt.map(St=>{var it;return(0,T.q)(_.x+_.width*(null!==(it=St[0])&&void 0!==it?it:0),1e6)}))||void 0===Mt?void 0:Mt.join(" "))&&void 0!==vt?vt:""}`;case"v":var Kt,te;return`${u.type}${null!==(Kt=null===(te=u.ratios)||void 0===te||null===(te=te.map(St=>{var it;return(0,T.q)(_.height*(null!==(it=St[0])&&void 0!==it?it:0),1e6)}))||void 0===te?void 0:te.join(" "))&&void 0!==Kt?Kt:""}`;case"V":var Ft,Nt;return`${u.type}${null!==(Ft=null===(Nt=u.ratios)||void 0===Nt||null===(Nt=Nt.map(St=>{var it;return(0,T.q)(_.y+_.height*(null!==(it=St[0])&&void 0!==it?it:0),1e6)}))||void 0===Nt?void 0:Nt.join(" "))&&void 0!==Ft?Ft:""}`;case"z":case"Z":return u.type;case"M":case"L":case"C":case"S":case"Q":case"T":var dt,W;return`${u.type}${null!==(dt=null===(W=u.ratios)||void 0===W||null===(W=W.map(St=>{var it,$t;return[(0,T.q)(_.x+_.width*(null!==(it=St[0])&&void 0!==it?it:0),1e6),(0,T.q)(_.y+_.height*(null!==($t=St[1])&&void 0!==$t?$t:0),1e6)]}))||void 0===W||null===(W=W.map(St=>St.join(" ")))||void 0===W?void 0:W.join(" "))&&void 0!==dt?dt:""}`;case"m":case"l":case"c":case"s":case"q":case"t":var _t,Ot;return`${u.type}${null!==(_t=null===(Ot=u.ratios)||void 0===Ot||null===(Ot=Ot.map(St=>{var it,$t;return[(0,T.q)(_.width*(null!==(it=St[0])&&void 0!==it?it:0),1e6),(0,T.q)(_.height*(null!==($t=St[1])&&void 0!==$t?$t:0),1e6)]}))||void 0===Ot||null===(Ot=Ot.map(St=>St.join(" ")))||void 0===Ot?void 0:Ot.join(" "))&&void 0!==_t?_t:""}`;default:return""}}).join(""),v=_=>{return(P=_.replace(/\,/g," ").replace(/\-/g," -").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?P.split(/\s/).map(u=>parseFloat(u)):[];var P},R=_=>{let P=[],u=[];return _.forEach((K,B)=>{B%2==0?P.push(K):u.push(K)}),{minX:Math.min.apply(null,P),minY:Math.min.apply(null,u),maxX:Math.max.apply(null,P),maxY:Math.max.apply(null,u)}},M=(_,P)=>{let u=[];for(let K=0,B=P.length-1;K<B;K+=2)u.push([(P[K]-_.x)/_.width,(P[K+1]-_.y)/_.height]);return u},h=(_,P)=>P.map(u=>[(0,T.q)(_.x+_.width*u[0],1e6),(0,T.q)(_.y+_.height*u[1],1e6)]).map(u=>u.join(" ")).join(" "),k=(_,P)=>{let u=(_=>{let P=_.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim().split(" ").map(u=>(0,T.q)(parseFloat(u),1e6));if(6==P.length)return{a:P[0],b:P[1],c:P[2],d:P[3],e:P[4],f:P[5]}})(P);return u?window.Snap.path.map(_,new window.Snap.Matrix(u.a,u.b,u.c,u.d,u.e,u.f)).toString():_}},9942:(de,Dt,p)=>{p.d(Dt,{w:()=>A,I:()=>C});var T=p(4981),E=p(9054),ot=p(5811),j=/^#[a-fA-F0-9]+$/i,yt=/^rgba\((\d+),(\d+),(\d+),(\d+)\)$/i,b=/^rgb\((\d+),(\d+),(\d+)\)$/i;const v=Z=>{let _=null,P=null;if(Z)if("transparent"==Z)_="#000000",P=0;else if(Z.match(j))_=Z;else{let u=(Z=Z.replace(/\s+/g,"")).match(yt);if(u)_="#"+(256|u[1]).toString(16).slice(1)+(256|u[2]).toString(16).slice(1)+(256|u[3]).toString(16).slice(1),P=(0,ot.q)(parseFloat(u[4]),100);else{let K=Z.match(b);K&&(_="#"+(256|K[1]).toString(16).slice(1)+(256|K[2]).toString(16).slice(1)+(256|K[3]).toString(16).slice(1))}}return{hex:_,alpha:P}},C=Z=>k(null==Z?void 0:Z.url,null==Z?void 0:Z.path,null==Z?void 0:Z.src);var k=(Z,_,P)=>{var u,K;let B,V,tt,J;var I,vt;return Z&&(B=Z.replace(/\\/g,"/")),_&&(V=_.replace(/\\/g,"/")),P&&(tt=P.replace(/\\/g,"/")),V&&!B&&(B=(null===(I=T.icdt.config)||void 0===I?void 0:I.readfileuploadurl)+V),!tt||V||B||(V=tt.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),B=(null===(vt=T.icdt.config)||void 0===vt?void 0:vt.readfileuploadurl)+V),J=(null!==(u=B)&&void 0!==u?u:"").split("/").pop()||(null!==(K=V)&&void 0!==K?K:"").split("/").pop()||"",{url:B,path:V,name:J}};const A=Z=>{let _={x:0,y:0,width:Z.screen.w,height:Z.screen.h},P=[];return Z.data.forEach((u,K)=>{var B,V;let tt={id:"number"==typeof u.id?u.id:T.icdt.data.newSlideId,code:null===(B=u.id)||void 0===B?void 0:B.toString(),name:"string"==typeof u.id?u.id:`Trang ${K+1}`,svg:{viewBox:_,nodes:[]},test:(J=u.test2,J?(J.audiotrue&&(J.audiotrue=C({path:J.audiotrue.path})),J.audiofalse&&(J.audiofalse=C({path:J.audiofalse.path})),J.effecttrue&&(J.effecttrue=C({path:J.effecttrue.path})),J.effectfalse&&(J.effectfalse=C({path:J.effectfalse.path})),J.icontrue&&(J.icontrue=C({path:J.icontrue.path})),J.iconfalse&&(J.iconfalse=C({path:J.iconfalse.path})),J):{})};var J;u.background&&tt.svg&&(tt.svg.background=function(Z){return Z&&(null!==Z.match(/#([a-zA-Z0-9]+)/)||null!==Z.match(/rgb\([0-9]+,[0-9]+,[0-9]+\)/)||null!==Z.match(/rgba\([0-9]+,[0-9]+,[0-9]+,[0-9]+\)/))}(u.background)?{color:u.background}:function(Z){return Z&&null!==Z.match(/data:[^;]+;base64,/)}(u.background)?{base64:u.background}:function(Z){return Z&&null!==Z.match(/http(s)?:\/\//)}(u.background)?k(u.background):k(void 0,u.background)),jQuery(null!==(V=u.svg)&&void 0!==V?V:"").find(".svg-node").each((J,I)=>{var vt,Mt;let Kt=jQuery(I).parents(".indexs"),te=Kt.attr("data-index"),Ft=Kt.attr("data-time"),Nt=null!==(vt=I.getAttribute("id"))&&void 0!==vt?vt:"0",dt={id:parseInt(Nt),code:`${I.nodeName}-${I.getAttribute("id")}`,name:I.nodeName,idx:te?parseInt(te):0,time:Ft?parseFloat(Ft):0,type:(()=>{switch(I.nodeName){case"polygon":return E.$.POLYGON;case"circle":return E.$.CIRCLE;case"ellipse":return E.$.ELLIPSE;case"line":return E.$.LINE;case"rect":return E.$.RECT;case"foreignObject":return E.$.FOREIGNOBJECT}return 0})(),size:(W=>{let _t=0,Ot=0,St=0,it=0,$t=null,X=null,F=parseFloat((null===(W=I.getAttribute("transform"))||void 0===W?void 0:W.replace("rotate(","").replace(")",""))||"0")||null;switch(I.nodeName){case"polygon":{var d,at;let mt=[],Pt=[],Gt=999999999,Xt=999999999,Ht=0,At=0;$t=JSON.parse(I.getAttribute("ratios")||"[]"),X=null!==(d=null===(at=I.getAttribute("points"))||void 0===at?void 0:at.split(",").map(function(pt){return pt.split(" ").map(function(ee){return parseFloat(ee)})}))&&void 0!==d?d:[],X.forEach(function(pt){mt.push(pt[0]),Pt.push(pt[1])}),Gt=Math.min.apply(null,mt),Xt=Math.min.apply(null,Pt),Ht=Math.max.apply(null,mt),At=Math.max.apply(null,Pt),_t=Gt,Ot=Xt,St=Ht-_t,it=At-Ot;break}case"circle":{let mt=parseFloat(I.getAttribute("cx")||"0"),Pt=parseFloat(I.getAttribute("cy")||"0"),Gt=parseFloat(I.getAttribute("r")||"0");_t=mt-Gt,Ot=Pt-Gt,St=2*Gt,it=2*Gt;break}case"ellipse":{let mt=parseFloat(I.getAttribute("cx")||"0"),Pt=parseFloat(I.getAttribute("cy")||"0"),Gt=parseFloat(I.getAttribute("rx")||"0"),Xt=parseFloat(I.getAttribute("ry")||"0");_t=mt-Gt,Ot=Pt-Xt,St=2*Gt,it=2*Xt;break}case"line":{let mt=parseFloat(I.getAttribute("x1")||"0"),Pt=parseFloat(I.getAttribute("y1")||"0"),Gt=parseFloat(I.getAttribute("x2")||"0"),Xt=parseFloat(I.getAttribute("y2")||"0"),Ht=999999999,At=999999999,pt=0,ee=0;Ht=Math.min(mt,Gt),At=Math.min(Pt,Xt),pt=Math.max(mt,Gt),ee=Math.max(Pt,Xt),_t=Ht,Ot=At,St=pt-_t,it=ee-Ot,$t=[[(mt-_t)/(St||1),(Pt-Ot)/(it||1)],[(Gt-_t)/(St||1),(Xt-Ot)/(it||1)]];break}case"rect":case"foreignObject":_t=parseFloat(I.getAttribute("x")||"0"),Ot=parseFloat(I.getAttribute("y")||"0"),St=parseFloat(I.getAttribute("width")||"0"),it=parseFloat(I.getAttribute("height")||"0")}return Object.assign({},{x:_t,y:Ot,width:St,height:it,ratios:$t,points:X,rotate:F})})(),attribute:(()=>{let W={};switch(I.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":{var _t,Ot,St,it,$t,X;let F=null!==(_t=I.getAttribute("fill"))&&void 0!==_t?_t:null,d=null!==(Ot=I.getAttribute("stroke"))&&void 0!==Ot?Ot:null,at=null!==(St=parseFloat(I.getAttribute("stroke-width")||"0"))&&void 0!==St?St:null,mt=null!==(it=I.getAttribute("stroke-linecap"))&&void 0!==it?it:null,Pt=null!==($t=I.getAttribute("stroke-linejoin"))&&void 0!==$t?$t:null,Gt=null!==(X=parseFloat(I.getAttribute("stroke-dasharray")||"0"))&&void 0!==X?X:null;Object.assign(W,{fill:F,stroke:d,strokeWidth:at,strokeLinecap:mt,strokeLinejoin:Pt,strokeDasharray:Gt});break}}return W})(),style:(()=>{let W={};switch(I.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":{let St=jQuery(I).find(".svg-container");if(St.length){let $t=parseFloat(St.css("border-width")||"0")||null,X=St.css("border-style")||null,F=St.css("border-color")||null,d=null,at=St.css("background-color")||null,mt=null;(()=>{let{hex:Pt,alpha:Gt}=v(F);F=Pt,d=Gt})(),(()=>{let{hex:Pt,alpha:Gt}=v(at);at=Pt,mt=Gt})(),Object.assign(W,{borderWidth:$t,borderStyle:X,borderColor:F,borderOpacity:d,backgroundColor:at,backgroundOpacity:mt})}let it=jQuery(I).find(".svg-editor-content");if(it.length){var _t,Ot;let $t=JSON.parse((it.attr("data-style")||"{}").replace(/\&quot\;/gm,'"')),{hex:X,alpha:F}=v($t.TextColor);Object.assign(W,{fontFamily:null!==(_t=$t.FontFamily)&&void 0!==_t?_t:null,fontSize:null!==(Ot=$t.FontSize)&&void 0!==Ot?Ot:null,color:X,opacity:F})}break}}return W})(),source:(()=>{let W={};switch(I.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":if(Kt.hasClass("editors")){let At=jQuery(I).find(".svg-editor-content");if(At.length){var _t;let pt=At.html(),ee=null!==(_t=(null!=pt?pt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==_t?_t:[];Object.assign(W,{type:"html",html:{htmlContent:pt,variableKeywords:ee}})}}else if(Kt.hasClass("inputs")||Kt.hasClass("textareas"))Object.assign(W,{type:"input",input:{input:!!jQuery(I).find("input").length,textarea:!!jQuery(I).find("textarea").length}});else if(Kt.hasClass("tests")){let At=jQuery(I).find(".svg-test");if(Kt.hasClass("tests-truefalse")){var Ot,St;let pt=At.find(".svg-editor-content").html(),ee=null!==(Ot=(null!=pt?pt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Ot?Ot:[];Object.assign(W,{type:"test",test:{type:"truefalse",truefalse:{iscorrect:null===(St=u.test2.truefalse)||void 0===St?void 0:St.includes(Nt)}},html:{htmlContent:pt,variableKeywords:ee}})}else if(Kt.hasClass("tests-singlechoice")){var it,$t;let pt=At.find(".svg-editor-content").html(),ee=null!==(it=(null!=pt?pt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==it?it:[];Object.assign(W,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===($t=u.test2.singlechoice)||void 0===$t?void 0:$t.includes(Nt)}},html:{htmlContent:pt,variableKeywords:ee}})}else if(Kt.hasClass("tests-multichoice")){var X,F;let pt=At.find(".svg-editor-content").html(),ee=null!==(X=(null!=pt?pt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==X?X:[];Object.assign(W,{type:"test",test:{type:"multichoice",multichoice:{iscorrect:null===(F=u.test2.multichoice)||void 0===F?void 0:F.includes(Nt)}},html:{htmlContent:pt,variableKeywords:ee}})}else if(Kt.hasClass("tests-fill")){var d,at;let pt=At.find(".svg-editor-content").html(),ee=null!==(d=(null!=pt?pt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==d?d:[],Y=null!==(at=(null!=pt?pt:"").match(/\[\[[a-zA-Z0-9]+\]\]/gm))&&void 0!==at?at:[];Y=Y.filter((c,Q,gt)=>gt.indexOf(c)==Q),Object.assign(W,{type:"test",test:{type:"fill",fill:Y.map(c=>{var Q;return{key:c,value:null===(Q=u.test2.fill)||void 0===Q||null===(Q=Q.find(gt=>gt.id==Nt))||void 0===Q||null===(Q=Q.vals)||void 0===Q?void 0:Q.map(gt=>gt.text).filter(gt=>!["",null,void 0,NaN].includes(gt))}})},html:{htmlContent:pt,variableKeywords:ee,fillKeywords:Y}})}else if(Kt.hasClass("tests-matching")){if(At.hasClass("svg-test-empty"))Object.assign(W,{type:"test",test:{type:"matching-empty",matching:{key:At.attr("data-name")||null}}});else if(At.hasClass("svg-test-content")){var mt;let pt=At.find(".svg-editor-content").html(),ee=null!==(mt=(null!=pt?pt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==mt?mt:[];Object.assign(W,{type:"test",test:{type:"matching-content",matching:{key:At.attr("data-name")||null}},html:{htmlContent:pt,variableKeywords:ee}})}}else if(Kt.hasClass("tests-speech")){var Pt;Object.assign(W,{type:"speech",speech:{value:null===(Pt=u.test2.speech)||void 0===Pt||null===(Pt=Pt.find(pt=>pt.id==Nt))||void 0===Pt||null===(Pt=Pt.vals)||void 0===Pt?void 0:Pt.map(pt=>pt.text).filter(pt=>!["",null,void 0,NaN].includes(pt))}})}else if(Kt.hasClass("tests-submit")){let pt=jQuery(I).find(".svg-container img");Object.assign(W,{type:"test",test:{type:"submit"},image:k(pt.attr("url"),pt.attr("path"),pt.attr("src"))})}}else if(Kt.hasClass("images")){let At=jQuery(I).find(".svg-editor-content img");if(At.length)Object.assign(W,{type:"image",image:k(At.attr("url"),At.attr("path"),At.attr("src"))});else{let pt=jQuery(I).find("iframe");Object.assign(W,{type:"iframe",iframe:k(pt.attr("url"),pt.attr("path"),pt.attr("src"))})}}else if(Kt.hasClass("sounds")){let At=jQuery(I).find(".svg-editor-content img");At.length&&Object.assign(W,{type:"image",image:k(At.attr("url"),At.attr("path"),At.attr("src"))})}else if(Kt.hasClass("htmls")){let At=jQuery(I).find("iframe");At.length&&Object.assign(W,{type:"iframe",iframe:k(At.attr("url"),At.attr("path"),At.attr("src"))})}else if(Kt.hasClass("svgs")){let At=jQuery(I).find("svg");var Gt,Xt;At.length&&Object.assign(W,{type:"svg",svg:Object.assign(k(At.attr("url"),At.attr("path"),At.attr("src")),{svgContent:null!==(Gt=null===(Xt=At.get(0))||void 0===Xt?void 0:Xt.outerHTML)&&void 0!==Gt?Gt:null})})}else if(Kt.hasClass("medias")){let At=jQuery(I).find(".media-item");if(At.length)switch(At.attr("type")){case"audio":Object.assign(W,{type:"audio",audio:k(At.attr("url"),At.attr("path"),At.attr("src"))});break;case"video":Object.assign(W,{type:"video",video:k(At.attr("url"),At.attr("path"),At.attr("src"))});break;case"file":Object.assign(W,{type:"file",file:k(At.attr("url"),At.attr("path"),At.attr("src"))});break;default:var Ht;Object.assign(W,{type:"link",link:{url:null!==(Ht=At.attr("url"))&&void 0!==Ht?Ht:null}})}let pt=jQuery(I).find("img");pt.length&&(Object.assign(W,{image:k(pt.attr("url"),pt.attr("path"),pt.attr("src"))}),W.type||Object.assign(W,{type:"image"}))}}return W})(),animate:(W=>{let _t={},Ot=null===(W=u.animates)||void 0===W?void 0:W.find(St=>St.elementId==Nt);return Ot&&Object.assign(_t,{value:Ot.value}),_t})(),interactive:(()=>{let W={},_t=u.actions.show.filter(St=>St.elementId==Nt&&St.active);_t.length&&(W.show={},_t.forEach(St=>{let{source:it}=St;switch(null==it?void 0:it.type){case"work":var $t,X,F,d,at;W.show.action={},Object.assign(W.show.action,{value:null!==($t=it.value)&&void 0!==$t?$t:null,iteration:null!==(X=it.iteration)&&void 0!==X?X:null,finish:null!==(F=it.end)&&void 0!==F?F:null,time:null!==(d=it.time)&&void 0!==d?d:null,points:null!==(at=it.points)&&void 0!==at?at:null});break;case"audio":var mt,Pt,Gt;W.show.audio={},Object.assign(W.show.audio,{source:k(null,null,it.url),iteration:null!==(mt=it.iteration)&&void 0!==mt?mt:null,finish:null!==(Pt=it.end)&&void 0!==Pt?Pt:null,time:null!==(Gt=it.time)&&void 0!==Gt?Gt:null,async:-1==it.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Xt,Ht,At,pt,ee,Y,c,Q,gt,ut,q,H,rt,L,et;it.options.includes("show")&&(W.show.triggershow={},Object.assign(W.show.triggershow,{id:null!==(Xt=parseInt(null!==(Ht=it.id)&&void 0!==Ht?Ht:"0"))&&void 0!==Xt?Xt:null,ids:null===(At=it.ids)||void 0===At?void 0:At.map(Et=>parseInt(Et)),async:null!==(pt=it.async)&&void 0!==pt?pt:null,time:null!==(ee=it.time)&&void 0!==ee?ee:null})),it.options.includes("run")&&(W.show.triggerrun={},Object.assign(W.show.triggerrun,{id:null!==(Y=parseInt(null!==(c=it.id)&&void 0!==c?c:"0"))&&void 0!==Y?Y:null,ids:null===(Q=it.ids)||void 0===Q?void 0:Q.map(Et=>parseInt(Et)),async:null!==(gt=it.async)&&void 0!==gt?gt:null,time:null!==(ut=it.time)&&void 0!==ut?ut:null})),it.options.includes("hide")&&(W.show.triggerhide={},Object.assign(W.show.triggerhide,{id:null!==(q=parseInt(null!==(H=it.id)&&void 0!==H?H:"0"))&&void 0!==q?q:null,ids:null===(rt=it.ids)||void 0===rt?void 0:rt.map(Et=>parseInt(Et)),async:null!==(L=it.async)&&void 0!==L?L:null,time:null!==(et=it.time)&&void 0!==et?et:null}))}}));let Ot=u.actions.click.filter(St=>St.elementId==Nt&&St.active);return Ot&&(W.click={},Ot.forEach(St=>{let{source:it}=St;switch(null==it?void 0:it.type){case"work":var $t,X,F,d,at;W.click.action={},Object.assign(W.click.action,{value:null!==($t=it.value)&&void 0!==$t?$t:null,iteration:null!==(X=it.iteration)&&void 0!==X?X:null,finish:null!==(F=it.end)&&void 0!==F?F:null,time:null!==(d=it.time)&&void 0!==d?d:null,points:null!==(at=it.points)&&void 0!==at?at:null});break;case"audio":var mt,Pt,Gt;W.click.audio={},Object.assign(W.click.audio,{source:k(null,null,it.url),iteration:null!==(mt=it.iteration)&&void 0!==mt?mt:null,finish:null!==(Pt=it.end)&&void 0!==Pt?Pt:null,time:null!==(Gt=it.time)&&void 0!==Gt?Gt:null,async:-1==it.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Xt,Ht,At,pt,ee,Y,c,Q,gt,ut,q,H,rt,L,et;it.options.includes("show")&&(W.click.triggershow={},Object.assign(W.click.triggershow,{id:null!==(Xt=parseInt(null!==(Ht=it.id)&&void 0!==Ht?Ht:"0"))&&void 0!==Xt?Xt:null,ids:null===(At=it.ids)||void 0===At?void 0:At.map(Rt=>parseInt(Rt)),async:null!==(pt=it.async)&&void 0!==pt?pt:null,time:null!==(ee=it.time)&&void 0!==ee?ee:null})),it.options.includes("run")&&(W.click.triggerrun={},Object.assign(W.click.triggerrun,{id:null!==(Y=parseInt(null!==(c=it.id)&&void 0!==c?c:"0"))&&void 0!==Y?Y:null,ids:null===(Q=it.ids)||void 0===Q?void 0:Q.map(Rt=>parseInt(Rt)),async:null!==(gt=it.async)&&void 0!==gt?gt:null,time:null!==(ut=it.time)&&void 0!==ut?ut:null})),it.options.includes("hide")&&(W.click.triggerhide={},Object.assign(W.click.triggerhide,{id:null!==(q=parseInt(null!==(H=it.id)&&void 0!==H?H:"0"))&&void 0!==q?q:null,ids:null===(rt=it.ids)||void 0===rt?void 0:rt.map(Rt=>parseInt(Rt)),async:null!==(L=it.async)&&void 0!==L?L:null,time:null!==(et=it.time)&&void 0!==et?et:null}));break;case"slide":var Et;W.click.slide={},Object.assign(W.click.slide,{id:parseInt(null!==(Et=it.id)&&void 0!==Et?Et:"0")||it.num||null,code:it.id})}})),W})(),variable:(W=>{let _t={};var Ot;I.getAttribute("data-variable")&&(_t.input={},Object.assign(_t.input,{variable:null!==(Ot=I.getAttribute("data-variable"))&&void 0!==Ot?Ot:null}));let St=null===(W=u.nodes)||void 0===W||null===(W=W.find(d=>d.id==Nt))||void 0===W?void 0:W.variable;var it,$t,X,F;return St&&(_t.click={},Object.assign(_t.click,{variable:null!==(it=St.variable)&&void 0!==it?it:null,operator:null!==($t=St.operator)&&void 0!==$t?$t:null,valuetype:null!==(X=St.valuetype)&&void 0!==X?X:null,value:null!==(F=St.value)&&void 0!==F?F:null})),_t})()};null===(Mt=tt.svg)||void 0===Mt||Mt.nodes.push(dt)}),P.push(tt)}),{screen:{width:Z.screen.w,height:Z.screen.h},data:{slides:P},variable:Z.variable}}},644:(de,Dt,p)=>{p.d(Dt,{Dx:()=>b,aY:()=>M,qp:()=>R,qz:()=>yt,sV:()=>v,yR:()=>h});var T=p(5861),E=p(9422);E.config({driver:[E.INDEXEDDB,E.LOCALSTORAGE,E.WEBSQL],name:"_localDataDB",version:1});const j={create:(C=(0,T.Z)(function*(){return E}),function(){return C.apply(this,arguments)}),get:function(){var C=(0,T.Z)(function*(k){return E.getItem(k)});return function(A){return C.apply(this,arguments)}}(),set:function(){var C=(0,T.Z)(function*(k,A){return E.setItem(k,A)});return function(A,Z){return C.apply(this,arguments)}}()},yt=function(){var C=(0,T.Z)(function*(k){yield j.create();var A=(yield j.get("icdt-data"))||[];"function"==typeof k.callback&&k.callback(A)});return function(A){return C.apply(this,arguments)}}(),b=function(){var C=(0,T.Z)(function*(k){yield j.create(),k.params=k.params||{};try{yield j.set("icdt-data",k.params),"function"==typeof k.callback&&k.callback(k.params)}catch(A){"function"==typeof k.callback&&k.callback(null),console.error(A)}});return function(A){return C.apply(this,arguments)}}(),v=function(){var C=(0,T.Z)(function*(k){yield j.create();try{var A=(yield j.get("icdt-config"))||{};"function"==typeof k.callback&&k.callback(A)}catch(Z){"function"==typeof k.callback&&k.callback(null),console.error(Z)}});return function(A){return C.apply(this,arguments)}}(),R=function(){var C=(0,T.Z)(function*(k){yield j.create(),k.params=k.params||{};try{yield j.set("icdt-config",k.params),"function"==typeof k.callback&&k.callback(k.params)}catch(A){"function"==typeof k.callback&&k.callback(null),console.error(A)}});return function(A){return C.apply(this,arguments)}}(),M=function(){var C=(0,T.Z)(function*(k){yield j.create();try{var A=(yield j.get("icdt-clipboard"))||{};"function"==typeof k.callback&&k.callback(A)}catch(Z){"function"==typeof k.callback&&k.callback(null),console.error(Z)}});return function(A){return C.apply(this,arguments)}}(),h=function(){var C=(0,T.Z)(function*(k){yield j.create(),k.params=k.params||{};try{yield j.set("icdt-clipboard",k.params),"function"==typeof k.callback&&k.callback(k.params)}catch(A){"function"==typeof k.callback&&k.callback(null),console.error(A)}});return function(A){return C.apply(this,arguments)}}();var C},9359:(de,Dt,p)=>{p.d(Dt,{E:()=>T});const T=(E,ot)=>{if(!E)return"";let j=E.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),yt=(j&&j[4]||"").trim(),b=j?(256|j[1]).toString(16).slice(1)+(256|j[2]).toString(16).slice(1)+(256|j[3]).toString(16).slice(1):E;if("0"==yt)return"transparent";if(ot){let v;v=""!==yt?yt:"01",v=(255*v|256).toString(16).slice(1),b+=v}return console.log(`lib_rgba2hex: ${E} -> ${b}`),`#${b}`}},1687:(de,Dt,p)=>{p.d(Dt,{O:()=>T});const T={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"}},9125:(de,Dt,p)=>{p.d(Dt,{D:()=>T});const T={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3}},968:(de,Dt,p)=>{p.d(Dt,{_:()=>T});const T={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8}},4714:(de,Dt,p)=>{p.d(Dt,{D:()=>T});const T={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306}},9054:(de,Dt,p)=>{p.d(Dt,{$:()=>T});const T={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,PATH:8}},4981:(de,Dt,p)=>{p.d(Dt,{icdt:()=>wt});var T=p(968),E=p(7492),ot=p(1687),j=p(4318),yt=p(6816),b=p(666),v=p(3171);const h=D=>{var i,n,r,o,a,m,y;let g=(null===(i=D.mouseEvent)||void 0===i?void 0:i.target)||(null===(n=D.touchEvent)||void 0===n?void 0:n.target),O=(null===(r=g)||void 0===r?void 0:r.getAttribute("id"))||"",w=null===(o=g)||void 0===o?void 0:o.nodeName;wt.dataSelect.nodeName.includes(w)||(g=jQuery(g).parents("foreignObject").get(0),g&&(O=g.getAttribute("id")||"",w=g.nodeName));let z=(null===(a=g)||void 0===a||null===(a=a.parentNode)||void 0===a?void 0:a.getAttribute("id"))||"";var N,st;if([ot.O.RESIZE_GROUP,ot.O.SELECT_GROUP].includes(z))return null===(N=D.mouseEvent)||void 0===N||N.stopPropagation(),void(null===(st=D.mouseEvent)||void 0===st||st.preventDefault());if(null!==(m=D.mouseEvent)&&void 0!==m&&m.altKey||null!==(y=D.touchEvent)&&void 0!==y&&y.altKey||!O||O.match(/[^0-9]/)||!wt.dataSelect.nodeName.includes(w)){var ct;wt.dataSelect.ids.length&&(wt.dataSelect.ids=[]),(0==(null===(ct=D.mouseEvent)||void 0===ct?void 0:ct.button)||D.touchEvent)&&(D=>{let a=(0,E.g1)(ot.O.SCAN_GROUP,"g"),m=(0,j.bH)(0,0,1,1);(0,E.vl)(a,m),((D,i,n)=>{(0,yt.A)(D,{start:a=>{},move:(a,m)=>{((a,m,y,g)=>{i=(0,j.bH)(a,m,y,g),(0,E.vl)(n,i)})(m[0][0],m[0][1],a.x,a.y)},end:(a,m)=>{null==n||n.remove(),wt.dataSelect.ids=wt.data.getNodeInArea(Math.min(m[0][0],a.x),Math.min(m[0][1],a.y),Math.max(m[0][0],a.x),Math.max(m[0][1],a.y));let y=wt.dataSelect.nodes;1==y.length?(0,b.y)(y[0]):y.length>1&&(0,v.Q)(y)}})})(D,m,a)})(D)}else{var xt,jt;let Qt=parseFloat(O||"0");wt.dataSelect.ids=null!==(xt=D.mouseEvent)&&void 0!==xt&&xt.shiftKey||null!==(jt=D.touchEvent)&&void 0!==jt&&jt.shiftKey?[Qt].concat(wt.dataSelect.ids).filter((ge,pe,me)=>me.indexOf(ge)==pe):[Qt];let ye=wt.dataSelect.nodes;ye.length>1?(0,v.Q)(ye):1==ye.length&&(0,b.y)(ye[0])}};class k{constructor(){let{x:i,y:n}=wt.screen.dislocation;var r=(o,a,m,y)=>{wt.screen.move({x:i,y:n},{x:m-o,y:y-a})};return{start:o=>{},move:(o,a)=>{r(a[0][0],a[0][1],o.x,o.y)},end:(o,a)=>{r(a[0][0],a[0][1],o.x,o.y)}}}}var A=p(9054),Z=p(4714);const _=[{name:"tam gi\xe1c vu\xf4ng",type:Z.D.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:Z.D.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:Z.D.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:Z.D.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:Z.D.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:Z.D.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:Z.D.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:Z.D.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:Z.D.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:Z.D.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:Z.D.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:Z.D.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:Z.D.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}];var P=p(8619),u=p(5811);class K{constructor(){let i=(0,E.g1)(ot.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:o,size:a}=(0,P._)(Math.ceil(1e9*Math.random())),m=(y,g,O,w)=>{a=(0,j.bH)(y,g,O,w,{ratio:1}),a.x=(0,u.q)(a.x),a.y=(0,u.q)(a.y),a.width=(0,u.q)(a.width),a.height=(0,u.q)(a.height),Object.assign(o,(0,j.sg)(A.$.CIRCLE,a,o)),(0,E.__)(r,o),(0,E.g$)(i,a)};return{start:y=>{m(y.x,y.y,y.x+a.width,y.y+a.height)},move:(y,g)=>{m(g[0][0],g[0][1],y.x,y.y)},end:(y,g)=>{(a.width<=16||a.height<=16)&&(a.width=80,a.height=80,a.x=a.x-a.width/2,a.y=a.y-a.height/2,Object.assign(o,(0,j.sg)(A.$.CIRCLE,a,o)),(0,E.__)(r,o)),wt.data.node=Object.assign({id:n,type:A.$.CIRCLE,name:"Circle"},{size:a,attribute:o}),null==i||i.remove()}}}}var B=p(8785);class V{constructor(){let i=(0,E.g1)(ot.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:o,size:a}=(0,B.r)(Math.ceil(1e9*Math.random()));var m=(y,g,O,w)=>{a=(0,j.bH)(y,g,O,w),a.x=(0,u.q)(a.x),a.y=(0,u.q)(a.y),a.width=(0,u.q)(a.width),a.height=(0,u.q)(a.height),Object.assign(o,(0,j.sg)(A.$.ELLIPSE,a,o)),(0,E.__)(r,o),(0,E.g$)(i,a)};return{start:y=>{m(y.x,y.y,y.x+a.width,y.y+a.height)},move:(y,g)=>{m(g[0][0],g[0][1],y.x,y.y)},end:(y,g)=>{(a.width<=16||a.height<=16)&&(a.width=90,a.height=60,a.x=a.x-a.width/2,a.y=a.y-a.height/2,Object.assign(o,(0,j.sg)(A.$.ELLIPSE,a,o)),(0,E.__)(r,o)),wt.data.node=Object.assign({id:n,type:A.$.ELLIPSE,name:"Ellipse"},{size:a,attribute:o}),null==i||i.remove()}}}}var tt=p(8054);class J{constructor(){let i=(0,E.g1)(ot.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:o,size:a}=(0,tt.f)(Math.ceil(1e9*Math.random()));var m=(y,g,O,w)=>{a=(0,j.bH)(y,g,O,w),a.x=(0,u.q)(a.x),a.y=(0,u.q)(a.y),a.width=(0,u.q)(a.width),a.height=(0,u.q)(a.height),Object.assign(o,(0,j.sg)(A.$.RECT,a,o)),(0,E.__)(r,o),(0,E.g$)(i,a)};return{start:y=>{m(y.x,y.y,y.x+a.width,y.y+a.height)},move:(y,g)=>{m(g[0][0],g[0][1],y.x,y.y)},end:(y,g)=>{(a.width<=16||a.height<=16)&&(a.width=80,a.height=80,a.x=a.x-a.width/2,a.y=a.y-a.height/2,Object.assign(o,(0,j.sg)(A.$.RECT,a,o)),(0,E.__)(r,o)),wt.data.node=Object.assign({id:n,type:A.$.RECT,name:"Rect"},{size:a,attribute:o}),null==i||i.remove()}}}}var I=p(2282);class vt{constructor(i){let n=(0,E.g1)(ot.O.CREATE_GROUP,"g"),r=i||[[0,0],[1,1],[0,1]],{nodeId:o,element:a,attribute:m,size:y}=(0,I.l)(Math.ceil(1e9*Math.random()));y.ratios=r;var g=(O,w,z,N)=>{y=(0,j.bH)(O,w,z,N,{ratios:r}),y.x=(0,u.q)(y.x),y.y=(0,u.q)(y.y),y.width=(0,u.q)(y.width),y.height=(0,u.q)(y.height),Object.assign(m,(0,j.sg)(A.$.POLYGON,y,m)),(0,E.__)(a,m),(0,E.g$)(n,y)};return{start:O=>{g(O.x,O.y,O.x+y.width,O.y+y.height)},move:(O,w)=>{g(w[0][0],w[0][1],O.x,O.y)},end:(O,w)=>{(y.width<=16||y.height<=16)&&(y.width=80,y.height=80,y.x=y.x-y.width/2,y.y=y.y-y.height/2,Object.assign(m,(0,j.sg)(A.$.POLYGON,y,m)),(0,E.__)(a,m)),wt.data.node=Object.assign({id:o,type:A.$.POLYGON,name:"Polygon"},{size:y,attribute:m}),null==n||n.remove()}}}}var Mt=p(4921);class Kt{constructor(){let i=(0,E.g1)(ot.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:o,size:a}=(0,Mt.W)(Math.ceil(1e9*Math.random()));return{start:y=>{},move:(y,g)=>{((y,g,O,w)=>{a=(0,j.bH)(y,g,O,w),a.x=(0,u.q)(a.x),a.y=(0,u.q)(a.y),a.width=(0,u.q)(a.width),a.height=(0,u.q)(a.height),Object.assign(o,(0,j.sg)(A.$.LINE,a,o)),(0,E.__)(r,o),(0,E.g$)(i,a)})(g[0][0],g[0][1],y.x,y.y)},end:(y,g)=>{g.length>=2?((a.width<=16||a.height<=16)&&(a.width=80,a.height=80,a.x=a.x-a.width/2,a.y=a.y-a.height/2,Object.assign(o,(0,j.sg)(A.$.LINE,a,o)),(0,E.__)(r,o)),wt.data.node=Object.assign({id:n,type:A.$.LINE,name:"Line"},{size:a,attribute:o})):null==r||r.remove(),null==i||i.remove()}}}}var te=p(7851),Ft=p(9322);class Nt{constructor(){let{nodeId:i,element:n,attribute:r,size:o}=(0,Ft.G)(Math.ceil(1e9*Math.random())),m="";return{start:g=>{m=`M ${g.x} ${g.y} L ${g.x} ${g.y}`},move:(g,O)=>{((g,O)=>{m+=` ${g} ${O}`,n.setAttribute("d",m)})(g.x,g.y)},end:(g,O)=>{let w=(0,te.n2)(m),{minX:z,minY:N,maxX:st,maxY:ct}=(0,te.yo)(w);o.x=z,o.y=N,o.width=st-z||1,o.height=ct-N||1,o.ratioMaps=(0,te.IX)(o,w),wt.data.node=Object.assign({id:i,type:A.$.PATH,name:"Path"},{size:o,attribute:r})}}}}var dt=p(2875);class W{constructor(){let i=(0,E.g1)(ot.O.CREATE_GROUP,"g"),{nodeId:n,element:r,size:o,attribute:a,style:m,source:y}=(0,dt.e)(Math.ceil(1e9*Math.random()));var g=(O,w,z,N)=>{o=(0,j.bH)(O,w,z,N),o.x=(0,u.q)(o.x),o.y=(0,u.q)(o.y),o.width=(0,u.q)(o.width),o.height=(0,u.q)(o.height),Object.assign(a,(0,j.sg)(A.$.FOREIGNOBJECT,o,a)),(0,E.__)(r,a),(0,E.g$)(i,o)};return{start:O=>{g(O.x,O.y,O.x+o.width,O.y+o.height)},move:(O,w)=>{g(w[0][0],w[0][1],O.x,O.y)},end:(O,w)=>{(o.width<=16||o.height<=16)&&(o.width=90,o.height=60,o.x=o.x-o.width/2,o.y=o.y-o.height/2,Object.assign(a,(0,j.sg)(A.$.FOREIGNOBJECT,o,a)),(0,E.__)(r,a)),wt.data.node=Object.assign({id:n,type:A.$.FOREIGNOBJECT,name:"ForeignObject"},{size:o,attribute:a,style:m,source:y}),null==i||i.remove()}}}}var _t=p(7210);class Ot{constructor(){var i,n;let r=(0,E.g1)(ot.O.CREATE_GROUP,"g"),{nodeId:o,element:a,size:m,attribute:y,source:g}=(0,_t.G)(Math.ceil(1e9*Math.random())),O=1;(z=>{if(!z)return;let N=new Image;N.onload=()=>{O=(0,u.q)(N.naturalWidth/N.naturalHeight,100)},N.onerror=st=>{console.error(`ImgSrc load failed -> ${z}`,st)},N.src=z})(null!==(i=null===(n=g.image)||void 0===n?void 0:n.url)&&void 0!==i?i:"");var w=(z,N,st,ct)=>{m=(0,j.bH)(z,N,st,ct,{ratio:O}),m.x=(0,u.q)(m.x),m.y=(0,u.q)(m.y),m.width=(0,u.q)(m.width),m.height=(0,u.q)(m.height),Object.assign(y,(0,j.sg)(A.$.IMAGE,m,y)),(0,E.__)(a,y),(0,E.g$)(r,m)};return{start:z=>{w(z.x,z.y,z.x+m.width,z.y+m.height)},move:(z,N)=>{w(N[0][0],N[0][1],z.x,z.y)},end:(z,N)=>{(m.width<=16||m.height<=16)&&(m.width=80,m.height=80,m.x=m.x-m.width/2,m.y=m.y-m.height/2,Object.assign(y,(0,j.sg)(A.$.IMAGE,m,y)),(0,E.__)(a,y)),wt.data.node=Object.assign({id:o,type:A.$.IMAGE,name:"Image"},{size:m,attribute:y,source:g}),null==r||r.remove()}}}}var it=p(4578),$t=p(9623);function d(D,i,n,r){return Math.sqrt(Math.pow(n-D,2)+Math.pow(r-i,2))}function at(D,i,n,r,o){return d(D,i,n,r)<o?1:0}function Pt(D,i,n,r,o,a,m){var y=[];return y.push(at(D,i,n,r,m)),y.push(at(D,i,o,a,m)),y.push(function mt(D,i,n,r,o,a,m){var y=[o-n,a-r],g=[D-n,i-r],O=[-y[1],y[0]],w=Math.sqrt(Math.pow(O[0],2)+Math.pow(O[1],2)),z=[O[0]/w,O[1]/w],N=Math.sqrt(Math.pow(y[0],2)+Math.pow(y[1],2)),st=[y[0]/N,y[1]/N],ct=g[0]*st[0]+g[1]*st[1];if(ct<=0||ct>=N)return 0;var xt=g[0]*z[0]+g[1]*z[1];return xt>=m||xt<=-m?0:1}(D,i,n,r,o,a,m)),y}function Gt(D,i,n,r,o){var a=[n-D,r-i],m=[-a[1],a[0]],y=Math.sqrt(Math.pow(m[0],2)+Math.pow(m[1],2)),g=[m[0]/y,m[1]/y];return[[D+o*g[0],i+o*g[1]],[D-o*g[0],i-o*g[1]],[n-o*g[0],r-o*g[1]],[n+o*g[0],r+o*g[1]]]}function Xt(D,i,n,r,o,a,m){var ct,y=[o-D,a-i],g=[n-D,r-i],O=Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2)),w=[g[0]/O,g[1]/O],z=y[0]*w[0]+y[1]*w[1],N=[D+z*w[0],i+z*w[1]],st=Math.sqrt(Math.pow(o-N[0],2)+Math.pow(a-N[1],2));ct=0===st?m:Math.sqrt(Math.pow(m,2)-Math.pow(st,2));var xt=[D+z*w[0]+ct*w[0],i+z*w[1]+ct*w[1]];return xt[0]===D&&xt[1]===i?null:xt}function Ht(D,i,n,r,o,a,m){var y=[o-D,a-i],g=[n-D,r-i],O=[-g[1],g[0]],w=Math.sqrt(Math.pow(O[0],2)+Math.pow(O[1],2)),z=[O[0]/w,O[1]/w],N=y[0]*z[0]+y[1]*z[1],st=Q([D,i],[n,r],[o,a]);if(Y([st[0]-o,st[1]-a])>=m)return null;var xt=Math.sqrt(Math.pow(m,2)-Math.pow(N,2)),jt=[o-N*z[0],a-N*z[1]],Qt=Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2)),ye=[g[0]/Qt,g[1]/Qt],ge=[[jt[0]-ye[0]*xt,jt[1]-ye[1]*xt],[jt[0]+ye[0]*xt,jt[1]+ye[1]*xt]];return ge[0][0]===D&&ge[0][1]===i?null:ge}function At(D,i,n,r,o,a,m,y){var g,O,w,z,N,st;return-(w=m-o)*(O=r-i)+(g=n-D)*(z=y-a)==0?null:(st=(w*(i-a)-z*(D-o))/(-w*O+g*z),(N=(-O*(D-o)+g*(i-a))/(-w*O+g*z))>=0&&N<=1&&st>=0&&st<=1?[D+st*g,i+st*O]:null)}function pt(D,i,n,r,o,a,m,y,g,O){var w=Gt(a,m,y,g,O),z=[];if(n[0]&&!n[1])z.push(Xt(D,i,r,o,a,m,O)),z.push(At(D,i,r,o,w[0][0],w[0][1],w[3][0],w[3][1])),z.push(At(D,i,r,o,w[1][0],w[1][1],w[2][0],w[2][1])),(N=Ht(D,i,r,o,y,g,O))&&z.push(N[0],N[1]);else if(!n[0]&&n[1])z.push(Xt(D,i,r,o,y,g,O)),z.push(At(D,i,r,o,w[0][0],w[0][1],w[3][0],w[3][1])),z.push(At(D,i,r,o,w[1][0],w[1][1],w[2][0],w[2][1])),(N=Ht(D,i,r,o,a,m,O))&&z.push(N[0],N[1]);else if(n[0]&&n[1])z.push(Xt(D,i,r,o,a,m,O)),z.push(At(D,i,r,o,w[0][0],w[0][1],w[3][0],w[3][1])),z.push(At(D,i,r,o,w[1][0],w[1][1],w[2][0],w[2][1])),z.push(Xt(D,i,r,o,y,g,O));else{var N=Ht(D,i,r,o,y,g,O),st=Ht(D,i,r,o,a,m,O);N&&z.push(N[0],N[1]),st&&z.push(st[0],st[1]),z.push(At(D,i,r,o,w[0][0],w[0][1],w[3][0],w[3][1])),z.push(At(D,i,r,o,w[1][0],w[1][1],w[2][0],w[2][1]))}for(var ct=[D,i],xt=0;xt<z.length;xt++)z[xt]&&d(z[xt][0],z[xt][1],r,o)<d(ct[0],ct[1],r,o)&&(ct=z[xt]);return ct[0]===D&&ct[1]===i?null:ct}function ee(D,i,n,r,o,a,m,y,g){var O=Gt(o,a,m,y,g),w=[],z=Ht(D,i,n,r,o,a,g);z&&w.push(z[0],z[1]),(z=Ht(D,i,n,r,m,y,g))&&w.push(z[0],z[1]),w.push(At(D,i,n,r,O[0][0],O[0][1],O[3][0],O[3][1])),w.push(At(D,i,n,r,O[1][0],O[1][1],O[2][0],O[2][1]));for(var N=[n,r],st=[D,i],ct=0;ct<w.length;ct++)w[ct]&&d(w[ct][0],w[ct][1],D,i)<d(N[0],N[1],D,i)&&(N=w[ct]);for(var xt=0;xt<w.length;xt++)w[xt]&&d(w[xt][0],w[xt][1],n,r)<d(st[0],st[1],n,r)&&(st=w[xt]);return N[0]===n&&N[1]===r||st[0]===D&&st[1]===i?null:[N,st]}var Y=function(D){return Math.sqrt(D[0]*D[0]+D[1]*D[1])},Q=function(D,i,n){var r=[i[0]-D[0],i[1]-D[1]],o=Y(r);if(o<1e-6)return D;var a=[n[0]-D[0],n[1]-D[1]],m=(r[0]*a[0]+r[1]*a[1])/o;return m<0?D:m>o?i:[D[0]+r[0]*m/o,D[1]+r[1]*m/o]};class gt{constructor(){let{element:r,size:a}=(0,Ft.G)(Math.ceil(1e9*Math.random()));(0,E.__)(r,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});let m="";return{start:O=>{m=`M ${O.x} ${O.y} L ${O.x} ${O.y}`},move:(O,w)=>{((O,w)=>{m+=` ${O} ${w}`,r.setAttribute("d",m)})(O.x,O.y)},end:(O,w)=>{r.remove(),(O=>{let w=9999,z=9999,N=-9999,st=-9999;O.forEach(xt=>{w=Math.min(w,xt[0]),z=Math.min(z,xt[1]),N=Math.max(N,xt[0]),st=Math.max(st,xt[1])}),a=(0,j.bH)(w,z,N,st,{points:O}),wt.data.getNodeInArea(0,0,1920,1920,A.$.PATH).forEach(xt=>{let Qt=((D,i,n)=>{n=n||20;var r=[],o=function(w){var z=i[0][0],N=i[0][1],st=0,ct=0;if(1!==w.length||at(w[0][0],w[0][1],z,N,n)){for(var xt;st<w.length-1;){var jt=w[st],Qt=w[st+1],ye=at(jt[0],jt[1],z,N,n),ge=at(Qt[0],Qt[1],z,N,n);if(ye&&ge)ct=++st;else if(ye&&!ge)(pe=Xt(jt[0],jt[1],Qt[0],Qt[1],z,N,n))?(w[st]=pe,ct=st):st++;else if(!ye&&ge){var pe;(pe=Xt(Qt[0],Qt[1],jt[0],jt[1],z,N,n))&&((xt=w.slice(ct,st+1)).push(pe),r.push(xt)),ct=++st}else{var me=Ht(jt[0],jt[1],Qt[0],Qt[1],z,N,n);me?(((xt=w.slice(ct,st+1))[xt.length-1][0]!==me[0][0]||xt[xt.length-1][1]!==me[0][1])&&xt.push(me[0]),xt.length>1&&r.push(xt),w[st]=me[1],w[st+1]&&w[st+1][0]==me[1][0]&&w[st+1][1]==me[1][1]&&st++,ct=st):st++}}ct!==st&&(xt=w.slice(ct,w.length))&&r.push(xt)}else r.push(w)},a=function(w,z){var Qt,N=i[z],st=i[z+1],ct=0,xt=0;if(1!==w.length||-1!==(jt=Pt(w[0][0],w[0][1],N[0],N[1],st[0],st[1],n)).indexOf(1)){for(;ct<w.length-1;){var ye=w[ct],ge=w[ct+1],jt=Pt(ye[0],ye[1],N[0],N[1],st[0],st[1],n),pe=Pt(ge[0],ge[1],N[0],N[1],st[0],st[1],n);if(-1!==jt.indexOf(1)&&-1!==pe.indexOf(1))xt=++ct;else if(-1!==jt.indexOf(1)&&-1===pe.indexOf(1))(me=pt(ye[0],ye[1],jt,ge[0],ge[1],N[0],N[1],st[0],st[1],n))?(w[ct]=me,xt=ct):ct++;else if(-1===jt.indexOf(1)&&-1!==pe.indexOf(1)){var me;(me=pt(ge[0],ge[1],pe,ye[0],ye[1],N[0],N[1],st[0],st[1],n))?((Qt=w.slice(xt,ct+1)).push(me),r.push(Qt),xt=++ct):ct++}else{var Se=ee(ye[0],ye[1],ge[0],ge[1],N[0],N[1],st[0],st[1],n);Se?(((Qt=w.slice(xt,ct+1))[Qt.length-1][0]!==Se[0][0]||Qt[Qt.length-1][1]!==Se[0][1])&&Qt.push(Se[0]),Qt.length>1&&r.push(Qt),w[ct]=Se[1],w[ct+1]&&w[ct+1][0]==Se[1][0]&&w[ct+1][1]==Se[1][1]&&ct++,xt=ct):ct++}}xt!==ct&&(Qt=w.slice(xt,w.length))&&r.push(Qt)}else r.push(w)};if(i=function F(D){var i=[];if(1===D.length)i=D;else{for(var n=0;n<D.length-1;)(D[n][0]!==D[n+1][0]||D[n][1]!==D[n+1][1])&&i.push(D[n]),n++;0!==D.length&&0===i.length&&i.push(D[0]),(D[D.length-1][0]!==D[i.length-1][0]||D[D.length-1][1]!==D[i.length-1][1])&&i.push(D[n])}return i}(i),1===i.length){for(var m=0;m<D.length;m++)o(D[m]);D=r}else for(var y=0;y<i.length-1;y++){for(m=0;m<D.length;m++)a(D[m],y);D=r,r=[]}for(var g=0;g<D.length;g++)for(var O=0;O<D[g].length;O++)D[g][O][0]=Math.round(D[g][O][0]),D[g][O][1]=Math.round(D[g][O][1]);return D})(wt.data.getNode(xt).size.points,O,2);console.log(Qt)})})(w)}}}}var q=p(1105);class H{constructor(){let i=(0,E.g1)(ot.O.CREATE_GROUP,"g"),{nodeId:n,element:r,attribute:o,size:a,source:m}=(0,q.$)(Math.ceil(1e9*Math.random())),y=(g,O,w,z)=>{a=(0,j.bH)(g,O,w,z),a.x=(0,u.q)(a.x),a.y=(0,u.q)(a.y),a.width=(0,u.q)(a.width),a.height=(0,u.q)(a.height),Object.assign(o,(0,j.sg)(A.$.TEXT,a,o)),(0,E.__)(r,o),(0,E.g$)(i,a)};return{start:g=>{y(g.x,g.y,g.x+a.width,g.y+a.height)},move:(g,O)=>{y(O[0][0],O[0][1],g.x,g.y)},end:(g,O)=>{(a.width<=16||a.height<=16)&&(a.width=80,a.height=80,a.x=a.x-a.width/2,a.y=a.y-a.height/2,Object.assign(o,(0,j.sg)(A.$.TEXT,a,o)),(0,E.__)(r,o)),wt.data.node=Object.assign({id:n,type:A.$.TEXT,name:"Text"},{size:a,attribute:o,source:m}),null==i||i.remove()}}}}var Et=p(4531),Rt=p(9125),bt=p(7797);var Ct=p(6358);class kt{constructor(){this._nodeName=["circle","ellipse","line","polygon","rect","text","path","image","foreignObject"],this._selected_Ids=[],this._fnChanges=[]}get nodeName(){return this._nodeName}get ids(){return this._selected_Ids}set ids(i){this._selected_Ids=i,this.change(this.ids)}get nodes(){return this._selected_Ids.map(i=>wt.data.getNode(i)).filter(i=>!i.isfake)}set onchange(i){this._fnChanges.push(i)}change(i){var n,r,o,a,m;null===(n=window.document.getElementById(ot.O.RESIZE_GROUP))||void 0===n||n.remove(),null===(r=window.document.getElementById(ot.O.SELECT_GROUP))||void 0===r||r.remove(),null===(o=window.document.getElementById(ot.O.SCAN_GROUP))||void 0===o||o.remove(),null===(a=window.document.getElementById(ot.O.CREATE_GROUP))||void 0===a||a.remove(),null===(m=window.document.getElementById(ot.O.INTERACTIVE_GROUP))||void 0===m||m.remove(),jQuery('[id^="icdt-temp-"]').remove(),this._fnChanges.forEach(y=>y(i))}deleteNode(){for(let i of this._selected_Ids){let n=wt.data.deleteNode(i);wt.history.push([{type:"delete",from:{id:n},to:{id:n}}])}wt.dataSelect.ids=[]}groupNode(){let i=[];if(wt.dataSelect.ids.length>=2){let n=wt.data.getNode(wt.dataSelect.ids[0]),{nodeId:r,attribute:o,size:a}=(0,Ct.m)(Math.ceil(1e9*Math.random()),void 0,n.pid?window.document.getElementById(n.pid):null);wt.data.node=Object.assign({id:r,type:A.$.GROUP,name:"G"},{size:a,attribute:o});for(let m of wt.dataSelect.ids)i.push(wt.data.addGroup(m,r))}if(i.length){wt.dataSelect.ids=i;let n=wt.dataSelect.nodes;1==n.length?(0,b.y)(n[0]):n.length>1&&(0,v.Q)(n)}}ungroupNode(){let i=[];for(let n of wt.dataSelect.ids)i.push(wt.data.unGroup(n));if(i.length){wt.dataSelect.ids=i;let n=wt.dataSelect.nodes;1==n.length?(0,b.y)(n[0]):n.length>1&&(0,v.Q)(n)}}}var ht=p(9942);class zt{createNodeImage(i,n){var r,o,a,m;let{nodeId:g,element:O,size:w,attribute:z,source:N}=(0,_t.G)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(r=null==n?void 0:n.x)&&void 0!==r?r:50)-50,y:(null!==(o=null==n?void 0:n.y)&&void 0!==o?o:50)-50,width:100,height:100},source:{type:"image",image:(0,ht.I)(i)}});(st=>{if(!st)return;let ct=new Image;ct.onload=()=>{let xt=(0,u.q)(ct.naturalWidth/ct.naturalHeight,100);xt>=1?(w.width=Math.min(ct.naturalWidth,512),w.height=(0,u.q)(w.width/xt,100)):(w.height=Math.min(ct.naturalHeight,512),w.width=(0,u.q)(w.height*xt,100)),w.x=(0,u.q)(w.x+50-w.width/2,100),w.y=(0,u.q)(w.y+50-w.height/2,100),Object.assign(z,(0,j.sg)(A.$.IMAGE,w,z)),(0,E.__)(O,z),wt.data.node=Object.assign({id:g,type:A.$.IMAGE,name:"Image"},{size:w,attribute:z,source:N})},ct.onerror=xt=>{console.error(`ImgSrc load failed -> ${st}`,xt),null==O||O.remove()},ct.src=st})(null!==(a=null===(m=N.image)||void 0===m?void 0:m.url)&&void 0!==a?a:"")}createNodeIframe(i,n){var r,o;let{nodeId:m,element:y,size:g,attribute:O,style:w,source:z}=(0,dt.e)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(r=null==n?void 0:n.x)&&void 0!==r?r:50)-50,y:(null!==(o=null==n?void 0:n.y)&&void 0!==o?o:50)-50,width:100,height:100},style:{},source:{type:"iframe",iframe:(0,ht.I)(i)}});(N=>{let st=(null===(N=wt.data.slide)||void 0===N||null===(N=N.svg)||void 0===N?void 0:N.viewBox)||{x:0,y:0,width:100,height:100},ct=(0,u.q)(st.width/st.height,100);ct>=1?(g.width=Math.min(st.width,512),g.height=(0,u.q)(g.width/ct,100)):(g.height=Math.min(st.height,512),g.width=(0,u.q)(g.height*ct,100)),g.x=(0,u.q)(g.x+50-g.width/2,100),g.y=(0,u.q)(g.y+50-g.height/2,100),Object.assign(O,(0,j.sg)(A.$.IMAGE,g,O)),(0,E.__)(y,O),wt.data.node=Object.assign({id:m,type:A.$.FOREIGNOBJECT,name:"ForeignObject"},{size:g,attribute:O,style:w,source:z})})()}createNodeEmbed(i,n){var r,o;let{nodeId:m,element:y,size:g,attribute:O,style:w,source:z}=(0,dt.e)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(r=null==n?void 0:n.x)&&void 0!==r?r:50)-50,y:(null!==(o=null==n?void 0:n.y)&&void 0!==o?o:50)-50,width:100,height:100},style:{},source:{type:"embed",embed:Object.assign(i,(0,ht.I)(i))}});(N=>{let st=(null===(N=wt.data.slide)||void 0===N||null===(N=N.svg)||void 0===N?void 0:N.viewBox)||{x:0,y:0,width:100,height:100},ct=(0,u.q)(st.width/st.height,100);ct>=1?(g.width=Math.min(st.width,512),g.height=(0,u.q)(g.width/ct,100)):(g.height=Math.min(st.height,512),g.width=(0,u.q)(g.height*ct,100)),g.x=(0,u.q)(g.x+50-g.width/2,100),g.y=(0,u.q)(g.y+50-g.height/2,100),Object.assign(O,(0,j.sg)(A.$.IMAGE,g,O)),(0,E.__)(y,O),wt.data.node=Object.assign({id:m,type:A.$.FOREIGNOBJECT,name:"ForeignObject"},{size:g,attribute:O,style:w,source:z})})()}createNodeMedia(i,n){var r,o,a,m;let{nodeId:g,element:O,size:w,attribute:z,source:N}=(0,_t.G)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(r=null==n?void 0:n.x)&&void 0!==r?r:50)-50,y:(null!==(o=null==n?void 0:n.y)&&void 0!==o?o:50)-50,width:100,height:100},source:{type:"image",image:(0,ht.I)(i.cover)}}),st={click:{media:i.media}};(ct=>{if(!ct)return;let xt=new Image;xt.onload=()=>{let jt=(0,u.q)(xt.naturalWidth/xt.naturalHeight,100);jt>=1?(w.width=Math.min(xt.naturalWidth,512),w.height=(0,u.q)(w.width/jt,100)):(w.height=Math.min(xt.naturalHeight,512),w.width=(0,u.q)(w.height*jt,100)),w.x=(0,u.q)(w.x+50-w.width/2,100),w.y=(0,u.q)(w.y+50-w.height/2,100),Object.assign(z,(0,j.sg)(A.$.IMAGE,w,z)),(0,E.__)(O,z),wt.data.node=Object.assign({id:g,type:A.$.IMAGE,name:"Image"},{size:w,attribute:z,source:N,interactive:st})},xt.onerror=jt=>{console.error(`ImgSrc load failed -> ${ct}`,jt),null==O||O.remove()},xt.src=ct})(null!==(a=null===(m=N.image)||void 0===m?void 0:m.url)&&void 0!==a?a:"")}insert(i){var n;if(wt.data.insertSlide(wt.data.slideId,1),i.title){let{nodeId:r,size:o,attribute:a,style:m,source:y}=(0,dt.e)(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:`<span style="font-size: 40px;">${i.title}</span>`}}});wt.data.node=Object.assign({id:r,type:A.$.FOREIGNOBJECT,name:"ForeignObject"},{size:o,attribute:a,style:m,source:y})}if(i.description){let{nodeId:r,size:o,attribute:a,style:m,source:y}=(0,dt.e)(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 24px;">${i.description.replace(/\n/g,"<br/>")}</span>`}}});wt.data.node=Object.assign({id:r,type:A.$.FOREIGNOBJECT,name:"ForeignObject"},{size:o,attribute:a,style:m,source:y})}null!==(n=i.media)&&void 0!==n&&n.prompt&&((()=>{let{nodeId:r,size:o,attribute:a}=(0,tt.f)(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}});wt.data.node=Object.assign({id:r,type:A.$.RECT,name:"Rect"},{size:o,attribute:a})})(),(r=>{let{nodeId:o,size:a,attribute:m,style:y,source:g}=(0,dt.e)(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 18px; color: #6633cc"><i>${null===(r=i.media)||void 0===r?void 0:r.prompt}</i></span>`}}});wt.data.node=Object.assign({id:o,type:A.$.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:m,style:y,source:g})})())}}var Jt=p(5226);class fe{get newSlideId(){return Math.ceil(1e9*Math.random())}get _defaultSlide(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang m\u1edbi",svg:{viewBox:wt.screen.frameSize,nodes:[]}}))}constructor(){this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=()=>{var i;let n=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((a,m)=>m==this._slideIdx),r=null==n?void 0:n.svg,o=a=>{let m=[];return a.filter(y=>!y.isdeleted).forEach(y=>{y.type==A.$.GROUP?m=m.concat(o(y.nodes||[])):m.push(y.id)}),m};return o((null==r?void 0:r.nodes)||[])}}get get(){var i;let n=r=>{var o,a;return null===(o=r)||void 0===o||o.filter(m=>m.type==A.$.GROUP).forEach(m=>{var y;m.nodes=n(null===(y=m.nodes)||void 0===y?void 0:y.filter(g=>!g.isdeleted))}),(r=null===(a=r)||void 0===a?void 0:a.filter(m=>{var y,g;return m.type!=A.$.GROUP||(null!==(y=null===(g=m.nodes)||void 0===g?void 0:g.length)&&void 0!==y?y:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var o;r.svg&&(r.svg.nodes=n(null===(o=r.svg)||void 0===o||null===(o=o.nodes)||void 0===o?void 0:o.filter(a=>!a.isdeleted)))}),this._dataSource}get getResource(){var i;let n=[];return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var o,a,m,y,g,O,w,z;n.push(null===(o=r.svg)||void 0===o||null===(o=o.background)||void 0===o?void 0:o.path),null===(a=r.svg)||void 0===a||a.nodes.forEach(N=>{var st,ct,xt,jt,Qt,ye,ge,pe,me,Se;n.push(null===(st=N.source)||void 0===st||null===(st=st.image)||void 0===st?void 0:st.path),n.push(null===(ct=N.source)||void 0===ct||null===(ct=ct.audio)||void 0===ct?void 0:ct.path),n.push(null===(xt=N.source)||void 0===xt||null===(xt=xt.video)||void 0===xt?void 0:xt.path),n.push(null===(jt=N.source)||void 0===jt||null===(jt=jt.file)||void 0===jt?void 0:jt.path),n.push(null===(Qt=N.source)||void 0===Qt||null===(Qt=Qt.iframe)||void 0===Qt?void 0:Qt.path),n.push(null===(ye=N.source)||void 0===ye||null===(ye=ye.track)||void 0===ye?void 0:ye.path),n.push(null===(ge=N.interactive)||void 0===ge||null===(ge=ge.show)||void 0===ge||null===(ge=ge.audio)||void 0===ge||null===(ge=ge.source)||void 0===ge?void 0:ge.path),n.push(null===(pe=N.interactive)||void 0===pe||null===(pe=pe.click)||void 0===pe||null===(pe=pe.audio)||void 0===pe||null===(pe=pe.source)||void 0===pe?void 0:pe.path),n.push(null===(me=N.interactive)||void 0===me||null===(me=me.click)||void 0===me||null===(me=me.image)||void 0===me||null===(me=me.source)||void 0===me?void 0:me.path),n.push(null===(Se=N.interactive)||void 0===Se||null===(Se=Se.click)||void 0===Se||null===(Se=Se.video)||void 0===Se||null===(Se=Se.source)||void 0===Se?void 0:Se.path)}),n.push(null===(m=r.test)||void 0===m||null===(m=m.audiotrue)||void 0===m?void 0:m.path),n.push(null===(y=r.test)||void 0===y||null===(y=y.audiofalse)||void 0===y?void 0:y.path),n.push(null===(g=r.test)||void 0===g||null===(g=g.effecttrue)||void 0===g?void 0:g.path),n.push(null===(O=r.test)||void 0===O||null===(O=O.effectfalse)||void 0===O?void 0:O.path),n.push(null===(w=r.test)||void 0===w||null===(w=w.icontrue)||void 0===w?void 0:w.path),n.push(null===(z=r.test)||void 0===z||null===(z=z.iconfalse)||void 0===z?void 0:z.path)}),n.filter(r=>r).map(r=>r.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()).filter((r,o,a)=>a.indexOf(r)==o)}set set(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,E.wM)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get dataSource(){var i;let n=r=>{var o,a;return null===(o=r)||void 0===o||o.filter(m=>m.type==A.$.GROUP).forEach(m=>{var y;m.nodes=n(null===(y=m.nodes)||void 0===y?void 0:y.filter(g=>!g.isdeleted))}),(r=null===(a=r)||void 0===a?void 0:a.filter(m=>{var y,g;return m.type!=A.$.GROUP||(null!==(y=null===(g=m.nodes)||void 0===g?void 0:g.length)&&void 0!==y?y:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(r=>{var o;r.svg&&(r.svg.nodes=n(null===(o=r.svg)||void 0===o||null===(o=o.nodes)||void 0===o?void 0:o.filter(a=>!a.isdeleted)))}),this._dataSource.resources=this.getResource,this._dataSource}set dataSource(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,E.wM)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get slideId(){var i,n;return null!==(i=null===(n=this.slide)||void 0===n?void 0:n.id)&&void 0!==i?i:0}get slideIdx(){return this._slideIdx}get slide(){var i;return null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((n,r)=>r==this._slideIdx)}get slides(){return this._dataSource.slides||[]}backSlide(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))}nextSlide(){var i,n;this._slideIdx<(null!==(i=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==i?i:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))}refreshSlide(){(0,E.wM)(),(0,Jt.E)(this.slide)}openSlide(i,n){var r,o,a,m,y;if(i)for(let N=0,st=null!==(g=null===(O=this._dataSource.slides)||void 0===O?void 0:O.length)&&void 0!==g?g:0;N<st;N++){var g,O,w;if((null!==(w=this._dataSource.slides)&&void 0!==w?w:[])[N].id==i){this._slideIdx=N;break}}else if(n&&n>=0&&n<(null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.length)&&void 0!==r?r:0))this._slideIdx=null!=n?n:0;else{var z;this._slideIdx=0,null!==(z=this._dataSource.slides)&&void 0!==z&&z.length||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))])}(0,E.wM)(),null!==(a=this.slide)&&void 0!==a&&null!==(a=a.svg)&&void 0!==a&&a.viewBox&&(wt.screen.frameSize=this.slide.svg.viewBox),(0,Jt.E)(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(m=null===(y=this._dataSource.slides)||void 0===y?void 0:y.length)&&void 0!==m?m:0,this.slide)}addSlide(){var i,n,r;null===(i=this._dataSource.slides)||void 0===i||i.push(this._defaultSlide),this._slideIdx=(null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.length)&&void 0!==n?n:0)-1,this.openSlide(void 0,this._slideIdx)}tryReplaceSlide(i,n,r){var o,a,m,y,g;let O=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(z=>z.id==i);if(!r||!O||null!=O&&null!==(a=O.svg)&&void 0!==a&&a.nodes.filter(z=>!z.isdeleted).length)return this.insertSlide(i,n,r);let w=null!==(m=null===(y=this._dataSource.slides)||void 0===y?void 0:y.indexOf(O))&&void 0!==m?m:0;null===(g=this._dataSource.slides)||void 0===g||g.splice(w,1,r),this._slideIdx=w,this.openSlide(void 0,this._slideIdx)}insertSlide(i,n,r){var o,a,m,y,g;let O=null!==(o=null===(a=this._dataSource.slides)||void 0===a?void 0:a.find(N=>N.id==i))&&void 0!==o?o:this._defaultSlide,w=(null!==(m=null===(y=this._dataSource.slides)||void 0===y?void 0:y.indexOf(O))&&void 0!==m?m:0)+n;var z;r?(r.id=this.newSlideId,r.code=void 0,r.name||(r.name="Trang m\u1edbi"),null!==(z=r.svg)&&void 0!==z&&z.viewBox||r.svg&&(r.svg.viewBox=wt.screen.frameSize)):r=this._defaultSlide,null===(g=this._dataSource.slides)||void 0===g||g.splice(w,0,r),this._slideIdx=w,this.openSlide(void 0,this._slideIdx)}copySlide(i){var n,r,o,a,m,y,g;let O=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(N=>N.id==i))&&void 0!==n?n:this._defaultSlide,w=(null!==(o=null===(a=this._dataSource.slides)||void 0===a?void 0:a.indexOf(O))&&void 0!==o?o:0)+1,z=Object.assign(JSON.parse(JSON.stringify(O)),{id:this.newSlideId,code:void 0,name:`${O.name} + (Copy)`});null===(m=this._dataSource.slides)||void 0===m||m.splice(w,0,z),this.changeSlide(this.slides,this.slideIdx,null!==(y=null===(g=this._dataSource.slides)||void 0===g?void 0:g.length)&&void 0!==y?y:0,this.slide)}moveSlide(i,n){var r,o,a,m,y,g;let O=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(z=>z.id==i))&&void 0!==r?r:this._defaultSlide,w=null!==(a=null===(m=this._dataSource.slides)||void 0===m?void 0:m.indexOf(O))&&void 0!==a?a:0;null===(y=this._dataSource.slides)||void 0===y||y.splice(w+n,0,null===(g=this._dataSource.slides)||void 0===g?void 0:g.splice(w,1)[0])}deleteSlide(i){var n,r,o,a,m,y;let g=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(N=>N.id==i))&&void 0!==n?n:this._defaultSlide,O=null!==(o=null===(a=this._dataSource.slides)||void 0===a?void 0:a.indexOf(g))&&void 0!==o?o:0;if(null===(m=this._dataSource.slides)||void 0===m||m.splice(O,1),null!==(y=this._dataSource.slides)&&void 0!==y&&y.length)if(O<this._slideIdx){var w,z;--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(w=null===(z=this._dataSource.slides)||void 0===z?void 0:z.length)&&void 0!==w?w:0,this.slide)}else O==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx));else this.addSlide()}deleteSlide1(i){var n,r,o,a,m;let y=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(O=>O.id==i))&&void 0!==n?n:this._defaultSlide,g=null!==(o=null===(a=this._dataSource.slides)||void 0===a?void 0:a.indexOf(y))&&void 0!==o?o:0;if(y.isdeleted=!0,null!==(m=this._dataSource.slides)&&void 0!==m&&null!==(m=m.filter(O=>!O.isdeleted))&&void 0!==m&&m.length){let O=!0;for(;y.isdeleted;)O?g++:g--,this._dataSource.slides[g]?y=this._dataSource.slides[g]:O=!O;this.openSlide(y.id)}else this.addSlide()}set onChangeSlide(i){this._fnChangeSlides.push(i)}changeSlide(i,n,r,o){this._fnChangeSlides.forEach(a=>a(i,n,r,o))}set node(i){var n,r;let o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((m,y)=>y==this._slideIdx),a=null==o?void 0:o.svg;null!=a&&a.nodes&&(null==a||a.nodes.push(i)),wt.history.push([{type:"add",from:{id:i.id},to:{id:i.id}}]),(0,Jt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id)}findNode(i){var n;let r=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((N,st)=>st==this._slideIdx),o=null==r?void 0:r.svg,a=(N,st)=>{let ct=null==N?void 0:N.find(Qt=>Qt.id==i);if(ct)return ct.pid=st,ct;let xt=0,jt=N.length||0;for(;xt<jt&&!ct&&(ct=a(N[xt].nodes||[],N[xt].id),!ct);)xt++;return ct},m=a((null==o?void 0:o.nodes)||[]);var y,g,O,w,z;return m?(m.style=null!==(y=m.style)&&void 0!==y?y:{},m.source=null!==(g=m.source)&&void 0!==g?g:{},m.animate=null!==(O=m.animate)&&void 0!==O?O:{},m.interactive=null!==(w=m.interactive)&&void 0!==w?w:{},m.variable=null!==(z=m.variable)&&void 0!==z?z:{},m):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}getNode(i){var n;let r=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((y,g)=>g==this._slideIdx),o=null==r?void 0:r.svg,m=y=>{let g=(null==y?void 0:y.find(ct=>ct.id==i))||(y=>{let g=null,O=0,w=y.length||0;for(;O<w&&!g;){if(g=m(y[O].nodes),g){g.pid=y[O].id;break}O++}var z,N,st,ct,xt;return g&&(g.style=null!==(z=g.style)&&void 0!==z?z:{},g.source=null!==(N=g.source)&&void 0!==N?N:{},g.animate=null!==(st=g.animate)&&void 0!==st?st:{},g.interactive=null!==(ct=g.interactive)&&void 0!==ct?ct:{},g.variable=null!==(xt=g.variable)&&void 0!==xt?xt:{}),g})((null==y?void 0:y.filter(ct=>ct.type==A.$.GROUP))||[]);var O,w,z,N,st;return g&&(g.style=null!==(O=g.style)&&void 0!==O?O:{},g.source=null!==(w=g.source)&&void 0!==w?w:{},g.animate=null!==(z=g.animate)&&void 0!==z?z:{},g.interactive=null!==(N=g.interactive)&&void 0!==N?N:{},g.variable=null!==(st=g.variable)&&void 0!==st?st:{}),g};return m((null==o?void 0:o.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}}getNodeInArea(i,n,r,o,a){var m;let y=null===(m=this._dataSource.slides)||void 0===m?void 0:m.find((w,z)=>z==this._slideIdx),g=null==y?void 0:y.svg,O=w=>{let z=[];return w.filter(N=>!N.isdeleted).forEach(N=>{N.type==A.$.GROUP?z=z.concat(O(N.nodes||[])):i>N.size.x||n>N.size.y||r<N.size.x+N.size.width||o<N.size.y+N.size.height||(a?N.type==a&&z.push(N.id):z.push(N.id))}),z};return O((null==g?void 0:g.nodes)||[])}getNodeOnArea(i,n,r,o,a){var m;let y=null===(m=this._dataSource.slides)||void 0===m?void 0:m.find((w,z)=>z==this._slideIdx),g=null==y?void 0:y.svg,O=w=>{let z=[];return w.filter(N=>!N.isdeleted).forEach(N=>{N.type==A.$.GROUP?z=z.concat(O(N.nodes||[])):N.size.x+N.size.width<i||N.size.y+N.size.height<n||N.size.x>r||N.size.y>o||(a?N.type==a&&z.push(N.id):z.push(N.id))}),z};return O((null==g?void 0:g.nodes)||[])}deleteNode(i,n){var r;return this.getNode(i).isdeleted=null==n||n,(0,Jt.E)(this.slide),(0,Jt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),i}unGroup(i){var n,r;let o=this.getNode(i),a=Math.ceil(1e9*Math.random());return null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.push(Object.assign(JSON.parse(JSON.stringify(o)),{id:a})),Object.assign(o,{isdeleted:!0}),(0,Jt.E)(this.slide),(0,Jt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),a}addGroup(i,n){var r;let o=this.getNode(i),a=this.getNode(n);a.nodes=a.nodes||[];let m=Math.ceil(1e9*Math.random());return a.nodes.push(Object.assign(JSON.parse(JSON.stringify(o)),{id:m})),Object.assign(o,{isdeleted:!0}),(0,Jt.E)(this.slide),(0,Jt.E)(this.slide,null===(r=this.slide)||void 0===r?void 0:r.id),m}setNodeP(i,n){var r;let o=null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r?void 0:r.nodes.find(a=>a.id==i);o&&(o.pid=n||null)}bringToFront(i){this.bringToFrontStep(i,0)}sendToBack(i){this.sendToBackStep(i,0)}bringToFrontStep(i,n){var r,o,a,m;null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.forEach((w,z)=>{w.index=z+1});let y=(null!==(o=null===(a=this.slide)||void 0===a||null===(a=a.svg)||void 0===a?void 0:a.nodes.length)&&void 0!==o?o:0)+1;var g,O;i.map(w=>{var z,N;return{id:w,index:null!==(z=null===(N=this.slide)||void 0===N||null===(N=N.svg)||void 0===N||null===(N=N.nodes.find(st=>st.id==w))||void 0===N?void 0:N.index)&&void 0!==z?z:0}}).sort((w,z)=>w.index-z.index).forEach(w=>{var N,z;n?null===(N=this.slide)||void 0===N||null===(N=N.svg)||void 0===N||N.nodes.filter((st,ct)=>st.id==w.id).forEach(st=>{st.index=n+w.index+w.index/1e3}):null===(z=this.slide)||void 0===z||null===(z=z.svg)||void 0===z||z.nodes.filter(st=>st.id==w.id).forEach(st=>{st.index=y+w.index})}),null===(m=this.slide)||void 0===m||null===(m=m.svg)||void 0===m||m.nodes.sort((w,z)=>{var N,st;return(null!==(N=w.index)&&void 0!==N?N:0)-(null!==(st=z.index)&&void 0!==st?st:0)}),(0,Jt.T)(this.slide),i.length<=1?(null===(g=window.document.getElementById(ot.O.RESIZE_GROUP))||void 0===g||g.remove(),(0,b.y)(wt.dataSelect.nodes[0])):(null===(O=window.document.getElementById(ot.O.SELECT_GROUP))||void 0===O||O.remove(),(0,v.Q)(wt.dataSelect.nodes))}sendToBackStep(i,n){var r,o,a,m;null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.forEach((y,g)=>{y.index=g+1}),i.map(y=>{var g,O;return{id:y,index:null!==(g=null===(O=this.slide)||void 0===O||null===(O=O.svg)||void 0===O||null===(O=O.nodes.find(w=>w.id==y))||void 0===O?void 0:O.index)&&void 0!==g?g:0}}).sort((y,g)=>y.index-g.index).forEach(y=>{var O,g;n?null===(O=this.slide)||void 0===O||null===(O=O.svg)||void 0===O||O.nodes.filter(w=>w.id==y.id).forEach(w=>{w.index=n+y.index+y.index/1e3}):null===(g=this.slide)||void 0===g||null===(g=g.svg)||void 0===g||g.nodes.filter(w=>w.id==y.id).forEach(w=>{w.index=y.index/100-1})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((y,g)=>{var O,w;return(null!==(O=y.index)&&void 0!==O?O:0)-(null!==(w=g.index)&&void 0!==w?w:0)}),(0,Jt.T)(this.slide),i.length<=1?(null===(a=window.document.getElementById(ot.O.RESIZE_GROUP))||void 0===a||a.remove(),(0,b.y)(wt.dataSelect.nodes[0])):(null===(m=window.document.getElementById(ot.O.SELECT_GROUP))||void 0===m||m.remove(),(0,v.Q)(wt.dataSelect.nodes))}bringToFrontArea(i){var n,r;let o=i.map(ct=>wt.data.getNode(ct)).filter(ct=>!ct.isfake),{x1:a,y1:m,x2:y,y2:g}=ne(o),O=this.getNodeOnArea(a,m,y,g);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((ct,xt)=>{ct.index=xt+1});let w=O.map(ct=>{var xt,jt;return null!==(xt=null===(jt=this.slide)||void 0===jt||null===(jt=jt.svg)||void 0===jt||null===(jt=jt.nodes.find(Qt=>Qt.id==ct))||void 0===jt?void 0:jt.index)&&void 0!==xt?xt:0}),z=Math.max.apply(null,w);var N,st;i.forEach((ct,xt)=>{var jt;null===(jt=this.slide)||void 0===jt||null===(jt=jt.svg)||void 0===jt||jt.nodes.filter(Qt=>Qt.id==ct).forEach(Qt=>{Qt.index=z+(xt+1)/100})}),null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.sort((ct,xt)=>{var jt,Qt;return(null!==(jt=ct.index)&&void 0!==jt?jt:0)-(null!==(Qt=xt.index)&&void 0!==Qt?Qt:0)}),(0,Jt.T)(this.slide),i.length<=1?(null===(N=window.document.getElementById(ot.O.RESIZE_GROUP))||void 0===N||N.remove(),(0,b.y)(wt.dataSelect.nodes[0])):(null===(st=window.document.getElementById(ot.O.SELECT_GROUP))||void 0===st||st.remove(),(0,v.Q)(wt.dataSelect.nodes))}sendToBackArea(i){var n,r;let o=i.map(ct=>wt.data.getNode(ct)).filter(ct=>!ct.isfake),{x1:a,y1:m,x2:y,y2:g}=ne(o),O=this.getNodeOnArea(a,m,y,g);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((ct,xt)=>{ct.index=xt+1});let w=O.map(ct=>{var xt,jt;return null!==(xt=null===(jt=this.slide)||void 0===jt||null===(jt=jt.svg)||void 0===jt||null===(jt=jt.nodes.find(Qt=>Qt.id==ct))||void 0===jt?void 0:jt.index)&&void 0!==xt?xt:0}),z=Math.min.apply(null,w)-1;var N,st;i.forEach((ct,xt)=>{var jt;null===(jt=this.slide)||void 0===jt||null===(jt=jt.svg)||void 0===jt||jt.nodes.filter(Qt=>Qt.id==ct).forEach(Qt=>{Qt.index=z+(xt+1)/100})}),null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.sort((ct,xt)=>{var jt,Qt;return(null!==(jt=ct.index)&&void 0!==jt?jt:0)-(null!==(Qt=xt.index)&&void 0!==Qt?Qt:0)}),(0,Jt.T)(this.slide),i.length<=1?(null===(N=window.document.getElementById(ot.O.RESIZE_GROUP))||void 0===N||N.remove(),(0,b.y)(wt.dataSelect.nodes[0])):(null===(st=window.document.getElementById(ot.O.SELECT_GROUP))||void 0===st||st.remove(),(0,v.Q)(wt.dataSelect.nodes))}}const ne=D=>{let i=999999,n=999999,r=-999999,o=-999999;return D.forEach(a=>{i=Math.min(i,a.size.x),n=Math.min(n,a.size.y),r=Math.max(r,a.size.x+a.size.width),o=Math.max(o,a.size.y+a.size.height)}),{x1:i,y1:n,x2:r,y2:o}};class re{constructor(){this._index=-1,this._dataSource=[],this.undoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":wt.data.deleteNode(n.from.id);break;case"edit":break;case"delete":wt.data.deleteNode(n.from.id,!1);break;case"size":{let{id:r,type:o,size:a,attribute:m}=wt.data.getNode(n.from.id);Object.assign(a,n.from.size),Object.assign(m,(0,j.sg)(o,a,m)),(0,E.__)(window.document.getElementById(r),m);break}case"attribute":{let{id:r,attribute:o}=wt.data.getNode(n.from.id);Object.assign(o,n.from.attribute),(0,E.__)(window.document.getElementById(r),o);break}case"style":{let{id:r,style:o}=wt.data.getNode(n.from.id);Object.assign(null!=o?o:{},n.from.style),(0,E.DB)(window.document.getElementById(r),o);break}case"source":{let{id:r,type:o,source:a}=wt.data.getNode(n.from.id);Object.assign(null!=a?a:{},n.from.source),(0,E.QI)(window.document.getElementById(r),o,null!=a?a:{});break}case"animate":{let{animate:r}=wt.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.animate);break}case"interactive":{let{interactive:r}=wt.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.interactive);break}case"variable":{let{variable:r}=wt.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.variable);break}}}),wt.dataSelect.ids=[]},this.redoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":wt.data.deleteNode(n.to.id,!1);break;case"edit":break;case"delete":wt.data.deleteNode(n.to.id,!0);break;case"size":{let{id:r,type:o,size:a,attribute:m}=wt.data.getNode(n.to.id);Object.assign(a,n.to.size),Object.assign(m,(0,j.sg)(o,a,m)),(0,E.__)(window.document.getElementById(r),m);break}case"attribute":{let{id:r,attribute:o}=wt.data.getNode(n.to.id);Object.assign(o,n.to.attribute),(0,E.__)(window.document.getElementById(r),o);break}case"style":{let{id:r,style:o}=wt.data.getNode(n.to.id);Object.assign(null!=o?o:{},n.to.style),(0,E.DB)(window.document.getElementById(r),o);break}case"source":{let{id:r,type:o,source:a}=wt.data.getNode(n.to.id);Object.assign(null!=a?a:{},n.to.source),(0,E.QI)(window.document.getElementById(r),o,null!=a?a:{});break}case"animate":{let{animate:r}=wt.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.animate);break}case"interactive":{let{interactive:r}=wt.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.interactive);break}case"variable":{let{variable:r}=wt.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.variable);break}}}),wt.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}get index(){return this._index}get total(){return this._dataSource.length}get dataSource(){return this._dataSource}renew(){this._index=-1,this._dataSource=[],this.change()}push(i){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:i}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:i})),this.change()}undo(){this._index<0||(this.undoExecute(this._dataSource[this._index].data),this._index--,this.change())}redo(){this._index>=this._dataSource.length-1||(this._index++,this.redoExecute(this._dataSource[this._index].data),this.change())}set onchange(i){this._fnChanges.push(i)}change(){this._fnChanges.forEach(i=>i(this.index,this.total))}}class we{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}get actived(){return this._actived}set actived(i){this._actived=i}get get(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}}set set(i){var n,r;this._frameSize.width=null!==(n=null==i?void 0:i.width)&&void 0!==n?n:1080,this._frameSize.height=null!==(r=null==i?void 0:i.height)&&void 0!==r?r:1080,this.zoomTo="fit"}get width(){return this._width}get height(){return this._height}get scale(){return this._scale}get dislocation(){return this._dislocation}get offset(){return this._offset}get svgSize(){return this._svgSize}get svgViewBox(){return this._svgViewBox}set svgViewBox(i){this._svgViewBox=i}get frameSize(){return this._frameSize}set frameSize(i){this._frameSize.x=i.x,this._frameSize.y=i.y,this._frameSize.width=i.width,this._frameSize.height=i.height,this.reset()}set screen(i){this._offset=i.offset,this._width=i.width,this._height=i.height,this.reset()}reset(){this.scaleTo(this._scale,void 0,!0)}scaleTo(i,n,r){var o;if(!(i<.01||i>100)){if(n=null!==(o=n)&&void 0!==o?o:{x:this._width/2,y:this._height/2},r)this._dislocation.x=this._width/i/2-n.x,this._dislocation.y=this._height/i/2-n.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var a={x:Math.max(0,Math.min((0,u.q)(n.x/this._width,1e3),1)),y:Math.max(0,Math.min((0,u.q)(n.y/this._height,1e3),1))},m={x:(this._width/i-this._width/this._scale)*a.x,y:(this._height/i-this._height/this._scale)*a.y};this._dislocation.x+=m.x,this._dislocation.y+=m.y}this._scale=i,this.change(),this.zoomChange(this.scale)}}set zoomTo(i){"fit"==i?this.scaleTo(Math.min((this._width-80)/this._frameSize.width,(this._height-80)/this._frameSize.height),void 0,!0):"number"==typeof i&&this.scaleTo(i/100,void 0,!0)}init(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}}move(i,n){this._dislocation.x=i.x+n.x/this._scale,this._dislocation.y=i.y+n.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()}change(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()}refScreen(){(0,E.eb)()}set onZoomChange(i){this._fnZoomChanges.push(i)}zoomChange(i){this._fnZoomChanges.forEach(n=>n(i))}}var Qe=p(644);class He{constructor(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=void 0,this._fontSize=20,this._textLength=void 0,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}loadConfig(){(0,Qe.sV)({callback:i=>{this._fill=(null==i?void 0:i.fill)||this._fill,this._stroke=(null==i?void 0:i.stroke)||this._stroke,this._strokeWidth=(null==i?void 0:i.strokeWidth)||this._strokeWidth,this._strokeLinecap=(null==i?void 0:i.strokeLinecap)||this._strokeLinecap,this._strokeLinejoin=(null==i?void 0:i.strokeLinejoin)||this._strokeLinejoin,this.changeFill(this.fill),this.changeStroke(this.stroke),this.changeStrokeWidth(this.strokeWidth)}})}saveConfig(){(0,Qe.qp)({params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}})}get fill(){return this._fill}set fill(i){this._fill=i,this.changeFill(this.fill)}get stroke(){return this._stroke}set stroke(i){this._stroke=i,this.changeStroke(this.stroke)}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i,this.changeStrokeWidth(this.strokeWidth)}get strokeLinecap(){return this._strokeLinecap}set strokeLinecap(i){this._strokeLinecap=i}get strokeLinejoin(){return this._strokeLinejoin}set strokeLinejoin(i){this._strokeLinejoin=i}get fontFamily(){return this._fontFamily}get fontSize(){return this._fontSize}get textLength(){return this._textLength}set onchangefill(i){this._fnChangeFills.push(i)}changeFill(i){this._fnChangeFills.forEach(n=>n(i)),this.saveConfig()}set onchangestroke(i){this._fnChangeStrokes.push(i)}changeStroke(i){this._fnChangeStrokes.forEach(n=>n(i)),this.saveConfig()}set onchangestrokewidth(i){this._fnChangeStrokeWidths.push(i)}changeStrokeWidth(i){this._fnChangeStrokeWidths.forEach(n=>n(i)),this.saveConfig()}}var Pe=p(70),Je=p(5973),Ze=p(4787),Ee=function(D){return D&&JSON.parse(JSON.stringify(D))},De=[{key:"FinishedTest",type:"boolean",value:!1,note:"Ho\xe0n th\xe0nh BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"T\u1ed5ng s\u1ed1 BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"S\u1ed1 BKT kh\xf4ng v\u01b0\u1ee3t qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"S\u1ed1 BKT \u0111\xe3 v\u01b0\u1ee3t qua",system:!0,readonly:!1}],Ge=[],Ye={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},qe={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]};class Ue{constructor(){this._data_variables=Ee(De).concat(Ee(Ge)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=i=>{"function"==typeof i&&this.GetActionExecuteds.push(i)},this.OnGetActionExecuted=i=>{this.GetActionExecuteds.forEach(n=>{n(i)})},this.SetActionExecutings=[],this.FuncSetExecutings=i=>{"function"==typeof i&&this.SetActionExecutings.push(i)},this.OnSetActionExecuting=i=>{this.SetActionExecutings.forEach(n=>{n(i)})},this.SetActionExecuteds=[],this.FuncSetExecuteds=i=>{"function"==typeof i&&this.SetActionExecuteds.push(i)},this.OnSetActionExecuted=i=>{for(var n of(this.SetActionExecuteds.forEach(r=>{r(i)}),this.getCondition(i.key)||[]))n.if&&n.if.length>0&&(this.checkValueConditions(n.if)?this.setValueOperators(n.then||[]):this.setValueOperators(n.else||[]))}}renew(){this._data_variables=Ee(De).concat(Ee(Ge)),this._data_conditions=[]}get totalVariable(){return this._data_variables.length}get totalCondition(){return this._data_conditions.length}get get(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}}set set(i){if(!i)return;let n={};"string"==typeof i?n=JSON.parse(i):"object"==typeof i&&(n=i),this._data_variables=n.variables||[],this._data_conditions=n.conditions||(r=>(this._data_variables.map(o=>o.change||[]).forEach(o=>{r=r.concat(o)}),r))([]),De.forEach(r=>{var o=this._data_variables.filter(a=>a.key==r.key);o.length?o.forEach(function(a,m,y){a.type=r.type,a.readonly=r.readonly,a.system=r.system}):this._data_variables.push(r)})}getVariableTemp(){return Ee(Ye)}getConditionTemp(){return Ee(qe)}getKeys(){return this._data_variables.map(function(i){return i.key}).sort(function(i,n){return i.localeCompare(n)})}getVariableAll(){return this._data_variables.length?Ee((D=this._data_variables,i="key",function(n){for(var r of D.map(function(o){return o[i]}).sort())D.filter(function(o){return o[i]==r}).forEach(function(o){n.push(o)}),D=D.filter(function(o){return o[i]!=r});return n}([]))):Ee(De).concat(Ee(Ge));var D,i}setVariableAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_variables=i),De.forEach(n=>{var r=this._data_variables.filter(o=>o.key==n.key);r.length?r.forEach((o,a,m)=>{o.type=n.type,o.readonly=n.readonly,o.system=n.system}):this._data_variables.push(n)}))}getVariable(i){return i?Ee(this._data_variables.filter(n=>n.key==i)[0]||{}):{}}setVariable(i,n,r){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),r||(r=(this._data_variables.filter(a=>a.key==i)[0]||{}).type||null),r){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var o=this._data_variables.filter(a=>a.key==i);o.length?o.forEach(function(a,m,y){a.value=n,a.type=r}):this._data_variables.push({key:i,value:n,type:r})}}getValue(i,n){if(!i)return"";var r=this._data_variables.filter(function(m){return m.key==i});if(r.length){var a,o=r[0]||{};switch(this.OnGetActionExecuting(o),n||(n=o.type||null),n){case"string":a=[null,void 0,NaN,1/0].indexOf(o.value)>=0?"":"string"==typeof o.value?o.value||"":o.value.toString().trim();break;case"number":a=[null,void 0,NaN,1/0].indexOf(o.value)>=0?0:"number"==typeof o.value?o.value||0:parseFloat(o.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(o.value)>=0?a=!1:"boolean"==typeof o.value?a=o.value:(a=(o.value+"").toLowerCase(),a="1"==o.value||"true"==o.value||"yes"==o.value||"dung"==o.value);break;case"audio-src":a=[null,void 0,NaN,1/0].indexOf(o.value)>=0?"":o.value?`<audio controls style="width:280px;vertical-align:middle;"><source src="${o.value}"></source></audio>`:"";break;case"video-src":a=[null,void 0,NaN,1/0].indexOf(o.value)>=0?"":o.value?`<video controls style="width:280px;vertical-align:middle;"><source src="${o.value}"></source></video>`:"";break;case"img-src":a=[null,void 0,NaN,1/0].indexOf(o.value)>=0?"":o.value?`<img style="width:100%;vertical-align:middle;" src="${o.value}"/>`:"";break;default:a=[null,void 0,NaN,1/0].indexOf(o.value)>=0?"":o.value}return this.OnGetActionExecuted(o),a}return null}setValue(i,n,r){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),r||(r=(this._data_variables.filter(function(m){return m.key==i})[0]||{}).type||null),r){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var o=this._data_variables.filter(function(m){return m.key==i});if(o.length){var a=o[0];this.OnSetActionExecuting(a),a&&(a.value=n),this.OnSetActionExecuted(a)}}}getConditionAll(){return Ee(this._data_conditions.sort(function(i,n){return i.idx-n.idx}))}setConditionAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_conditions=i))}getCondition(i){return i?Ee(this._data_conditions.filter(n=>n.variable==i||(n.variables||[]).indexOf(i)>=0).sort(function(n,r){return n.idx-r.idx})):{}}switchCondition(i,n,r){switch(i){case"==":return"string"==typeof r?(r=r.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),r.split(";").map(function(o){return n==o.trim()?1:0}).reduce(function(o,a){return o+a})>0):n==r;case"!=":return"string"==typeof r?(r=r.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),0==r.split(";").map(function(o){return n==o.trim()?1:0}).reduce(function(o,a){return o+a})):n!=r;case">=":return n>=r;case"<=":return n<=r;case">":return n>r;case"<":return n<r;case"\u2208":return r=(r+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),r.split(";").map(function(o){return n.indexOf(o.trim())>=0?1:0}).reduce(function(o,a){return o+a})>0;case"\u2209":return r=(r+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),0==r.split(";").map(function(o){return n.indexOf(o.trim())>=0?1:0}).reduce(function(o,a){return o+a});default:return!1}}switchOperator(i,n,r){switch(i){case"+":return n+r;case"-":return n-r;case"*":return n*r;case"/":return n/r;case"=":return r;case"=!":return!r;case"==":return n==r;case"!=":return n!=r}}switchFormula(i,n){switch(i){case"sum":return n.reduce(function(o,a){return o+a});case"sub":return n.reduce(function(o,a){return o-a});case"pro":return n.reduce(function(o,a){return o*a});case"div":return n.reduce(function(o,a){return o/a});case"avg":var r=n.reduce(function(o,a){return o+a})/(n.length||1);return Math.round(1e4*(r+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,n);case"max":return Math.max.apply(null,n);case"and":return n.reduce(function(o,a){return o&&a});case"or":return n.reduce(function(o,a){return o||a});default:return 0}}switchValueType_Condition(i){switch(i.valuetype){case"value":return this.switchCondition(i.condition,this.getValue(i.variable),i.value);case"variable":return this.switchCondition(i.condition,this.getValue(i.variable),this.getValue(i.value));default:return 0}}switchValueType_Operator(i){switch(i.valuetype){case"value":return this.switchOperator(i.operator,this.getValue(i.variable),i.value);case"variable":return this.switchOperator(i.operator,this.getValue(i.variable),this.getValue(i.value));case"variables":var n=this.switchFormula(i.valueformula,i.value.map(r=>this.getValue(r)));return this.switchOperator(i.operator,this.getValue(i.variable),n)}}checkValueCondition(i){return this.switchValueType_Condition(i)}getValueOperator(i){return this.switchValueType_Operator(i)}setValueOperator(i){null!=i&&i.variable&&this.setValue(i.variable,this.getValueOperator(i))}checkValueConditions(i){return 0==i.map(n=>{switch(n.type){case"variable":return this.switchValueType_Condition(n)?0:1;case"variables":return 0==n.variables.map(r=>this.switchValueType_Condition(Object.assign(Ee(n),{variable:r}))?0:1).reduce(function(r,o){return r+o})?0:1;default:return 0}}).reduce((n,r)=>(null!=n?n:0)+(null!=r?r:0))}setValueOperators(i){for(var n of i)switch(n.type){case"variable":this.setValue(n.variable,this.getValueOperator(n));break;case"variables":for(var r of n.variables)this.setValue(r,this.getValueOperator(Object.assign(Ee(n),{variable:r})));break;case"slide":Pe.$.runSlide(void 0,void 0,n.slide);break;case"node":{var o;(0,Ze.L5)({id:n.node,nodeStatus:Pe.$.nodeStatus,slideStatus:Pe.$.slideStatus});let a=Pe.$.findNode(n.node);null!=a&&null!==(o=a.interactive)&&void 0!==o&&o.click&&(0,Je.F)(a,Pe.$.nodeStatus,Pe.$.slideStatus);break}}}FuncGetExecutings(i){"function"==typeof i&&this.GetActionExecutings.push(i)}OnGetActionExecuting(i){this.GetActionExecutings.forEach(n=>{n(i)})}}class Ve{constructor(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}setPointer_nochange(i,n,r){if(this._pointer_type=i,n)switch(i){case T._.PEN:this._pen_type=n;break;case T._.SHAPE:this._shape_type=n,r&&n===A.$.POLYGON&&(this._polygon_type=r)}}get pointer_type(){return this._pointer_type}set pointer_type(i){switch(this._pointer_type=i,i){case T._.PEN:this._pen_type||(this._pen_type=Rt.D.DRAW);break;case T._.SHAPE:this._shape_type||(this._shape_type=A.$.RECT)}this.changePointerType(this.pointer_type),this.change(this.pointer_type)}get pointer_type_temp(){return this._pointer_type_temp}set pointer_type_temp(i){this._pointer_type_temp=i,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)}get pen_type(){return this._pen_type}set pen_type(i){this._pen_type=i,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)}get shape_type(){return this._shape_type}set shape_type(i){this._shape_type=i,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)}get polygon_type(){return this._polygon_type}set polygon_type(i){this._polygon_type=i,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)}set onchangePointerType(i){this._fnChangePointerTypes.push(i)}changePointerType(i,n,r){this._fnChangePointerTypes.forEach(o=>o(i,n,r))}set onchangePointerTypeTemp(i){this._fnChangePointerTypeTemps.push(i)}changePointerTypeTemp(i,n,r){this._fnChangePointerTypeTemps.forEach(o=>o(i,n,r))}set onchangePenType(i){this._fnChangePenTypes.push(i)}changePenType(i,n,r){this._fnChangePenTypes.forEach(o=>o(i,n,r))}set onchangeShapeType(i){this._fnChangeShapeTypes.push(i)}changeShapeType(i,n,r){this._fnChangeShapeTypes.forEach(o=>o(i,n,r))}set onchangePolygonType(i){this._fnChangePolygonTypes.push(i)}changePolygonType(i,n,r){this._fnChangePolygonTypes.forEach(o=>o(i,n,r))}set onchange(i){this._fnChanges.push(i)}change(i,n,r){this._fnChanges.forEach(o=>o(i,n,r))}}const wt=new class ii{constructor(){this._container="",this._svg="",this._screen=we.prototype,this._data=fe.prototype,this._dataSelect=kt.prototype,this._slide=zt.prototype,this._history=re.prototype,this._attribute=He.prototype,this._pointer=Ve.prototype,this._variable=Ue.prototype,this._data=new fe,this._dataSelect=new kt,this._slide=new zt,this._history=new re,this._attribute=new He,this._pointer=new Ve,this._variable=new Ue,this._pointer.onchangePointerType=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._pointer.onchangePointerTypeTemp=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._data.onChangeSlide=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])}}get config(){return this._config}set config(i){this._config=i}get dataSource(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,resources:this._data.getResource,variable:this._variable.get,info:{}}}set dataSource(i){this._screen.set=i.screen||{width:1080,height:1080},this._data.set=i.data||{},this._variable.set=i.variable||{}}get container(){return this._container}set container(i){this._container=i}get svg(){return this._svg}set svg(i){this._svg=i}get target(){return window.document.querySelector(this._svg)}get screen(){return this._screen}get data(){return this._data}get dataSelect(){return this._dataSelect}get slide(){return this._slide}get history(){return this._history}get attribute(){return this._attribute}get pointer(){return this._pointer}get variable(){return this._variable}reloadView(){var i,n,r,o,a;this._screen.screen=(i=jQuery(this._container).offset(),n=jQuery(this._container).width(),r=jQuery(this._container).height(),console.log("reloadView",JSON.stringify({offset:i,width:n,height:r})),{offset:{x:null!==(o=null==i?void 0:i.left)&&void 0!==o?o:0,y:null!==(a=null==i?void 0:i.top)&&void 0!==a?a:0},width:null!=n?n:0,height:null!=r?r:0})}init(i){this._container=i.container,this._svg=i.target,this._screen=new we,(D=>{new E.Mh(D.container,D.target),wt.pointer.onchange=(r,o,a)=>{switch(r){case T._.POINTER:jQuery(D.target).css({cursor:"auto"});break;case T._.HAND:jQuery(D.target).css({cursor:"grab"});break;case T._.PEN:switch(o){case Rt.D.DRAW:jQuery(D.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case Rt.D.HIGHTLIGH:jQuery(D.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case T._.ERASER:jQuery(D.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case T._.SHAPE:jQuery(D.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case T._.TEXT:case T._.FOREIGNOBJECT:jQuery(D.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}},jQuery(D.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",r=>{wt.pointer.pointer_type==T._.HAND&&jQuery(D.target).css({cursor:"grabbing"})}).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",r=>{wt.pointer.pointer_type==T._.HAND&&jQuery(D.target).css({cursor:"grab"})}),jQuery(D.container).off("wheel.icdt-init").on("wheel.icdt-init",r=>{var o;r.preventDefault();let a=null!==(o=r.originalEvent)&&void 0!==o?o:r;if(console.log(a),!a.deltaX&&a.deltaY!=Math.floor(a.deltaY)||a.ctrlKey){var m=wt.screen.scale;wt.screen.scaleTo(m-.04*m*(a.deltaY>0?1:-1),(0,bt.p)({x:r.clientX,y:r.clientY},1,{x:0,y:0},wt.screen.offset))}else wt.screen.move(wt.screen.dislocation,{x:-a.deltaX,y:-a.deltaY})}),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{wt.screen.actived=!!jQuery(r.target).parents(wt.container).length}),jQuery(D.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",r=>{wt.screen.actived=!0}),jQuery(D.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",r=>{wt.screen.actived=!1,wt.pointer.pointer_type_temp==T._.HAND&&(wt.pointer.pointer_type_temp=T._.POINTER)}),jQuery(D.container).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{0==r.button&&(D.container.includes("#")&&D.container.includes(r.target.getAttribute("id"))||D.container.includes(".")&&D.container.includes(r.target.getAttribute("class"))||D.container.includes(r.target.nodeName))&&(wt.pointer.pointer_type_temp||wt.pointer.pointer_type)===T._.POINTER&&(wt.dataSelect.ids=[])}),jQuery(D.container).off("touchmove.icdt-init").on("touchmove.icdt-init",r=>{r.preventDefault()});const i=r=>{switch(wt.pointer.pointer_type_temp||wt.pointer.pointer_type){case T._.POINTER:h(r);break;case T._.HAND:(D=>{(0,yt.A)(D,new k,1,{x:0,y:0})})(r);break;case T._.PEN:(0,$t.i)(r);break;case T._.SHAPE:(D=>{var i=null;switch(wt.pointer.shape_type){case A.$.CIRCLE:i=new K;break;case A.$.ELLIPSE:i=new V;break;case A.$.LINE:i=new Kt;break;case A.$.RECT:i=new J;break;case A.$.POLYGON:var n;i=new vt(null===(n=_.find(r=>r.type==wt.pointer.polygon_type))||void 0===n?void 0:n.ratios);break;case A.$.FOREIGNOBJECT:i=new W;break;case A.$.IMAGE:i=new Ot;break;case A.$.TEXT:case A.$.PATH:i=new Nt}i&&(0,yt.A)(D,i)})(r);break;case T._.FOREIGNOBJECT:(D=>{(0,yt.A)(D,new W)})(r);break;case T._.IMAGE:(D=>{(0,yt.A)(D,new Ot)})(r);break;case T._.TEXT:(D=>{(0,yt.A)(D,new H)})(r);break;case T._.ERASER:(D=>{(0,yt.A)(D,new gt)})(r);break;case T._.INDEX:(0,Et.s)(r)}};let n=!1;jQuery(D.target).off("touchstart.icdt-init").on("touchstart.icdt-init",r=>{n=!0,i({touchEvent:r})}),jQuery(D.target).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{if(1!=r.button){if(n)return void(n=!1);i({mouseEvent:r})}}),D.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",r=>{wt.screen.actived&&((r.ctrlKey||r.altKey)&&(r.stopPropagation(),r.preventDefault()),(0,it.t)(r))}),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",r=>{wt.screen.actived&&((r.ctrlKey||r.altKey)&&(r.stopPropagation(),r.preventDefault()),(0,it.t)(r))}))})({container:i.container,target:i.target,iskeyboard:i.iskeyboard})}}},4531:(de,Dt,p)=>{p.d(Dt,{s:()=>R,Q:()=>h});var T=p(1687),E=p(4981),ot=p(4318),j=p(6816),yt=p(7492);const R=C=>{var k,A,Z,_;let P=(null===(k=C.mouseEvent)||void 0===k?void 0:k.target)||(null===(A=C.touchEvent)||void 0===A?void 0:A.target),u=(null==P?void 0:P.getAttribute("id"))||"",K=null==P?void 0:P.nodeName,B=jQuery(P).parents("g[id]").attr("id")||"";if(![T.O.INDEX_GROUP].includes(B))if(null!==(Z=C.mouseEvent)&&void 0!==Z&&Z.altKey||null!==(_=C.touchEvent)&&void 0!==_&&_.altKey||!u||u.match(/[^0-9]/)||!E.icdt.dataSelect.nodeName.includes(K)){var V;E.icdt.dataSelect.ids.length&&(E.icdt.dataSelect.ids=[]),(0==(null===(V=C.mouseEvent)||void 0===V?void 0:V.button)||C.touchEvent)&&((C,k)=>{let u=(0,yt.g1)(T.O.SCAN_GROUP,"g"),K=(0,ot.bH)(0,0,1,1);(0,yt.vl)(u,K),((C,k,A,Z)=>{(0,j.A)(C,{start:u=>{},move:(u,K)=>{((u,K,B,V)=>{k=(0,ot.bH)(u,K,B,V),(0,yt.vl)(A,k)})(K[0][0],K[0][1],u.x,u.y)},end:(u,K)=>{null==A||A.remove(),E.icdt.dataSelect.ids=E.icdt.data.getNodeInArea(Math.min(K[0][0],u.x),Math.min(K[0][1],u.y),Math.max(K[0][0],u.x),Math.max(K[0][1],u.y)),Z(E.icdt.dataSelect.nodes)}})})(C,K,u,k)})(C,M)}else{var tt,J;let I=parseFloat(u||"0");E.icdt.dataSelect.ids=null!==(tt=C.mouseEvent)&&void 0!==tt&&tt.shiftKey||null!==(J=C.touchEvent)&&void 0!==J&&J.shiftKey?[I].concat(E.icdt.dataSelect.ids).filter((Mt,Kt,te)=>te.indexOf(Mt)==Kt):[I],M(E.icdt.dataSelect.nodes)}},M=C=>{var k,A;let Z=1;var _,P;if(C.length&&(Z=Math.max.apply(null,null!==(_=null===(P=E.icdt.data.slide)||void 0===P||null===(P=P.svg)||void 0===P?void 0:P.nodes.map(K=>{var B;return null!==(B=K.idx)&&void 0!==B?B:0}))&&void 0!==_?_:[0])+1),1==C.length)C[0].idx||(C[0].idx=Z,C[0].time=0);else if(C.length>=0){let K=C.map(V=>{var tt;return null!==(tt=V.idx)&&void 0!==tt?tt:0}).filter(V=>V>0),B=K.length?Math.min.apply(null,K):Z;C.forEach(V=>{var tt;V.idx=B,V.time=null!==(tt=V.time)&&void 0!==tt?tt:0})}let u=(0,yt.g1)(T.O.INDEX_GROUP,"g");(0,yt.mo)(u,null!==(k=null===(A=E.icdt.data.slide)||void 0===A||null===(A=A.svg)||void 0===A?void 0:A.nodes)&&void 0!==k?k:[])},h=C=>{var k,A,Z;null!=C&&null!==(k=C.svg)&&void 0!==k&&k.nodes&&C.svg.nodes.forEach(P=>{P.idx=0,P.time=null});let _=(0,yt.g1)(T.O.INDEX_GROUP,"g");(0,yt.mo)(_,null!==(A=null===(Z=E.icdt.data.slide)||void 0===Z||null===(Z=Z.svg)||void 0===Z?void 0:Z.nodes)&&void 0!==A?A:[])}},4578:(de,Dt,p)=>{p.d(Dt,{h:()=>k,t:()=>A});var T=p(644),E=p(9451),ot=p(968),j=p(4981),yt=p(666),b=p(3171),v=p(5226),R=p(3423),M=p(5811),h=p(3385);const k=new class C{constructor(){this._fnChanges=[],this.onchange={type:"keydown",key:E.s.Escape,fn:()=>{j.icdt.dataSelect.ids.length&&(j.icdt.dataSelect.ids=[])}},this.onchange={type:"keydown",key:E.s.Delete,fn:()=>{j.icdt.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:E.s.Space,fn:()=>{j.icdt.pointer.pointer_type_temp=ot._.HAND}},this.onchange={type:"keyup",key:E.s.Space,fn:()=>{j.icdt.pointer.pointer_type_temp=ot._.POINTER}},this.onchange={type:"keydown",key:E.s.ArrowLeft,fn:()=>{j.icdt.dataSelect.ids.length||j.icdt.data.backSlide()}},this.onchange={type:"keydown",key:E.s.ArrowRight,fn:()=>{j.icdt.dataSelect.ids.length||j.icdt.data.nextSlide()}},this.onchange={type:"keydown",key:E.s.ArrowLeft,fn:()=>{j.icdt.dataSelect.ids.length&&(j.icdt.dataSelect.nodes.forEach(_=>{(0,h.k6)(_,(0,M.q)(_.size.x-(0,R.v)(1)))}),1==j.icdt.dataSelect.ids.length?(0,yt.y)(j.icdt.dataSelect.nodes[0]):(0,b.Q)(j.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.s.ArrowRight,fn:()=>{j.icdt.dataSelect.ids.length&&(j.icdt.dataSelect.nodes.forEach(_=>{(0,h.k6)(_,(0,M.q)(_.size.x+(0,R.v)(1)))}),1==j.icdt.dataSelect.ids.length?(0,yt.y)(j.icdt.dataSelect.nodes[0]):(0,b.Q)(j.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.s.ArrowUp,fn:()=>{j.icdt.dataSelect.ids.length&&(j.icdt.dataSelect.nodes.forEach(_=>{(0,h.co)(_,(0,M.q)(_.size.y-(0,R.v)(1)))}),1==j.icdt.dataSelect.ids.length?(0,yt.y)(j.icdt.dataSelect.nodes[0]):(0,b.Q)(j.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.s.ArrowDown,fn:()=>{j.icdt.dataSelect.ids.length&&(j.icdt.dataSelect.nodes.forEach(_=>{(0,h.co)(_,(0,M.q)(_.size.y+(0,R.v)(1)))}),1==j.icdt.dataSelect.ids.length?(0,yt.y)(j.icdt.dataSelect.nodes[0]):(0,b.Q)(j.icdt.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.s.Digit1,fn:_=>{_.shiftKey&&(j.icdt.reloadView(),j.icdt.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:E.s.KeyA,fn:_=>{if(_.ctrlKey){j.icdt.dataSelect.ids=j.icdt.data.getNodeAll();let P=j.icdt.dataSelect.nodes;1==P.length?(0,yt.y)(P[0]):P.length>1&&(0,b.Q)(P)}}},this.onchange={type:"keydown",key:E.s.KeyC,fn:_=>{if(_.ctrlKey){let P=j.icdt.dataSelect.nodes;P&&(0,T.yR)({params:{type:"nodes",nodes:P}})}}},this.onchange={type:"keydown",key:E.s.KeyV,fn:_=>{_.ctrlKey&&(0,T.aY)({callback:P=>{var u,K;"nodes"==(null==P?void 0:P.type)&&null!=P&&null!==(u=P.nodes)&&void 0!==u&&u.length&&(null==P||null===(K=P.nodes)||void 0===K||K.forEach(B=>{B.id=Math.ceil(1e9*Math.random()),j.icdt.data.node=B}),(0,v.E)(j.icdt.data.slide))}})}},this.onchange={type:"keydown",key:E.s.KeyZ,fn:_=>{_.ctrlKey&&_.shiftKey?j.icdt.history.redo():_.ctrlKey&&j.icdt.history.undo()}},this.onchange={type:"keydown",key:E.s.BracketLeft,fn:_=>{_.ctrlKey&&_.shiftKey?j.icdt.data.sendToBack(j.icdt.dataSelect.ids):_.ctrlKey?j.icdt.data.sendToBackStep(j.icdt.dataSelect.ids,-2):j.icdt.data.sendToBackArea(j.icdt.dataSelect.ids)}},this.onchange={type:"keydown",key:E.s.BracketRight,fn:_=>{_.ctrlKey&&_.shiftKey?j.icdt.data.bringToFront(j.icdt.dataSelect.ids):_.ctrlKey?j.icdt.data.bringToFrontStep(j.icdt.dataSelect.ids,1):j.icdt.data.bringToFrontArea(j.icdt.dataSelect.ids)}}}set onchange(_){let P=this._fnChanges.find(u=>u.eventType==_.type&&u.eventKey==_.key);P?P.fns.push(_.fn):this._fnChanges.push({eventType:_.type,eventKey:_.key,fns:[_.fn]})}change(_,P,u){var K;null===(K=this._fnChanges.find(B=>B.eventType==_&&B.eventKey==P))||void 0===K||K.fns.forEach(B=>B(u))}},A=Z=>{k.change(Z.type,Z.keyCode||Z.which||Z.charCode||0,Z)}},410:(de,Dt,p)=>{p.d(Dt,{a:()=>R});var T=p(9322),E=p(7492),ot=p(511),j=p(3423),yt=p(1687),b=p(4981),v=p(8619);class R{constructor(h,C){var k,A;let Z={stroke:"#FF0000",strokeWidth:(0,j.v)(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,j.v)(8)},{element:_}=(0,T.G)(Math.ceil(1e9*Math.random()),{size:C});window.document.getElementById(yt.O.INTERACTIVE_GROUP).querySelectorAll("path").forEach(J=>null==J?void 0:J.remove()),window.document.getElementById(yt.O.INTERACTIVE_GROUP).querySelectorAll("circle").forEach(J=>null==J?void 0:J.remove()),null===(k=window.document.getElementById(yt.O.INTERACTIVE_GROUP))||void 0===k||k.appendChild(_);var K=J=>{if(!J.length)return;let I=[];if(1==J.length){var vt;let{size:Mt}=null!==(vt=null!=h?h:b.icdt.dataSelect.nodes[0])&&void 0!==vt?vt:{};if(!Mt)return;I=[[Mt.x+Mt.width/2,Mt.y+Mt.height/2],J[0]]}else I=[...J];V(I),B(I[0],"start"),B(I[I.length-1],"end")},B=(J,I)=>{J&&((vt=>{let{element:Mt}=(0,v._)(Math.ceil(1e9*Math.random()),{attribute:{fill:"start"==I?"#FF0000":"#00BA00",strokeWidth:(0,j.v)(1)},size:{x:J[0]-5,y:J[1]-5,width:10,height:10}});null===(vt=window.document.getElementById(yt.O.INTERACTIVE_GROUP))||void 0===vt||vt.prepend(Mt)})(),((vt,Mt)=>{let{size:Kt}=null!==(vt=null!=h?h:b.icdt.dataSelect.nodes[0])&&void 0!==vt?vt:{};if(!Kt)return;let te=[[J[0]-Kt.width/2,J[1]-Kt.height/2],[J[0]+Kt.width/2,J[1]-Kt.height/2],[J[0]+Kt.width/2,J[1]+Kt.height/2],[J[0]-Kt.width/2,J[1]+Kt.height/2],[J[0]-Kt.width/2,J[1]-Kt.height/2]],{element:Ft}=(0,T.G)(Math.ceil(1e9*Math.random()),{attribute:{fill:"#FFFFFF",fillOpacity:.6,stroke:"#5f6ce1",strokeWidth:(0,j.v)(1),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,j.v)(8)},size:{x:0,y:0,width:10,height:10,points:te}});null===(Mt=window.document.getElementById(yt.O.INTERACTIVE_GROUP))||void 0===Mt||Mt.prepend(Ft)})())},V=J=>{let vt=ot.jvg().x(Mt=>Mt[0]).y(Mt=>Mt[1]).curve(ot.$0Z)(J);_.setAttribute("d",vt)};(0,E.__)(_,Z),K(null!==(A=null==C?void 0:C.points)&&void 0!==A?A:[]);let tt="";return{start:J=>{tt=`M ${J.x} ${J.y} L ${J.x} ${J.y}`},move:(J,I)=>{tt+=` ${J.x} ${J.y}`,_.setAttribute("d",tt)},end:(J,I)=>{K(I),I.length&&(window.interactivePoints=I)}}}}},9623:(de,Dt,p)=>{p.d(Dt,{U:()=>Z,i:()=>A});var T=p(1687),E=p(9125),ot=p(4981),j=p(6816),yt=p(7492),b=p(511),v=p(9322),R=p(9054),M=p(7851);class h{constructor(){let P={stroke:ot.icdt.attribute.stroke,strokeWidth:ot.icdt.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:u,element:K,attribute:B,size:V}=(0,v.G)(Math.ceil(1e9*Math.random()),{attribute:P});(0,yt.__)(K,B);let tt="",J="";return{start:vt=>{tt=`M ${vt.x} ${vt.y} L ${vt.x} ${vt.y}`},move:(vt,Mt)=>{((vt,Mt)=>{tt+=` ${vt} ${Mt}`,K.setAttribute("d",tt)})(vt.x,vt.y)},end:(vt,Mt)=>{var Kt;Mt.length>=3?(J=null!==(Kt=b.jvg().x(Ot=>Ot[0]).y(Ot=>Ot[1]).curve(b.$0Z)(Mt))&&void 0!==Kt?Kt:"",K.setAttribute("d",J)):K.setAttribute("d",tt);let te=(0,M.n2)(J||tt),{minX:Ft,minY:Nt,maxX:dt,maxY:W}=(0,M.yo)(te);V.x=Ft,V.y=Nt,V.width=dt-Ft||1,V.height=W-Nt||1,V.ratioMaps=(0,M.IX)(V,te),ot.icdt.data.node=Object.assign({id:u,type:R.$.PATH,name:"Path"},{size:V,attribute:B})}}}}class C{constructor(){let P={stroke:ot.icdt.attribute.stroke,strokeOpacity:.4,strokeWidth:ot.icdt.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:u,element:K,attribute:B,size:V}=(0,v.G)(Math.ceil(1e9*Math.random()),{attribute:P});(0,yt.__)(K,B);let tt="";return{start:vt=>{tt=`M ${vt.x} ${vt.y} L ${vt.x} ${vt.y}`},move:(vt,Mt)=>{((vt,Mt)=>{tt+=` ${vt} ${Mt}`,K.setAttribute("d",tt)})(vt.x,vt.y)},end:(vt,Mt)=>{let Kt=(0,M.n2)(tt),{minX:te,minY:Ft,maxX:Nt,maxY:dt}=(0,M.yo)(Kt);V.x=te,V.y=Ft,V.width=Nt-te||1,V.height=dt-Ft||1,V.ratioMaps=(0,M.IX)(V,Kt),ot.icdt.data.node=Object.assign({id:u,type:R.$.PATH,name:"Path"},{size:V,attribute:B})}}}}var k=p(410);const A=_=>{switch(ot.icdt.pointer.pen_type){case E.D.DRAW:(0,j.A)(_,new h);break;case E.D.HIGHTLIGH:(0,j.A)(_,new C);break;case E.D.INTERACTIVE:Z(_)}},Z=_=>{var P,u;let K=(0,yt.g1)(T.O.INTERACTIVE_GROUP,"g"),B=null!==(P=null===(u=ot.icdt.data.slide)||void 0===u||null===(u=u.svg)||void 0===u?void 0:u.viewBox)&&void 0!==P?P:(()=>{let{width:V,height:tt}=ot.icdt.screen.get;return{x:0,y:0,width:V,height:tt}})();(0,yt.XH)(K,B),_&&(0,j.A)(_,new k.a)}},666:(de,Dt,p)=>{p.d(Dt,{y:()=>v});var T=p(1687),E=p(4981),ot=p(4318),j=p(6816),yt=p(7492),b=p(5811);const v=h=>{let C=(0,yt.g1)(T.O.RESIZE_GROUP,"g");(0,yt.hJ)(C,h).forEach(k=>{R(k.element,k.posType,h,C)})},R=(h,C,k,A)=>{let Z=!1;null==h||h.addEventListener("touchstart",_=>{Z=!0,M({touchEvent:_},C,k,A)}),null==h||h.addEventListener("mousedown",_=>{if(0==_.button){if(Z)return void(Z=!1);M({mouseEvent:_},C,k,A)}})},M=(h,C,k,A)=>{let I,{id:Z,type:_,size:P,attribute:u}=k,{x:K,y:B,width:V,height:tt}=P,J=(V||1)/(tt||1),Mt=null,Ft=!1;(0,j.A)(h,{start:dt=>{Mt=JSON.parse(JSON.stringify({id:Z,size:P,attribute:u}))},move:(dt,W)=>{((dt,W,_t,Ot)=>{let St=_t-dt,it=Ot-W;switch(C){case"rect-center":var $t,X;I=null!==($t=h.mouseEvent)&&void 0!==$t&&$t.shiftKey||null!==(X=h.touchEvent)&&void 0!==X&&X.shiftKey?Math.abs(_t-dt)>=Math.abs(Ot-W)?{x:K+_t-dt,y:B,width:V,height:tt}:{x:K,y:B+Ot-W,width:V,height:tt}:{x:K+_t-dt,y:B+Ot-W,width:V,height:tt};break;case"rect-top-left":var F,d,at,mt,Pt,Gt,Xt,Ht;I=(null!==(F=h.mouseEvent)&&void 0!==F&&F.shiftKey||null!==(d=h.touchEvent)&&void 0!==d&&d.shiftKey)&&(null!==(at=h.mouseEvent)&&void 0!==at&&at.altKey||null!==(mt=h.touchEvent)&&void 0!==mt&&mt.altKey)?J>=1?{x:K+(_t-dt),y:B+(_t-dt)/J,width:V-2*(_t-dt),height:tt-2*(_t-dt)/J}:{x:K+(Ot-W)*J,y:B+(Ot-W),width:V-2*(Ot-W)*J,height:tt-2*(Ot-W)}:null!==(Pt=h.mouseEvent)&&void 0!==Pt&&Pt.shiftKey||null!==(Gt=h.touchEvent)&&void 0!==Gt&&Gt.shiftKey?J>=1?{x:K+(_t-dt),y:B+(_t-dt)/J,width:V-(_t-dt),height:tt-(_t-dt)/J}:{x:K+(Ot-W)*J,y:B+(Ot-W),width:V-(Ot-W)*J,height:tt-(Ot-W)}:null!==(Xt=h.mouseEvent)&&void 0!==Xt&&Xt.altKey||null!==(Ht=h.touchEvent)&&void 0!==Ht&&Ht.altKey?{x:K+(_t-dt),y:B+(Ot-W),width:V-2*(_t-dt),height:tt-2*(Ot-W)}:{x:K+(_t-dt),y:B+(Ot-W),width:V-(_t-dt),height:tt-(Ot-W)};break;case"rect-top-right":var At,pt,ee,Y,c,Q,gt,ut;I=(null!==(At=h.mouseEvent)&&void 0!==At&&At.shiftKey||null!==(pt=h.touchEvent)&&void 0!==pt&&pt.shiftKey)&&(null!==(ee=h.mouseEvent)&&void 0!==ee&&ee.altKey||null!==(Y=h.touchEvent)&&void 0!==Y&&Y.altKey)?J>=1?{x:K-(_t-dt),y:B-(_t-dt)/J,width:V+2*(_t-dt),height:tt+2*(_t-dt)/J}:{x:K+(Ot-W)*J,y:B+(Ot-W),width:V-2*(Ot-W)*J,height:tt-2*(Ot-W)}:null!==(c=h.mouseEvent)&&void 0!==c&&c.shiftKey||null!==(Q=h.touchEvent)&&void 0!==Q&&Q.shiftKey?J>=1?{x:K,y:B-(_t-dt)/J,width:V+(_t-dt),height:tt+(_t-dt)/J}:{x:K,y:B+(Ot-W),width:V-(Ot-W)*J,height:tt-(Ot-W)}:null!==(gt=h.mouseEvent)&&void 0!==gt&&gt.altKey||null!==(ut=h.touchEvent)&&void 0!==ut&&ut.altKey?{x:K-(_t-dt),y:B+(Ot-W),width:V+2*(_t-dt),height:tt-2*(Ot-W)}:{x:K,y:B+(Ot-W),width:V+(_t-dt),height:tt-(Ot-W)};break;case"rect-bottom-left":var q,H,rt,L,et,Et,Rt,bt;I=(null!==(q=h.mouseEvent)&&void 0!==q&&q.shiftKey||null!==(H=h.touchEvent)&&void 0!==H&&H.shiftKey)&&(null!==(rt=h.mouseEvent)&&void 0!==rt&&rt.altKey||null!==(L=h.touchEvent)&&void 0!==L&&L.altKey)?J>=1?{x:K+(_t-dt),y:B+(_t-dt)/J,width:V-2*(_t-dt),height:tt-2*(_t-dt)/J}:{x:K-(Ot-W)*J,y:B-(Ot-W),width:V+2*(Ot-W)*J,height:tt+2*(Ot-W)}:null!==(et=h.mouseEvent)&&void 0!==et&&et.shiftKey||null!==(Et=h.touchEvent)&&void 0!==Et&&Et.shiftKey?J>=1?{x:K+(_t-dt),y:B,width:V-(_t-dt),height:tt-(_t-dt)/J}:{x:K-(Ot-W)*J,y:B,width:V+(Ot-W)*J,height:tt+(Ot-W)}:null!==(Rt=h.mouseEvent)&&void 0!==Rt&&Rt.altKey||null!==(bt=h.touchEvent)&&void 0!==bt&&bt.altKey?{x:K+(_t-dt),y:B-(Ot-W),width:V-2*(_t-dt),height:tt+2*(Ot-W)}:{x:K+(_t-dt),y:B,width:V-(_t-dt),height:tt+(Ot-W)};break;case"rect-bottom-right":var It,Ct,kt,ht,zt,Jt,fe,ne;I=(null!==(It=h.mouseEvent)&&void 0!==It&&It.shiftKey||null!==(Ct=h.touchEvent)&&void 0!==Ct&&Ct.shiftKey)&&(null!==(kt=h.mouseEvent)&&void 0!==kt&&kt.altKey||null!==(ht=h.touchEvent)&&void 0!==ht&&ht.altKey)?J>=1?{x:K-(_t-dt),y:B-(_t-dt)/J,width:V+2*(_t-dt),height:tt+2*(_t-dt)/J}:{x:K-(Ot-W)*J,y:B-(Ot-W),width:V+2*(Ot-W)*J,height:tt+2*(Ot-W)}:null!==(zt=h.mouseEvent)&&void 0!==zt&&zt.shiftKey||null!==(Jt=h.touchEvent)&&void 0!==Jt&&Jt.shiftKey?J>=1?{x:K,y:B,width:V+(_t-dt),height:tt+(_t-dt)/J}:{x:K,y:B,width:V+(Ot-W)*J,height:tt+(Ot-W)}:null!==(fe=h.mouseEvent)&&void 0!==fe&&fe.altKey||null!==(ne=h.touchEvent)&&void 0!==ne&&ne.altKey?{x:K-(_t-dt),y:B-(Ot-W),width:V+2*(_t-dt),height:tt+2*(Ot-W)}:{x:K,y:B,width:V+(_t-dt),height:tt+(Ot-W)};break;case"rect-top":var re,we,Qe,He;I=null!==(re=h.mouseEvent)&&void 0!==re&&re.shiftKey||null!==(we=h.touchEvent)&&void 0!==we&&we.shiftKey?{x:K+it/2*J,y:B+it,width:V-it*J,height:tt-it}:null!==(Qe=h.mouseEvent)&&void 0!==Qe&&Qe.altKey||null!==(He=h.touchEvent)&&void 0!==He&&He.altKey?{x:K,y:B+it,width:V,height:tt-2*it}:{x:K,y:B+it,width:V,height:tt-it};break;case"rect-bottom":var Pe,Je,Ze,ei;I=null!==(Pe=h.mouseEvent)&&void 0!==Pe&&Pe.shiftKey||null!==(Je=h.touchEvent)&&void 0!==Je&&Je.shiftKey?{x:K-it/2*J,y:B,width:V+it*J,height:tt+it}:null!==(Ze=h.mouseEvent)&&void 0!==Ze&&Ze.altKey||null!==(ei=h.touchEvent)&&void 0!==ei&&ei.altKey?{x:K,y:B-it,width:V,height:tt+2*it}:{x:K,y:B,width:V,height:tt+it};break;case"rect-left":var Ee,Xe,De,Ge;I=null!==(Ee=h.mouseEvent)&&void 0!==Ee&&Ee.shiftKey||null!==(Xe=h.touchEvent)&&void 0!==Xe&&Xe.shiftKey?{x:K+St,y:B+St/2/J,width:V-St,height:tt-St/J}:null!==(De=h.mouseEvent)&&void 0!==De&&De.altKey||null!==(Ge=h.touchEvent)&&void 0!==Ge&&Ge.altKey?{x:K+St,y:B,width:V-2*St,height:tt}:{x:K+St,y:B,width:V-St,height:tt};break;case"rect-right":var Ye,qe,Ue,Ve;I=null!==(Ye=h.mouseEvent)&&void 0!==Ye&&Ye.shiftKey||null!==(qe=h.touchEvent)&&void 0!==qe&&qe.shiftKey?{x:K,y:B-St/2/J,width:V+St,height:tt+St/J}:null!==(Ue=h.mouseEvent)&&void 0!==Ue&&Ue.altKey||null!==(Ve=h.touchEvent)&&void 0!==Ve&&Ve.altKey?{x:K-St,y:B,width:V+2*St,height:tt}:{x:K,y:B,width:V+St,height:tt};break;default:I={x:K+_t-dt,y:B+Ot-W,width:V,height:tt}}I.width<0&&(I.width=0),I.height<0&&(I.height=0),I.x=(0,b.q)(I.x),I.y=(0,b.q)(I.y),I.width=(0,b.q)(I.width),I.height=(0,b.q)(I.height),Object.assign(P,I),Object.assign(u,(0,ot.sg)(_,P,u)),(0,yt.__)(window.document.getElementById(Z),u),(0,yt.hJ)(A,k)})(W[0][0],W[0][1],dt.x,dt.y),Ft=!0},end:(dt,W)=>{Ft&&Mt&&E.icdt.history.push([{type:"size",from:Mt,to:JSON.parse(JSON.stringify({id:Z,size:P,attribute:u}))}])}})}},3171:(de,Dt,p)=>{p.d(Dt,{Q:()=>v});var T=p(1687),E=p(4981),ot=p(4318),j=p(6816),yt=p(7492),b=p(5811);const v=h=>{let C=999999,k=999999,A=-999999,Z=-999999;null==h||h.forEach(u=>{C=Math.min(C,u.size.x),k=Math.min(k,u.size.y),A=Math.max(A,u.size.x+u.size.width),Z=Math.max(Z,u.size.y+u.size.height)});let _=(0,yt.g1)(T.O.SELECT_GROUP,"g"),P=(0,ot.bH)(C,k,A,Z);(0,yt.yD)(_,h,P).forEach(u=>{R(u.element,u.posType,P,h,_)})},R=(h,C,k,A,Z)=>{let _=!1;null==h||h.addEventListener("touchstart",P=>{_=!0,M({touchEvent:P},C,k,A,Z)}),null==h||h.addEventListener("mousedown",P=>{if(0==P.button){if(_)return void(_=!1);M({mouseEvent:P},C,k,A,Z)}})},M=(h,C,k,A,Z)=>{let{x:_,y:P,width:u,height:K}=k,B=A.map(Mt=>Object.assign({},Mt.size)),tt=[];(0,j.A)(h,{start:Mt=>{A.forEach((Mt,Kt)=>{let{id:te,size:Nt,attribute:dt}=Mt;tt.push(JSON.parse(JSON.stringify({id:te,size:Nt,attribute:dt})))})},move:(Mt,Kt)=>{((Mt,Kt,te,Ft)=>{(()=>{let Nt;Nt="rect-center"===C?{x:_+te-Mt,y:P+Ft-Kt,width:u,height:K}:{x:_,y:P,width:u,height:K},Nt.width<0&&(Nt.width=0),Nt.height<0&&(Nt.height=0),Object.assign(k,Nt),(0,yt.yD)(Z,A,k)})(),A.forEach((Nt,dt)=>{let d,{x:W,y:_t,width:Ot,height:St}=B[dt],{id:it,type:$t,size:X,attribute:F}=Nt;d="rect-center"===C?{x:W+te-Mt,y:_t+Ft-Kt,width:Ot,height:St}:{x:W,y:_t,width:Ot,height:St},d.width<0&&(d.width=0),d.height<0&&(d.height=0),d.x=(0,b.q)(d.x),d.y=(0,b.q)(d.y),d.width=(0,b.q)(d.width),d.height=(0,b.q)(d.height),Object.assign(X,d),Object.assign(F,(0,ot.sg)($t,X,F)),(0,yt.__)(window.document.getElementById(it),F)})})(Kt[0][0],Kt[0][1],Mt.x,Mt.y)},end:(Mt,Kt)=>{tt.length&&E.icdt.history.push(A.map((Mt,Kt)=>{let{id:te,size:Nt,attribute:dt}=Mt;return{type:"size",from:tt[Kt],to:JSON.parse(JSON.stringify({id:te,size:Nt,attribute:dt}))}}))}})}},5226:(de,Dt,p)=>{p.d(Dt,{E:()=>_,T:()=>P});var T=p(1687),E=p(8619),ot=p(8785),j=p(2282),yt=p(8054),b=p(4921),v=p(6358),R=p(9054),M=p(9322),h=p(1105),C=p(2875),k=p(7210),A=p(4981),Z=p(7492);const _=(u,K,B)=>{var V;if(K&&!(null!=B?B:window).document.getElementById(K))return;if("localhost"==location.hostname&&console.log("\xe1\xe1\xe1\xe1\xe1\xe1 s\u1ee3 qu\xe1 \u0111iiiiiiiiiiiiiiiiiiiiiiiiiii!",K),K){let J=(null!=B?B:window).document.getElementById(K);jQuery(J).find("#"+T.O.BACKGROUND_GROUP).empty();let I=(0,Z.g1)(T.O.BACKGROUND_GROUP,"g",void 0,J);(0,Z.x0)(I,u)}else{jQuery(A.icdt.target).find("#"+T.O.BACKGROUND_GROUP).empty();let J=(0,Z.g1)(T.O.BACKGROUND_GROUP,"g",void 0,A.icdt.target);(0,Z.x0)(J,u)}let tt=(J,I)=>{I=K&&I?`${K}-${I}`:null!=K?K:I,null==J||J.forEach(vt=>{let Mt=K?`${K}-${vt.id}`:vt.id;var Kt;if(vt.isdeleted)null===(Kt=(null!=B?B:window).document.getElementById(Mt))||void 0===Kt||Kt.remove();else switch(vt.type){case R.$.GROUP:(0,v.m)(Mt,{},I?(null!=B?B:window).document.getElementById(I):null),tt(vt.nodes,vt.id);break;case R.$.CIRCLE:(0,E._)(Mt,{size:vt.size,attribute:vt.attribute},I?(null!=B?B:window).document.getElementById(I):null);break;case R.$.ELLIPSE:(0,ot.r)(Mt,{size:vt.size,attribute:vt.attribute},I?(null!=B?B:window).document.getElementById(I):null);break;case R.$.LINE:(0,b.W)(Mt,{size:vt.size,attribute:vt.attribute},I?(null!=B?B:window).document.getElementById(I):null);break;case R.$.RECT:(0,yt.f)(Mt,{size:vt.size,attribute:vt.attribute},I?(null!=B?B:window).document.getElementById(I):null);break;case R.$.POLYGON:(0,j.l)(Mt,{size:vt.size,attribute:vt.attribute},I?(null!=B?B:window).document.getElementById(I):null);break;case R.$.FOREIGNOBJECT:(0,C.e)(Mt,{size:vt.size,attribute:vt.attribute,style:vt.style,source:vt.source},I?(null!=B?B:window).document.getElementById(I):null);break;case R.$.IMAGE:(0,k.G)(Mt,{size:vt.size,attribute:vt.attribute,source:vt.source},I?(null!=B?B:window).document.getElementById(I):null);break;case R.$.TEXT:(0,h.$)(Mt,{size:vt.size,attribute:vt.attribute,source:vt.source},I?(null!=B?B:window).document.getElementById(I):null);break;case R.$.PATH:(0,M.G)(Mt,{size:vt.size,attribute:vt.attribute},I?(null!=B?B:window).document.getElementById(I):null)}})};tt(null==u||null===(V=u.svg)||void 0===V?void 0:V.nodes)},P=(u,K)=>{var B;if(K&&!window.document.getElementById(K))return;let V=(tt,J)=>{J=J?`${K}-${J}`:K,null==tt||tt.forEach(I=>{jQuery("#"+(K?`${K}-${I.id}`:I.id)).appendTo(J?window.document.getElementById(J):A.icdt.target),I.type==R.$.GROUP&&V(I.nodes,I.id)})};V(null==u||null===(B=u.svg)||void 0===B?void 0:B.nodes)}},8619:(de,Dt,p)=>{p.d(Dt,{_:()=>yt});var T=p(9054),E=p(4981),ot=p(4318),j=p(7492);const yt=(b,v,R)=>{let M=(null==v?void 0:v.size)||{x:0,y:0,width:10,height:10},h=(null==v?void 0:v.attribute)||{fill:E.icdt.attribute.fill,stroke:E.icdt.attribute.stroke,strokeWidth:E.icdt.attribute.strokeWidth};return Object.assign(h,(0,ot.sg)(T.$.CIRCLE,M,h)),{nodeId:b,element:(0,j.it)(b,T.$.CIRCLE,"circle",{size:M,attribute:h},R),size:M,attribute:h}}},8785:(de,Dt,p)=>{p.d(Dt,{r:()=>yt});var T=p(9054),E=p(4981),ot=p(4318),j=p(7492);const yt=(b,v,R)=>{let M=(null==v?void 0:v.size)||{x:0,y:0,width:10,height:10},h=(null==v?void 0:v.attribute)||{fill:E.icdt.attribute.fill,stroke:E.icdt.attribute.stroke,strokeWidth:E.icdt.attribute.strokeWidth};return Object.assign(h,(0,ot.sg)(T.$.ELLIPSE,M,h)),{nodeId:b,element:(0,j.it)(b,T.$.ELLIPSE,"ellipse",{size:M,attribute:h},R),size:M,attribute:h}}},2875:(de,Dt,p)=>{p.d(Dt,{e:()=>j});var T=p(9054),E=p(4318),ot=p(7492);const j=(yt,b,v)=>{let R=(null==b?void 0:b.size)||{x:0,y:0,width:320,height:80},M=(null==b?void 0:b.attribute)||{};Object.assign(M,(0,E.sg)(T.$.FOREIGNOBJECT,R,M));let h=(null==b?void 0:b.source)||{type:"html",html:{htmlContent:'<span style="font-family: Roboto; font-size: 24px;">H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!</span>'}},C=(null==b?void 0:b.style)||{};return{nodeId:yt,element:(0,ot.it)(yt,T.$.FOREIGNOBJECT,"foreignObject",{size:R,attribute:M,style:C,source:h},v),size:R,attribute:M,style:C,source:h}}},6358:(de,Dt,p)=>{p.d(Dt,{m:()=>j});var T=p(9054),E=p(4318),ot=p(7492);const j=(b,v,R)=>{let M=(null==v?void 0:v.size)||{x:0,y:0,width:10,height:10},h=(null==v?void 0:v.attribute)||{};return Object.assign(h,(0,E.sg)(T.$.GROUP,M,h)),{nodeId:b,element:(0,ot.it)(b,T.$.GROUP,"g",{size:M,attribute:h},R),size:M,attribute:h}}},7210:(de,Dt,p)=>{p.d(Dt,{G:()=>j});var T=p(9054),E=p(4318),ot=p(7492);const j=(yt,b,v)=>{let R=(null==b?void 0:b.size)||{x:0,y:0,width:10,height:10},M=(null==b?void 0:b.attribute)||{preserveAspectRatio:"none"};Object.assign(M,(0,E.sg)(T.$.IMAGE,R,M));let h=(null==b?void 0:b.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:yt,element:(0,ot.it)(yt,T.$.IMAGE,"image",{size:R,attribute:M,source:h},v),size:R,attribute:M,source:h}}},4921:(de,Dt,p)=>{p.d(Dt,{W:()=>yt});var T=p(9054),E=p(4981),ot=p(4318),j=p(7492);const yt=(b,v,R)=>{let M=(null==v?void 0:v.size)||{x:0,y:0,width:10,height:10},h=(null==v?void 0:v.attribute)||{stroke:E.icdt.attribute.stroke,strokeWidth:E.icdt.attribute.strokeWidth,strokeLinecap:E.icdt.attribute.strokeLinecap};return Object.assign(h,(0,ot.sg)(T.$.LINE,M,h)),{nodeId:b,element:(0,j.it)(b,T.$.LINE,"line",{size:M,attribute:h},R),size:M,attribute:h}}},9322:(de,Dt,p)=>{p.d(Dt,{G:()=>yt});var T=p(9054),E=p(4981),ot=p(4318),j=p(7492);const yt=(b,v,R)=>{let M=(null==v?void 0:v.size)||{x:0,y:0,width:10,height:10},h=(null==v?void 0:v.attribute)||{stroke:E.icdt.attribute.stroke,strokeWidth:E.icdt.attribute.strokeWidth};return Object.assign(h,(0,ot.sg)(T.$.PATH,M,h)),{nodeId:b,element:(0,j.it)(b,T.$.PATH,"path",{size:M,attribute:h},R),size:M,attribute:h}}},2282:(de,Dt,p)=>{p.d(Dt,{l:()=>yt});var T=p(9054),E=p(4981),ot=p(4318),j=p(7492);const yt=(b,v,R)=>{let M=(null==v?void 0:v.size)||{x:0,y:0,width:10,height:10},h=(null==v?void 0:v.attribute)||{fill:E.icdt.attribute.fill,stroke:E.icdt.attribute.stroke,strokeWidth:E.icdt.attribute.strokeWidth};return Object.assign(h,(0,ot.sg)(T.$.POLYGON,M,h)),{nodeId:b,element:(0,j.it)(b,T.$.POLYGON,"polygon",{size:M,attribute:h},R),size:M,attribute:h}}},8054:(de,Dt,p)=>{p.d(Dt,{f:()=>yt});var T=p(9054),E=p(4981),ot=p(4318),j=p(7492);const yt=(b,v,R)=>{let M=(null==v?void 0:v.size)||{x:0,y:0,width:10,height:10},h=(null==v?void 0:v.attribute)||{fill:E.icdt.attribute.fill,stroke:E.icdt.attribute.stroke,strokeWidth:E.icdt.attribute.strokeWidth};return Object.assign(h,(0,ot.sg)(T.$.RECT,M,h)),{nodeId:b,element:(0,j.it)(b,T.$.RECT,"rect",{size:M,attribute:h},R),size:M,attribute:h}}},1105:(de,Dt,p)=>{p.d(Dt,{$:()=>yt});var T=p(9054),E=p(4981),ot=p(4318),j=p(7492);const yt=(b,v,R)=>{let M=(null==v?void 0:v.size)||{x:0,y:0,width:320,height:80},h=(null==v?void 0:v.attribute)||{fill:E.icdt.attribute.stroke,fontFamily:E.icdt.attribute.fontFamily,fontSize:E.icdt.attribute.fontSize,textLength:E.icdt.attribute.textLength};Object.assign(h,(0,ot.sg)(T.$.TEXT,M,h));let C=(null==v?void 0:v.source)||{type:"text",text:{textContent:"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!"}};return{nodeId:b,element:(0,j.it)(b,T.$.TEXT,"text",{size:M,attribute:h,source:C},R),size:M,attribute:h,source:C}}},4318:(de,Dt,p)=>{p.d(Dt,{bH:()=>ot,sg:()=>j});var T=p(9054),E=p(7851);const ot=(b,v,R,M,h)=>{let C={x:Math.min(b,R),y:Math.min(v,M),width:Math.abs(R-b)||1,height:Math.abs(M-v)||1};return null!=h&&h.ratio&&(C.width<=C.height?C.height=C.width*(null==h?void 0:h.ratio):C.width=C.height/(null==h?void 0:h.ratio)),Object.assign(C,{ratios:(null==h?void 0:h.ratios)||[[(b-C.x)/(C.width||1),(v-C.y)/(C.height||1)],[(R-C.x)/(C.width||1),(M-C.y)/(C.height||1)]]}),null!=h&&h.points&&(C.points=null==h?void 0:h.points),C},j=(b,v,R)=>{var M,h=(()=>{switch(b){case T.$.CIRCLE:return{cx:v.x+v.width/2,cy:v.y+v.height/2,r:Math.min(v.width/2,v.height/2)};case T.$.ELLIPSE:return{cx:v.x+v.width/2,cy:v.y+v.height/2,rx:v.width/2,ry:v.height/2};case T.$.LINE:{var C;let P={};return null===(C=v.ratios)||void 0===C||C.forEach((u,K)=>{P[`x${K+1}`]=v.x+v.width*u[0],P[`y${K+1}`]=v.y+v.height*u[1]}),P}case T.$.RECT:case T.$.FOREIGNOBJECT:case T.$.IMAGE:return{x:v.x,y:v.y,width:v.width,height:v.height};case T.$.TEXT:var k;return{x:v.x,y:v.y+(null!==(k=R.fontSize)&&void 0!==k?k:16)};case T.$.POLYGON:var A;if(null!==(A=v.ratios)&&void 0!==A&&A.length)return{points:(0,E.Q8)(v,v.ratios)};break;case T.$.PATH:var Z,_;if(null!==(Z=v.ratioMaps)&&void 0!==Z&&Z.length)return{d:(0,E.BG)(v,v.ratioMaps)};if(null!==(_=v.points)&&void 0!==_&&_.length)return{d:`M ${(P=v.points)[0][0]} ${P[0][1]} L ${(P.map(u=>[u[0],u[1]])||[]).map(u=>u.join(" ")).join(" ")}`}}var P;return{}})();return v.rotate?(h.transform=`rotate(${v.rotate})`,h.transformOrigin=`${v.x+v.width/2} ${v.y+v.height/2}`):null!==(M=R.transform)&&void 0!==M&&M.match(/^rotate/)&&(R.transform=null,R.transformOrigin=null),h}},3423:(de,Dt,p)=>{p.d(Dt,{v:()=>ot});var T=p(4981),E=p(5811);const ot=j=>(0,E.q)(j/T.icdt.screen.scale)},3385:(de,Dt,p)=>{p.d(Dt,{Vs:()=>R,co:()=>b,k6:()=>yt,lO:()=>v,mr:()=>M});var T=p(4981),E=p(7492),ot=p(4318),j=p(5811);const yt=(h,C)=>{let{id:k,type:A,size:Z,attribute:_}=h,P=JSON.parse(JSON.stringify({id:k,size:Z,attribute:_}));Z.x=(0,j.q)(C),Object.assign(_,(0,ot.sg)(A,Z,_)),(0,E.__)(window.document.getElementById(k),_),T.icdt.history.push([{type:"size",from:P,to:JSON.parse(JSON.stringify({id:k,size:Z,attribute:_}))}])},b=(h,C)=>{let{id:k,type:A,size:Z,attribute:_}=h,P=JSON.parse(JSON.stringify({id:k,size:Z,attribute:_}));Z.y=(0,j.q)(C),Object.assign(_,(0,ot.sg)(A,Z,_)),(0,E.__)(window.document.getElementById(k),_),T.icdt.history.push([{type:"size",from:P,to:JSON.parse(JSON.stringify({id:k,size:Z,attribute:_}))}])},v=(h,C,k)=>{let{id:A,type:Z,size:_,attribute:P}=h,u=JSON.parse(JSON.stringify({id:A,size:_,attribute:P}));k&&(_.height=(0,j.q)(C*_.height/_.width)),_.width=(0,j.q)(C),Object.assign(P,(0,ot.sg)(Z,_,P)),(0,E.__)(window.document.getElementById(A),P),T.icdt.history.push([{type:"size",from:u,to:JSON.parse(JSON.stringify({id:A,size:_,attribute:P}))}])},R=(h,C,k)=>{let{id:A,type:Z,size:_,attribute:P}=h,u=JSON.parse(JSON.stringify({id:A,size:_,attribute:P}));k&&(_.width=(0,j.q)(C*_.width/_.height)),_.height=(0,j.q)(C),Object.assign(P,(0,ot.sg)(Z,_,P)),(0,E.__)(window.document.getElementById(A),P),T.icdt.history.push([{type:"size",from:u,to:JSON.parse(JSON.stringify({id:A,size:_,attribute:P}))}])},M=(h,C)=>{let{id:k,type:A,size:Z,attribute:_}=h,P=JSON.parse(JSON.stringify({id:k,size:Z,attribute:_}));Z.rotate="number"==typeof C?(0,j.q)(C,100):void 0,Object.assign(_,(0,ot.sg)(A,Z,_)),(0,E.__)(window.document.getElementById(k),_),T.icdt.history.push([{type:"size",from:P,to:JSON.parse(JSON.stringify({id:k,size:Z,attribute:_}))}])}},6816:(de,Dt,p)=>{p.d(Dt,{A:()=>b});var T=p(968),E=p(4981);class ot{constructor(R){this._points=[],this._options=R}start(R){this._points.length=0,this._points.push([R.x,R.y]),this._options.start(R)}move(R){this._points.push([R.x,R.y]),this._options.move(R,this._points)}end(){this._options.end(this.offsetLast,this._points)}get offsetFirst(){return this._points.length>=1?{x:(R=this._points[0])[0],y:R[1]}:{x:0,y:0};var R}get offsetLast(){return this._points.length>=1?{x:(R=this._points[this._points.length-1])[0],y:R[1]}:{x:0,y:0};var R}}var j=p(7797);const b=(v,R,M,h,C)=>{var k,A,Z;let _=null,P=0,u=0;v.mouseEvent?(_=v.mouseEvent.target,P=v.mouseEvent.offsetX,u=v.mouseEvent.offsetY):v.touchEvent&&(_=v.touchEvent.target,v.touchEvent.touches.length&&(P=v.touchEvent.touches[0].clientX,u=v.touchEvent.touches[0].clientY));let K=null!=M?M:E.icdt.screen.scale,B=null!=h?h:E.icdt.screen.dislocation,V=null!=C?C:E.icdt.screen.offset,tt=()=>{};var J=new ot({start:null!==(k=null==R?void 0:R.start)&&void 0!==k?k:tt,move:null!==(A=null==R?void 0:R.move)&&void 0!==A?A:tt,end:null!==(Z=null==R?void 0:R.end)&&void 0!==Z?Z:tt});v.mouseEvent?J.start((0,j.p)({x:P,y:u},K,B,{x:0,y:0})):v.touchEvent&&J.start((0,j.p)({x:P,y:u},K,B,V));let I=dt=>{J.move((0,j.p)({x:dt.clientX,y:dt.clientY},K,B,V))},vt=dt=>{J.end(),[T._.SHAPE,T._.FOREIGNOBJECT,T._.IMAGE,T._.TEXT].includes(E.icdt.pointer.pointer_type)&&(dt.shiftKey||(E.icdt.pointer.pointer_type=T._.POINTER))},Mt=dt=>{dt.touches.length&&I({clientX:dt.touches[0].clientX,clientY:dt.touches[0].clientY})},Kt=dt=>{vt({shiftKey:dt.shiftKey,ctrlKey:dt.ctrlKey,altKey:dt.altKey}),window.removeEventListener("touchmove",Mt,!1),window.removeEventListener("touchend",Kt,!1)},te=dt=>{0==dt.button&&I({clientX:dt.clientX,clientY:dt.clientY})},Ft=dt=>{0==dt.button&&(vt({shiftKey:dt.shiftKey,ctrlKey:dt.ctrlKey,altKey:dt.altKey}),window.removeEventListener("mousemove",te,!1),window.removeEventListener("mouseup",Ft,!1))};if(v.mouseEvent)window.addEventListener("mousemove",te,!1),window.addEventListener("mouseup",Ft,!1);else if(v.touchEvent){var Nt;window.addEventListener("touchmove",Mt,!1),window.addEventListener("touchend",Kt,!1),null===(Nt=_)||void 0===Nt||Nt.addEventListener("touchmove",function(dt){dt.preventDefault()})}}},7797:(de,Dt,p)=>{p.d(Dt,{p:()=>E});var T=p(5811);const E=(ot,j,yt,b)=>(ot.x-=b.x,ot.y-=b.y,ot.x/=j,ot.y/=j,ot.x-=yt.x,ot.y-=yt.y,ot.x=(0,T.q)(ot.x),ot.y=(0,T.q)(ot.y),ot)},70:(de,Dt,p)=>{p.d(Dt,{$:()=>pt,U:()=>ee});var T=p(1687),E=p(4981),ot=p(9054),j=p(5973),yt=p(2336),b=p(861),v=p(157),R=p(4787),h=p(1105),C=p(6358);var P=p(7267),u=p(7210),K=p(5811);const B=(Y,c,Q)=>{var gt,ut,q,H;let rt=1,L=new Image;L.onload=()=>{var et,Et,Rt,bt;rt=(0,K.q)(L.naturalWidth/L.naturalHeight,100);let It=0,Ct=0,kt=0,ht=0;var zt,Jt,fe,ne;rt>=1?(kt=Math.min(L.naturalWidth,null!==(zt=null===(Jt=pt.slide.svg)||void 0===Jt||null===(Jt=Jt.viewBox)||void 0===Jt?void 0:Jt.width)&&void 0!==zt?zt:0),ht=kt/rt):(ht=Math.min(L.naturalHeight,null!==(fe=null===(ne=pt.slide.svg)||void 0===ne||null===(ne=ne.viewBox)||void 0===ne?void 0:ne.height)&&void 0!==fe?fe:0),kt=ht/rt),It=((null!==(et=null===(Et=pt.slide.svg)||void 0===Et||null===(Et=Et.viewBox)||void 0===Et?void 0:Et.width)&&void 0!==et?et:0)-kt)/2,Ct=((null!==(Rt=null===(bt=pt.slide.svg)||void 0===bt||null===(bt=bt.viewBox)||void 0===bt?void 0:bt.height)&&void 0!==Rt?Rt:0)-ht)/2,c.size={x:It,y:Ct,width:kt,height:ht},V(c,Q)},L.onerror=et=>{console.error(`ImgSrc load failed -> ${JSON.stringify(c.source)}`,et)},L.src=(null!==(gt=c.source)&&void 0!==gt&&gt.path?(null===(ut=E.icdt.config)||void 0===ut?void 0:ut.readfileuploadurl)+(null===(q=c.source)||void 0===q?void 0:q.path):null===(H=c.source)||void 0===H?void 0:H.url)||""},V=(Y,c)=>{if(Y.slideStatus!=pt.slideStatus)return void c();let{element:Q}=(0,u.G)(Math.ceil(1e9*Math.random()),{size:Y.size,source:{type:"image",image:null==Y?void 0:Y.source}});setTimeout(()=>{null==Q||Q.remove(),c()},3e3)};var tt=p(7492);const J=(Y,c,Q)=>{var gt,ut,q,H;let rt=new Image;rt.onload=()=>{I(Y,{width:rt.naturalWidth,height:rt.naturalHeight},c,Q)},rt.onerror=L=>{console.error(`ImgSrc load failed -> ${JSON.stringify(c.source)}`,L),Q()},rt.src=(null!==(gt=c.source)&&void 0!==gt&&gt.path?(null===(ut=E.icdt.config)||void 0===ut?void 0:ut.readfileuploadurl)+(null===(q=c.source)||void 0===q?void 0:q.path):null===(H=c.source)||void 0===H?void 0:H.url)||""},I=(Y,c,Q,gt)=>{if(Q.slideStatus!=pt.slideStatus)return void gt();let ut=(0,K.q)(c.width/c.height,100),q=0,H=0,rt=0,L=0;ut>=1?(rt=c.width,rt=Math.max(rt,40),rt=Math.min(rt,40),L=rt/ut):(L=c.height,L=Math.max(L,40),L=Math.min(L,40),rt=L/ut);let{size:Rt}=Y;q=Rt.x+Rt.width-rt/2,H=Rt.y-L/2;let bt=(0,tt.g1)(T.O.TEST_GROUP,"g",void 0,E.icdt.target);(0,u.G)(`icon-${Y.id}`,{size:{x:q,y:H,width:rt,height:L},source:{type:"image",image:null==Q?void 0:Q.source}},bt),setTimeout(()=>{gt()},3e3)},vt=(Y,c,Q)=>{var gt,ut,q,H,rt,L,et;if(c.slideStatus!=pt.slideStatus)return void Q();if(!(null!==(gt=c.source)&&void 0!==gt&&gt.path||null!==(ut=c.source)&&void 0!==ut&&ut.url))return console.warn(`${Y.id} -> audio no source!`),void Q();var Et=jQuery("#"+Y.id);let Rt=null!==(q=c.iteration)&&void 0!==q?q:0;if(Rt<0&&(Q(),Q=function(){}),!(Et.data("audio-running")&&Rt<0)){Et.data("audio-running",!0);var bt=new Audio;return bt.autoplay=!0,bt.loop=0!=Rt,bt.preload="auto",bt.controls=!0,bt.setAttributeNode(document.createAttribute("playsinline")),bt.addEventListener("canplay",function(){var It=bt.play();It&&It.then(function(Ct){Et.data("audio-running",!0)}).catch(function(Ct){Et.data("audio-running",!1),c.slideStatus===pt.slideStatus&&Q()})}),bt.addEventListener("timeupdate",function(){var Ct;c.slideStatus!==pt.slideStatus&&((Ct=this).pause(),Ct.remove(),Et.data("audio-running",!1))}),bt.addEventListener("canplaythrough",function(){this.loop&&(Rt>0?Rt--:0==Rt&&(this.loop=!1))}),bt.addEventListener("play",function(){}),bt.addEventListener("pause",function(){}),bt.addEventListener("ended",function(){this.remove(),Et.data("audio-running",!1),c.slideStatus===pt.slideStatus&&Q()}),bt.onerror=function(){this.remove(),Et.data("audio-running",!1),c.slideStatus===pt.slideStatus&&Q()},bt.src=(null!==(H=c.source)&&void 0!==H&&H.path?(null===(rt=E.icdt.config)||void 0===rt?void 0:rt.readfileuploadurl)+(null===(L=c.source)||void 0===L?void 0:L.path):null===(et=c.source)||void 0===et?void 0:et.url)||"",bt}};var Mt=p(9942);const _t=(Y,c)=>{var Q;null===(Q=c.test)||void 0===Q||null===(Q=Q.answer)||void 0===Q||null===(Q=Q.matching)||void 0===Q||Q.filter(gt=>gt.id==Y.id).forEach(gt=>gt.value=""),jQuery(`#node-${Y.id}`).remove()},St=(Y,c,Q,gt,ut,q)=>{var H,rt,L,et,Et,Rt,bt,It,Ct,kt,ht,zt;ut.iscorrect?(null!==(H=c.test)&&void 0!==H&&null!==(H=H.audiotrue)&&void 0!==H&&H.path&&vt(Y,{source:(0,Mt.I)(null===(et=c.test)||void 0===et?void 0:et.audiotrue),iteration:0,nodeStatus:Q,slideStatus:gt},q),null!==(rt=c.test)&&void 0!==rt&&null!==(rt=rt.icontrue)&&void 0!==rt&&rt.path&&J(Y,{source:(0,Mt.I)(null===(Et=c.test)||void 0===Et?void 0:Et.icontrue),iteration:0,nodeStatus:Q,slideStatus:gt},q),null!==(L=c.test)&&void 0!==L&&null!==(L=L.effecttrue)&&void 0!==L&&L.path&&B(0,{source:(0,Mt.I)(null===(Rt=c.test)||void 0===Rt?void 0:Rt.effecttrue),iteration:0,nodeStatus:Q,slideStatus:gt},q)):(null!==(bt=c.test)&&void 0!==bt&&null!==(bt=bt.audiofalse)&&void 0!==bt&&bt.path&&vt(Y,{source:(0,Mt.I)(null===(kt=c.test)||void 0===kt?void 0:kt.audiofalse),iteration:0,nodeStatus:Q,slideStatus:gt},q),null!==(It=c.test)&&void 0!==It&&null!==(It=It.iconfalse)&&void 0!==It&&It.path&&J(Y,{source:(0,Mt.I)(null===(ht=c.test)||void 0===ht?void 0:ht.iconfalse),iteration:0,nodeStatus:Q,slideStatus:gt},q),null!==(Ct=c.test)&&void 0!==Ct&&null!==(Ct=Ct.effectfalse)&&void 0!==Ct&&Ct.path&&B(0,{source:(0,Mt.I)(null===(zt=c.test)||void 0===zt?void 0:zt.effectfalse),iteration:0,nodeStatus:Q,slideStatus:gt},q))},it=(Y,c,Q,gt)=>{var ut,q,H,rt,L,et,Rt,It,bt;null!==(ut=c.animate)&&void 0!==ut&&ut.value&&(0,P.Z)(c,Q.nodeStatus,Q.slideStatus),null!==(q=c.interactive)&&void 0!==q&&q.show?(console.log(`node(${c.id}) | nodeStatus(${Q.nodeStatus}) | slideStatus(${Q.slideStatus}) | show`),((Y,c,Q,gt)=>{var ut,q,H;let rt={total:0,counter:0},{triggershow:L,triggerrun:et,triggerhide:Et,action:Rt,audio:bt}=null!==(ut=null===(q=Y.interactive)||void 0===q?void 0:q.show)&&void 0!==ut?ut:{};if(console.log(`node(${Y.id}) | nodeStatus(${c}) | slideStatus(${Q}) | show`),L){let{id:Ct,ids:kt,time:ht,async:zt}=L;"asynctrue"==zt?setTimeout(()=>{(0,R.L5)({id:Ct,ids:kt,nodeStatus:c,slideStatus:Q})}):"time"==zt&&setTimeout(()=>{(0,R.L5)({id:Ct,ids:kt,nodeStatus:c,slideStatus:Q})},1e3*(null!=ht?ht:0))}if(et){let{id:Ct,ids:kt,time:ht,async:zt}=et;"asynctrue"==zt?setTimeout(()=>{(0,R.Ar)({id:Ct,ids:kt,nodeStatus:c,slideStatus:Q})}):"time"==zt&&setTimeout(()=>{(0,R.Ar)({id:Ct,ids:kt,nodeStatus:c,slideStatus:Q})},1e3*(null!=ht?ht:0))}if(Et){let{id:Ct,ids:kt,time:ht,async:zt}=Et;"asynctrue"==zt?setTimeout(()=>{(0,R.WT)({id:Ct,ids:kt,nodeStatus:c,slideStatus:Q})}):"time"==zt&&setTimeout(()=>{(0,R.WT)({id:Ct,ids:kt,nodeStatus:c,slideStatus:Q})},1e3*(null!=ht?ht:0))}let It=()=>{setTimeout(()=>{if(rt.counter>=rt.total){if(gt&&gt(),L){let{id:Ct,ids:kt,async:ht}=L;(!ht||"asyncfalse"==ht)&&(0,R.L5)({id:Ct,ids:kt,nodeStatus:c,slideStatus:Q})}if(et){let{id:Ct,ids:kt,async:ht}=et;(!ht||"asyncfalse"==ht)&&(0,R.Ar)({id:Ct,ids:kt,nodeStatus:c,slideStatus:Q})}if(Et){let{id:Ct,ids:kt,async:ht}=Et;(!ht||"asyncfalse"==ht)&&(0,R.WT)({id:Ct,ids:kt,nodeStatus:c,slideStatus:Q})}}})};if(null!=Rt&&Rt.value){rt.total+=1;let Ct=()=>{rt.counter+=1,It()};switch(null==Rt?void 0:Rt.value){case"hide":jQuery("#"+Y.id).addClass("hide"),Ct();break;case"points":{let{points:kt,time:ht,iteration:zt,finish:Jt}=Rt;(0,b.G)(Y.id,{node:Y,points:kt,time:ht,iteration:zt,finish:Jt,nodeStatus:c,slideStatus:Q},Ct);break}default:{let{value:kt,time:ht,iteration:zt,finish:Jt}=Rt;(0,yt.Q)(Y.id,{node:Y,value:kt,time:ht,iteration:zt,finish:Jt,nodeStatus:c,slideStatus:Q},Ct);break}}}if(null!=bt&&null!==(H=bt.source)&&void 0!==H&&H.path){rt.total+=1;let Ct=()=>{rt.counter+=1,It()},kt=(0,v.R)(Y.id,bt,rt,{nodeStatus:c,slideStatus:Q},Ct);-1==(null==bt?void 0:bt.iteration)&&jQuery("#"+Y.id).click(ht=>{ht.preventDefault(),kt&&(kt.volume=kt.volume>=1?0:kt.volume+.25),console.log(null==kt?void 0:kt.volume)})}rt.total||It()})(c,Q.nodeStatus,Q.slideStatus,gt)):gt&&gt(),null!==(H=c.interactive)&&void 0!==H&&H.click&&(It=null===(Rt=c.interactive)||void 0===Rt?void 0:Rt.click,Object.keys(null!=It?It:{}).map(kt=>It[kt]?1:0).includes(1)&&jQuery("#"+c.id).addClass("interactive-click"),jQuery("#"+c.id).click(It=>{It.preventDefault(),Q.nodeStatus=pt.refreshNodeStatus(),console.log(`node(${c.id}) | nodeStatus(${Q.nodeStatus}) | slideStatus(${Q.slideStatus}) | click`),(0,j.F)(c,Q.nodeStatus,Q.slideStatus)})),null!==(rt=c.variable)&&void 0!==rt&&rt.input&&jQuery("#"+c.id).on("change","input,textarea",It=>{It.preventDefault(),((Y,c,Q)=>{var gt,ut;E.icdt.variable.setValue(null!==(gt=null===(ut=c.variable)||void 0===ut||null===(ut=ut.input)||void 0===ut?void 0:ut.variable)&&void 0!==gt?gt:"",Y),(Y=>{var c;let Q=(gt,ut)=>{null==gt||gt.forEach(q=>{switch(q.type){case ot.$.GROUP:(0,C.m)(q.id,{},ut?window.document.getElementById(ut):null),Q(q.nodes,q.id);break;case ot.$.POLYGON:break;case ot.$.TEXT:(0,h.$)(q.id,{size:q.size,attribute:q.attribute,source:q.source},ut?window.document.getElementById(ut):null)}})};Q(null===(c=Y.svg)||void 0===c?void 0:c.nodes)})(Q)})(It.target.value,c,Y)}),null!==(L=c.variable)&&void 0!==L&&L.click&&(null!==(bt=c.variable)&&void 0!==bt&&null!==(bt=bt.click)&&void 0!==bt&&bt.variable&&jQuery("#"+c.id).addClass("variable-click"),jQuery("#"+c.id).click(It=>{It.preventDefault(),((Y,c)=>{var Q;E.icdt.variable.setValueOperator(null===(Q=Y.variable)||void 0===Q?void 0:Q.click),(Y=>{var c;let Q=(gt,ut)=>{null==gt||gt.forEach(q=>{switch(q.type){case ot.$.GROUP:(0,C.m)(q.id,{},ut?window.document.getElementById(ut):null),Q(q.nodes,q.id);break;case ot.$.POLYGON:break;case ot.$.TEXT:(0,h.$)(q.id,{size:q.size,attribute:q.attribute,source:q.source},ut?window.document.getElementById(ut):null)}})};Q(null===(c=Y.svg)||void 0===c?void 0:c.nodes)})(c)})(c,Y)})),"test"==(null===(et=c.source)||void 0===et?void 0:et.type)&&((Y,c)=>{var Q;let gt=()=>{};switch(null===(Q=Y.source)||void 0===Q||null===(Q=Q.test)||void 0===Q?void 0:Q.type){case"truefalse":var ut;if(jQuery("#"+Y.id).click(L=>{L.preventDefault(),((Y,c,Q,gt,ut)=>{var q,H;let rt=null===(q=Y.source)||void 0===q||null===(q=q.test)||void 0===q||null===(q=q.truefalse)||void 0===q?void 0:q.iscorrect;if(c.test?c.test.answer?c.test.answer.truefalse={value:Y.id,iscorrect:rt}:c.test.answer={truefalse:{value:Y.id,iscorrect:rt}}:c.test={answer:{truefalse:{value:Y.id,iscorrect:rt}}},null!==(H=c.svg)&&void 0!==H&&H.nodes.find(L=>{var et;return"submit"==(null===(et=L.source)||void 0===et||null===(et=et.test)||void 0===et?void 0:et.type)})){if(c.test.showselection){let L=(0,tt.g1)(T.O.TEST_GROUP,"g",void 0,E.icdt.target);(0,tt.Yw)(L,c,Y)}}else St(Y,c,Q,gt,{iscorrect:rt},ut)})(Y,c,pt.nodeStatus,pt.slideStatus,gt)}),null!==(ut=c.test)&&void 0!==ut&&ut.showselection){let L=(0,tt.g1)(T.O.TEST_GROUP,"g",void 0,E.icdt.target);(0,tt.Yw)(L,c,Y)}break;case"singlechoice":var q;if(jQuery("#"+Y.id).click(L=>{L.preventDefault(),((Y,c,Q,gt,ut)=>{var q,H;let rt=null===(q=Y.source)||void 0===q||null===(q=q.test)||void 0===q||null===(q=q.singlechoice)||void 0===q?void 0:q.iscorrect;if(c.test?c.test.answer?c.test.answer.singlechoice={value:Y.id,iscorrect:rt}:c.test.answer={singlechoice:{value:Y.id,iscorrect:rt}}:c.test={answer:{singlechoice:{value:Y.id,iscorrect:rt}}},null!==(H=c.svg)&&void 0!==H&&H.nodes.find(L=>{var et;return"submit"==(null===(et=L.source)||void 0===et||null===(et=et.test)||void 0===et?void 0:et.type)})){if(c.test.showselection){let L=(0,tt.g1)(T.O.TEST_GROUP,"g",void 0,E.icdt.target);(0,tt.Yw)(L,c,Y)}}else St(Y,c,Q,gt,{iscorrect:rt},ut)})(Y,c,pt.nodeStatus,pt.slideStatus,gt)}),null!==(q=c.test)&&void 0!==q&&q.showselection){let L=(0,tt.g1)(T.O.TEST_GROUP,"g",void 0,E.icdt.target);(0,tt.Yw)(L,c,Y)}break;case"multichoice":var H;if(jQuery("#"+Y.id).click(L=>{L.preventDefault(),((Y,c,Q,gt,ut)=>{var q,H;let L,rt=null===(q=Y.source)||void 0===q||null===(q=q.test)||void 0===q||null===(q=q.multichoice)||void 0===q?void 0:q.iscorrect;if(c.test?c.test.answer?c.test.answer.multichoice?c.test.answer.multichoice.find(et=>et.value==Y.id)?(c.test.answer.multichoice=c.test.answer.multichoice.filter(et=>et.value!=Y.id),L=!0):c.test.answer.multichoice.push({value:Y.id,iscorrect:rt}):c.test.answer.multichoice=[{value:Y.id,iscorrect:rt}]:c.test.answer={multichoice:[{value:Y.id,iscorrect:rt}]}:c.test={answer:{multichoice:[{value:Y.id,iscorrect:rt}]}},null!==(H=c.svg)&&void 0!==H&&H.nodes.find(et=>{var Et;return"submit"==(null===(Et=et.source)||void 0===Et||null===(Et=Et.test)||void 0===Et?void 0:Et.type)})){if(c.test.showselection){let et=(0,tt.g1)(T.O.TEST_GROUP,"g",void 0,E.icdt.target);(0,tt.Yw)(et,c,Y)}}else St(Y,c,Q,gt,{iscorrect:rt},ut)})(Y,c,pt.nodeStatus,pt.slideStatus,gt)}),null!==(H=c.test)&&void 0!==H&&H.showselection){let L=(0,tt.g1)(T.O.TEST_GROUP,"g",void 0,E.icdt.target);(0,tt.Yw)(L,c,Y)}break;case"fill":var rt;jQuery("#"+Y.id).on("keyup",'input[type="text"]',L=>{var et;let Et=jQuery("<div/>").css({"font-size":jQuery(L.target).css("font-size"),visibility:"hidden",float:"left"}).text(L.target.value).appendTo(window.document.body);jQuery(L.target).css({width:(null!==(et=Et.width())&&void 0!==et?et:0)+30})}).on("keypress",'input[type="text"]',L=>{13===(L.keyCode||L.charCode||L.which)&&(L.preventDefault(),L.stopPropagation(),jQuery(L.target).blur())}).on("change",'input[type="text"]',L=>{var et,Et;let Rt=pt.nodeStatus,bt=pt.slideStatus,It=null===(et=L.target)||void 0===et?void 0:et.getAttribute("data-key"),Ct=null===(Et=L.target)||void 0===Et||null===(Et=Et.value)||void 0===Et?void 0:Et.trim();((Y,c,Q,gt,ut,q)=>{var H,rt,L,et;let{value:Et}=null!==(H=null===(rt=Y.source)||void 0===rt||null===(rt=rt.test)||void 0===rt||null===(rt=rt.fill)||void 0===rt?void 0:rt.find(bt=>bt.key==`[[${ut.key}]]`))&&void 0!==H?H:{},Rt=Et&&Et.map(bt=>null==bt?void 0:bt.toLocaleLowerCase()).includes(null===(L=ut.value)||void 0===L?void 0:L.toLocaleLowerCase());null!==(et=c.svg)&&void 0!==et&&et.nodes.find(bt=>{var It;return"submit"==(null===(It=bt.source)||void 0===It||null===(It=It.test)||void 0===It?void 0:It.type)})||St(Y,c,Q,gt,{iscorrect:Rt},q),ut.iscorrect=Rt,c.test?c.test.answer?c.test.answer.fill?c.test.answer.fill.find(bt=>bt.key==ut.key)?c.test.answer.fill.filter(bt=>bt.key==ut.key).forEach(bt=>{bt.value=ut.value,bt.iscorrect=ut.iscorrect}):c.test.answer.fill.push(ut):c.test.answer.fill=[ut]:c.test.answer={fill:[ut]}:c.test={answer:{fill:[ut]}}})(Y,c,Rt,bt,{key:It,value:Ct},gt),jQuery("#"+Y.id).find(`input[type="text"][data-key="${It}"]`).val(Ct)}),null!==(rt=c.test)&&void 0!==rt&&rt.showselection||jQuery("#"+Y.id).addClass("hide-selection"),(()=>{let L=(0,tt.g1)(T.O.TEST_GROUP,"g",void 0,E.icdt.target);(0,tt.Yw)(L,c,Y)})();break;case"matching-empty":jQuery("#"+Y.id).on("touchmove",".ondrag-item",function(L){L.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(L){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${Y.size.height/Y.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${L.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(L){var et;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(et=c.test)&&void 0!==et&&et.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection"),_t(Y,c)},drag:function(L){},dragend:function(L){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${Y.id} .ondrop-here`).kendoDropTarget({dragenter:function(L){L.dropTarget.hasClass("actived")&&L.dropTarget.addClass("focused")},dragleave:function(L){L.dropTarget.hasClass("actived")&&L.dropTarget.removeClass("focused")},drop:function(L){if(!L.dropTarget.hasClass("actived"))return;L.dropTarget.removeClass("focused");let et=L.dropTarget,Et=L.draggable.currentTarget;et.is(":empty")||et.find(".ondrag-item").appendTo($('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').first()),Et.appendTo(et),((Y,c,Q,gt,ut,q)=>{var H,rt,L;let{key:et}=null!==(H=null===(rt=Y.source)||void 0===rt||null===(rt=rt.test)||void 0===rt?void 0:rt.matching)&&void 0!==H?H:{key:"KIEN"},Et=ut.key==et;null!==(L=c.svg)&&void 0!==L&&L.nodes.find(bt=>{var It;return"submit"==(null===(It=bt.source)||void 0===It||null===(It=It.test)||void 0===It?void 0:It.type)})||St(Y,c,Q,gt,{iscorrect:Et},q),_t(Y,c);let Rt={id:Y.id,key:null!=et?et:"",value:ut.key};c.test?c.test.answer?c.test.answer.matching?c.test.answer.matching.find(bt=>bt.id==Rt.id)?c.test.answer.matching.filter(bt=>bt.id==Rt.id).forEach(bt=>{bt.key=Rt.key,bt.value=Rt.value}):c.test.answer.matching.push(Rt):c.test.answer.matching=[Rt]:c.test.answer={matching:[Rt]}:c.test={answer:{matching:[Rt]}}})(Y,c,pt.nodeStatus,pt.slideStatus,{key:Et.data("key")},gt)}}),(()=>{let L=(0,tt.g1)(T.O.TEST_GROUP,"g",void 0,E.icdt.target);(0,tt.Yw)(L,c,Y)})();break;case"matching-content":jQuery("#"+Y.id).on("touchmove",".ondrag-item",function(L){L.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(L){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${Y.size.height/Y.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${L.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(L){var et;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(et=c.test)&&void 0!==et&&et.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection")},drag:function(L){},dragend:function(L){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${Y.id} .ondrop-here`).kendoDropTarget({dragenter:function(L){L.dropTarget.hasClass("actived")&&L.dropTarget.addClass("focused")},dragleave:function(L){L.dropTarget.hasClass("actived")&&L.dropTarget.removeClass("focused")},drop:function(L){L.dropTarget.hasClass("actived")&&(L.dropTarget.removeClass("focused"),L.draggable.currentTarget.appendTo(L.dropTarget))}}),(()=>{let L=(0,tt.g1)(T.O.TEST_GROUP,"g",void 0,E.icdt.target);(0,tt.Yw)(L,c,Y)})();break;case"speech":break;case"submit":jQuery("#"+Y.id).click(L=>{L.preventDefault(),((Y,c,Q,gt,ut)=>{var q,H,rt,L,et;let Et;var Rt;if(null!=c&&null!==(q=c.test)&&void 0!==q&&null!==(q=q.answer)&&void 0!==q&&q.truefalse)Et=null==c||null===(Rt=c.test)||void 0===Rt||null===(Rt=Rt.answer)||void 0===Rt||null===(Rt=Rt.truefalse)||void 0===Rt?void 0:Rt.iscorrect;else if(null!=c&&null!==(H=c.test)&&void 0!==H&&null!==(H=H.answer)&&void 0!==H&&H.singlechoice){var bt;Et=null==c||null===(bt=c.test)||void 0===bt||null===(bt=bt.answer)||void 0===bt||null===(bt=bt.singlechoice)||void 0===bt?void 0:bt.iscorrect}else if(null!=c&&null!==(rt=c.test)&&void 0!==rt&&null!==(rt=rt.answer)&&void 0!==rt&&rt.multichoice){var It,Ct,kt;Et=1==[null==c||null===(It=c.test)||void 0===It||null===(It=It.answer)||void 0===It||null===(It=It.multichoice)||void 0===It?void 0:It.length,null==c||null===(Ct=c.test)||void 0===Ct||null===(Ct=Ct.answer)||void 0===Ct||null===(Ct=Ct.multichoice)||void 0===Ct||null===(Ct=Ct.map(ne=>ne.iscorrect?1:0))||void 0===Ct?void 0:Ct.reduce((ne,re)=>ne+re),null==c||null===(kt=c.svg)||void 0===kt||null===(kt=kt.nodes)||void 0===kt||null===(kt=kt.filter(ne=>{var re,we;return"multichoice"==(null===(re=ne.source)||void 0===re||null===(re=re.test)||void 0===re?void 0:re.type)&&(null===(we=ne.source)||void 0===we||null===(we=we.test)||void 0===we||null===(we=we.multichoice)||void 0===we?void 0:we.iscorrect)}))||void 0===kt?void 0:kt.length].filter((ne,re,we)=>we.indexOf(ne)==re).length}else if(null!=c&&null!==(L=c.test)&&void 0!==L&&null!==(L=L.answer)&&void 0!==L&&L.fill){var ht,zt;Et=(null==c||null===(ht=c.test)||void 0===ht||null===(ht=ht.answer)||void 0===ht||null===(ht=ht.fill)||void 0===ht||null===(ht=ht.map(ne=>ne.iscorrect?1:0))||void 0===ht?void 0:ht.reduce((ne,re)=>ne+re))==(null===(zt=c.svg)||void 0===zt||null===(zt=zt.nodes)||void 0===zt||null===(zt=zt.filter(ne=>{var re;return"fill"==(null===(re=ne.source)||void 0===re||null===(re=re.test)||void 0===re?void 0:re.type)}))||void 0===zt?void 0:zt.length)}else if(null!=c&&null!==(et=c.test)&&void 0!==et&&null!==(et=et.answer)&&void 0!==et&&et.matching){var Jt,fe;Et=(null===(Jt=c.svg)||void 0===Jt||null===(Jt=Jt.nodes)||void 0===Jt||null===(Jt=Jt.filter(ne=>{var re;return"matching-empty"==(null===(re=ne.source)||void 0===re||null===(re=re.test)||void 0===re?void 0:re.type)}))||void 0===Jt?void 0:Jt.length)==((null==c||null===(fe=c.test)||void 0===fe||null===(fe=fe.answer)||void 0===fe?void 0:fe.matching)||[]).map(ne=>ne.key==ne.value?1:0).reduce((ne,re)=>ne+re)}St(Y,c,Q,gt,{iscorrect:Et},ut)})(Y,c,pt.nodeStatus,pt.slideStatus,gt)})}})(c,Y)};var $t=p(8619),X=p(8785),F=p(4921),d=p(8054),at=p(2282),mt=p(2875),Pt=p(9322);const Xt=(Y,c,Q)=>{if(Q.slideStatus!=pt.slideStatus||!c.length)return;let gt=c.shift(),ut=Y.filter(L=>{var et;return(null!==(et=L.idx)&&void 0!==et?et:0)==gt});if(!ut.length)return;let q=Math.max.apply(null,ut.map(L=>{var et;return null!==(et=L.time)&&void 0!==et?et:0})),H=!1,rt=q<.5?0:setTimeout(()=>{H||(H=!0,Xt(Y,c,Q))},1e3*q);Ht(Y,c,ut,0,Q,{idx:gt,total:ut.length,counter:0,isRecursive:H,timeoutRecursive:rt,maxTimeCoundown:q,uid:Math.floor(1e9*Math.random())})},Ht=(Y,c,Q,gt,ut,q)=>{if(ut.slideStatus!=pt.slideStatus)return;let H=Q[gt];if(H){switch(H.type){case ot.$.GROUP:break;case ot.$.CIRCLE:(0,$t._)(H.id,{size:H.size,attribute:H.attribute},H.pid?window.document.getElementById(H.pid):null);break;case ot.$.ELLIPSE:(0,X.r)(H.id,{size:H.size,attribute:H.attribute},H.pid?window.document.getElementById(H.pid):null);break;case ot.$.LINE:(0,F.W)(H.id,{size:H.size,attribute:H.attribute},H.pid?window.document.getElementById(H.pid):null);break;case ot.$.RECT:(0,d.f)(H.id,{size:H.size,attribute:H.attribute},H.pid?window.document.getElementById(H.pid):null);break;case ot.$.POLYGON:(0,at.l)(H.id,{size:H.size,attribute:H.attribute},H.pid?window.document.getElementById(H.pid):null);break;case ot.$.FOREIGNOBJECT:(0,mt.e)(H.id,{size:H.size,attribute:H.attribute,style:H.style,source:H.source},H.pid?window.document.getElementById(H.pid):null);break;case ot.$.IMAGE:(0,u.G)(H.id,{size:H.size,attribute:H.attribute,source:H.source},H.pid?window.document.getElementById(H.pid):null);break;case ot.$.TEXT:(0,h.$)(H.id,{size:H.size,attribute:H.attribute,source:H.source},H.pid?window.document.getElementById(H.pid):null);break;case ot.$.PATH:(0,Pt.G)(H.id,{size:H.size,attribute:H.attribute},H.pid?window.document.getElementById(H.pid):null)}it(ut.slide,H,ut,()=>{q.counter+=1,q.maxTimeCoundown<.5&&q.counter>=q.total&&(q.total=q.counter=0,q.isRecursive||(clearTimeout(q.timeoutRecursive),q.isRecursive=!0,setTimeout(()=>{Xt(Y,c,ut)},250)))}),Ht(Y,c,Q,++gt,ut,q)}},pt=new class At{constructor(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}set data(c){this._dataSource=c.data||{},E.icdt.variable.set=c.variable||{}}get nodeStatus(){return this._nodeStatus}refreshNodeStatus(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus}get slideStatus(){return this._slideStatus}refreshSlideStatus(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus}get slideIdx(){return this._slideIdx}get slideTotal(){var c,Q;return null!==(c=null===(Q=this._dataSource)||void 0===Q||null===(Q=Q.slides)||void 0===Q?void 0:Q.length)&&void 0!==c?c:0}get slides(){var c;return(null===(c=this._dataSource)||void 0===c?void 0:c.slides)||[]}get slide(){var c;return((null===(c=this._dataSource)||void 0===c?void 0:c.slides)||[])[this._slideIdx]||{}}findNode(c){var Q;let gt=null===(Q=this._dataSource)||void 0===Q||null===(Q=Q.slides)||void 0===Q?void 0:Q.find((bt,It)=>It==this._slideIdx),ut=null==gt?void 0:gt.svg,q=(bt,It)=>{let Ct=null==bt?void 0:bt.find(zt=>zt.id==c);if(Ct)return Ct.pid=It,Ct;let kt=0,ht=bt.length||0;for(;kt<ht&&!Ct&&(Ct=q(bt[kt].nodes||[],bt[kt].id),!Ct);)kt++;return Ct},H=q((null==ut?void 0:ut.nodes)||[]);var rt,L,et,Et,Rt;return H?(H.style=null!==(rt=H.style)&&void 0!==rt?rt:{},H.source=null!==(L=H.source)&&void 0!==L?L:{},H.animate=null!==(et=H.animate)&&void 0!==et?et:{},H.interactive=null!==(Et=H.interactive)&&void 0!==Et?Et:{},H.variable=null!==(Rt=H.variable)&&void 0!==Rt?Rt:{},H):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}runSlide(c,Q,gt){var ut;let q;var H,rt;if(this.refreshNodeStatus(),this.refreshSlideStatus(),gt)q=null===(H=this._dataSource)||void 0===H||null===(H=H.slides)||void 0===H?void 0:H.find(Rt=>Rt.code==gt||Rt.id==gt),q&&(this._slideIdx=(null===(rt=this._dataSource)||void 0===rt||null===(rt=rt.slides)||void 0===rt?void 0:rt.indexOf(q))||0);else if(Q){var L,et;q=null===(L=this._dataSource)||void 0===L||null===(L=L.slides)||void 0===L?void 0:L.find(Rt=>Rt.id==Q),q&&(this._slideIdx=(null===(et=this._dataSource)||void 0===et||null===(et=et.slides)||void 0===et?void 0:et.indexOf(q))||0)}else this._slideIdx=Math.min(Math.max(c||0,0),this.slideTotal-1),q=this.slide;if(q){var Et;ee(E.icdt.container,E.icdt.svg,q,!0),null===(Et=jQuery(E.icdt.svg).find("#"+T.O.BACKGROUND_GROUP))||void 0===Et||Et.empty();let Rt=(0,tt.g1)(T.O.BACKGROUND_GROUP,"g",void 0,E.icdt.svg);(0,tt.x0)(Rt,q),(Y=>{var c,Q,gt,ut;let q=pt.nodeStatus,H=pt.slideStatus;null===(c=Y.svg)||void 0===c||c.nodes.forEach(L=>{L.pid=Math.ceil(1e9*Math.random()),(0,C.m)(L.pid)});let rt=null===(Q=Y.svg)||void 0===Q||null===(Q=Q.nodes)||void 0===Q?void 0:Q.map(L=>{var et;return null!==(et=L.idx)&&void 0!==et?et:0}).filter((L,et,Et)=>Et.indexOf(L)==et).sort((L,et)=>(null!=L?L:0)-(null!=et?et:0));Xt(null!==(gt=null===(ut=Y.svg)||void 0===ut?void 0:ut.nodes)&&void 0!==gt?gt:[],null!=rt?rt:[],{slide:Y,nodeStatus:q,slideStatus:H})})(q)}this.changeSlide(this.slides,null===(ut=this.slide)||void 0===ut?void 0:ut.id,this.slideIdx,this.slides.length,q)}set onChangeSlide(c){this._fnChangeSlides.push(c)}changeSlide(c,Q,gt,ut,q){this._fnChangeSlides.forEach(H=>H(c,Q,gt,ut,q))}},ee=(Y,c,Q,gt)=>{var ut,q,H,rt;let L=window.document.querySelector(c);var et;L||(L=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(et=window.document.querySelector(Y))||void 0===et||et.appendChild(L)),gt&&(L.textContent=null);let{x:Et,y:Rt,width:bt,height:It}=null!==(ut=null==Q||null===(q=Q.svg)||void 0===q?void 0:q.viewBox)&&void 0!==ut?ut:E.icdt.screen.frameSize;L.setAttributeNS(null,"viewBox",Et+" "+Rt+" "+bt+" "+It),L.setAttribute("id",c.replace("#",""));var Jt,fe,Ct=null!==(H=jQuery(Y).width())&&void 0!==H?H:1080,kt=null!==(rt=jQuery(Y).height())&&void 0!==rt?rt:1080,zt=bt/It;zt>=Ct/kt?fe=(Jt=Ct)/zt:Jt=(fe=kt)*zt,L.setAttributeNS(null,"width",Jt.toString()),L.setAttributeNS(null,"height",fe.toString())}},7267:(de,Dt,p)=>{p.d(Dt,{E:()=>ot,Z:()=>E});var T=p(70);const E=(yt,b,v)=>{var R;let{value:h}=null!==(R=yt.animate)&&void 0!==R?R:{};ot(yt.id,{node:yt,value:h,nodeStatus:b,slideStatus:v},()=>{})},ot=(yt,b,v)=>{var R;if(!b.value)return void v();let M=jQuery("#"+yt).parents("g");if(!M.length)return void v();let{size:h}=b.node;M.css("transform-origin",`${h.x+h.width/2}px ${h.y+h.height/2}px`);let C="",k=null!==(R=b.iteration)&&void 0!==R?R:0,A=[];(b.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?A.push(b.value):b.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(b.value)?(A.push("animation"),A.push(`animation-${b.value}`)):(A.push("animate__animated"),A.push(`animate__${b.value}`)):(A.push("animation"),A.push("animation-fadein")),k<0?(A.push("animation-iteration-infinite"),v(),v=function(){}):k>0&&A.push("animation-iteration-"+(k+1)),C=A.join(" "),function(_){let P=function(){M.data("animate-running")?M.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){M.data("animate-running",!1),setTimeout(function(){_()},100)}):_()};M.hasClass("animation")?setTimeout(function(){P()}):P()}(function(){var _;j(yt),(k>0||k<0)&&M.one("animationiteration",function(){b.slideStatus===T.$.slideStatus||(M.data("animate-running",!1),j(yt),b.slideStatus===T.$.slideStatus&&v())}),M.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(M.data("animate-running",!1),j(yt),b.finish){default:case 0:case 1:break;case 2:var P;ot(yt,{node:b.node,value:null===(P=b.node.animate)||void 0===P?void 0:P.out,nodeStatus:b.nodeStatus,slideStatus:b.slideStatus},()=>{M.addClass("hide")})}b.slideStatus===T.$.slideStatus&&v()}),M.attr("data-class",null!==(_=M.attr("class"))&&void 0!==_?_:""),M.addClass(C),M.data("animate-running",!0)})},j=function(yt){var b,v,R=jQuery("#"+yt).parents("g"),M=null===(b=R.attr("class"))||void 0===b?void 0:b.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),h=null===(v=R.attr("class"))||void 0===v?void 0:v.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);M&&M.forEach(function(k){jQuery(R).removeClass(k)}),h&&h.forEach(function(k){jQuery(R).removeClass(k)});let C=R.attr("data-class");C&&(R.attr("class",C),R.removeAttr("data-class")),jQuery(R).data("animation-running",!1)}},2336:(de,Dt,p)=>{p.d(Dt,{Q:()=>ot});var T=p(70),E=p(7267);const ot=(yt,b,v)=>{var R;if(!b.value)return void v();let M=jQuery("#"+yt).parents("g");if(!M.length)return void v();let{size:h}=b.node;M.css("transform-origin",`${h.x+h.width/2}px ${h.y+h.height/2}px`);let C="",k=null!==(R=b.iteration)&&void 0!==R?R:0,A=[];(b.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?A.push(b.value):(A.push("animation"),A.push(b.value?"animation-"+b.value:"animation-fadein")),k<0?(A.push("animation-iteration-infinite"),v(),v=function(){}):k>0&&A.push("animation-iteration-"+(k+1)),C=A.join(" "),function(_){let P=function(){M.data("animate-running")?M.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){M.data("animate-running",!1),setTimeout(function(){_()},100)}):_()};M.hasClass("animation")?setTimeout(function(){P()}):P()}(function(){var _;j(yt),(k>0||k<0)&&M.one("animationiteration",function(){b.slideStatus===T.$.slideStatus||(M.data("animate-running",!1),j(yt),b.slideStatus===T.$.slideStatus&&v())}),M.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(M.data("animate-running",!1),j(yt),b.finish){default:case 0:case 1:break;case 2:var P;(0,E.E)(yt,{node:b.node,value:null===(P=b.node.animate)||void 0===P?void 0:P.out,nodeStatus:b.nodeStatus,slideStatus:b.slideStatus},()=>{M.addClass("hide")})}b.slideStatus===T.$.slideStatus&&v()}),M.attr("data-class",null!==(_=M.attr("class"))&&void 0!==_?_:""),M.addClass(C),M.data("animate-running",!0)})},j=function(yt){var b,v=jQuery("#"+yt).parents("g"),R=null===(b=v.attr("class"))||void 0===b?void 0:b.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);R&&R.forEach(function(h){jQuery(v).removeClass(h)});let M=v.attr("data-class");M&&(v.attr("class",M),v.removeAttr("data-class")),jQuery(v).data("animation-running",!1)}},861:(de,Dt,p)=>{p.d(Dt,{G:()=>yt});var T=p(4318),E=p(70),ot=p(7492),j=p(7267);const yt=(v,R,M)=>{var h;if(!R.points||!R.points.length)return void M();let C=jQuery("#"+v),A=function b(v){let R=[];2===v.length&&v.splice(1,0,[(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2]);let A,Z,_,M=1,h=v.length;for(;M<h;){if(A=v[M-1],Z=v[M],_=v[M+1],(Math.abs(A[0]-Z[0])>=15||Math.abs(A[1]-Z[1])>=15)&&Math.pow(A[0]-Z[0],2)+Math.pow(A[1]-Z[1],2)>=Math.pow(15,2)&&_&&(Math.abs(A[0]-_[0])<=20||Math.abs(A[1]-_[1])<=20)&&Math.pow(A[0]-_[0],2)+Math.pow(A[1]-_[1],2)<=Math.pow(20,2))R.push(Z);else{let u=Z[0]-A[0],K=Z[1]-A[1],B=Math.max(Math.abs(u),Math.abs(K));for(var P=0;P<B;P+=15)R.push([A[0]+u*P/B,A[1]+K*P/B])}M++}return h>0&&(R.splice(0,0,v[0]),R.push(v[h-1])),R}((I=>{if(1==I.length){let{size:vt}=R.node;return[[vt.x+vt.width/2,vt.y+vt.height/2],...I]}return[...I]})(R.points||[])),Z=null!==(h=R.iteration)&&void 0!==h?h:0;if(Z<0&&(M(),M=function(){}),C.data("work-running")&&Z<0)return;C.data("work-running",!0);let tt,_=A.length,P=Math.max(20,1e3*(R.time||3)/_),{id:u,type:K,size:B,attribute:V}=E.$.findNode(v),J=function(I){if(R.slideStatus!==E.$.slideStatus)return C.data("work-running",!1),void(R.slideStatus===E.$.slideStatus&&M());if(I<_){let Mt=A[I];Mt&&(tt=Object.assign({},B,{x:Mt[0]-B.width/2,y:Mt[1]-B.height/2}),Object.assign(V,(0,T.sg)(K,tt,V)),(0,ot.__)(window.document.getElementById(u),V),setTimeout(function(){J(++I)},P))}else if(Z>0)Z--,J(1);else if(Z<0)J(1);else switch(C.data("work-running",!1),R.slideStatus===E.$.slideStatus&&M(),R.finish){default:case 0:break;case 1:Object.assign(V,(0,T.sg)(K,B,V)),(0,ot.__)(window.document.getElementById(u),V);break;case 2:var vt;(0,j.E)(R.node.id,{node:R.node,value:null===(vt=R.node.animate)||void 0===vt?void 0:vt.out,nodeStatus:R.nodeStatus,slideStatus:R.slideStatus},()=>{C.addClass("hide")})}};J(1)}},157:(de,Dt,p)=>{p.d(Dt,{R:()=>ot});var T=p(4981),E=p(70);const ot=(yt,b,v,R,M)=>{var h,C,k,A,Z,_,P;if(R.slideStatus!=E.$.slideStatus)return b.async&&"change-slide"!=b.async?void 0:void M();if(R.nodeStatus!=E.$.nodeStatus&&(!b.async||"change-node"==b.async))return void M();if(!(null!==(h=b.source)&&void 0!==h&&h.path||null!==(C=b.source)&&void 0!==C&&C.url))return console.warn(`${yt} -> audio no source!`),M(),void(M=()=>{});var u=jQuery("#"+yt);let K=null!==(k=b.iteration)&&void 0!==k?k:0;if(K<0&&(M(),M=function(){}),!(u.data("audio-running")&&K<0)){u.data("audio-running",!0);var B=function(tt){tt.pause(),tt.remove(),u.data("audio-running",!1)},V=new Audio;return V.autoplay=!0,V.loop=0!=K,V.preload="auto",V.controls=!0,V.setAttributeNode(document.createAttribute("playsinline")),V.addEventListener("canplay",function(){var tt=V.play();tt&&tt.then(function(J){var I;u.data("audio-running",!0),"time"==b.async?setTimeout(()=>{B(V),M(),M=()=>{}},1e3*(null!==(I=b.time)&&void 0!==I?I:1)):"non-stop"==b.async&&(M(),M=()=>{})}).catch(function(J){u.data("audio-running",!1),R.slideStatus===E.$.slideStatus&&(M(),M=()=>{})})}),V.addEventListener("timeupdate",function(){switch(b.async){case"time":case"non-stop":break;case"finish-action":v.total>=2&&v.total-v.counter==1&&(B(this),M(),M=()=>{});break;default:case"change-node":R.nodeStatus!==E.$.nodeStatus&&(B(this),M(),M=()=>{});break;case"change-slide":R.slideStatus!==E.$.slideStatus&&(B(this),M(),M=()=>{})}}),V.addEventListener("canplaythrough",function(){this.loop&&(K>0?K--:0==K&&(this.loop=!1))}),V.addEventListener("play",function(){}),V.addEventListener("pause",function(){}),V.addEventListener("ended",function(){this.remove(),u.data("audio-running",!1),R.slideStatus===E.$.slideStatus&&(M(),M=()=>{})}),V.onerror=function(){this.remove(),u.data("audio-running",!1),R.slideStatus===E.$.slideStatus&&(M(),M=()=>{})},V.src=(null!==(A=b.source)&&void 0!==A&&A.path?(null===(Z=T.icdt.config)||void 0===Z?void 0:Z.readfileuploadurl)+(null===(_=b.source)||void 0===_?void 0:_.path):null===(P=b.source)||void 0===P?void 0:P.url)||"",V}}},5973:(de,Dt,p)=>{p.d(Dt,{F:()=>M});var T=p(4981),E=p(70),ot=p(2336),j=p(861),yt=p(157),b=p(4787),v=p(370),R=p(7267);const M=(h,C,k,A)=>{var Z,_,P;let u={total:0,counter:0},{triggershow:K,triggerrun:B,triggerhide:V,action:tt,audio:J,slide:I,media:vt}=null!==(Z=null===(_=h.interactive)||void 0===_?void 0:_.click)&&void 0!==Z?Z:{};if(console.log(`node(${h.id}) | nodeStatus(${C}) | slideStatus(${k}) | click`),K){let{id:Nt,ids:dt,time:W,async:_t}=K;"asynctrue"==_t?(0,b.L5)({id:Nt,ids:dt,nodeStatus:C,slideStatus:k}):"time"==_t&&setTimeout(()=>{(0,b.L5)({id:Nt,ids:dt,nodeStatus:C,slideStatus:k})},1e3*(null!=W?W:0))}if(B){let{id:Nt,ids:dt,time:W,async:_t}=B;"asynctrue"==_t?(0,b.Ar)({id:Nt,ids:dt,nodeStatus:C,slideStatus:k}):"time"==_t&&setTimeout(()=>{(0,b.Ar)({id:Nt,ids:dt,nodeStatus:C,slideStatus:k})},1e3*(null!=W?W:0))}if(V){let{id:Nt,ids:dt,time:W,async:_t}=V;"asynctrue"==_t?(0,b.WT)({id:Nt,ids:dt,nodeStatus:C,slideStatus:k}):"time"==_t&&setTimeout(()=>{(0,b.WT)({id:Nt,ids:dt,nodeStatus:C,slideStatus:k})},1e3*(null!=W?W:0))}let Mt=()=>{setTimeout(()=>{if(u.counter>=u.total){if(A&&A(),K){let{id:Nt,ids:dt,async:W}=K;(!W||"asyncfalse"==W)&&(0,b.L5)({id:Nt,ids:dt,nodeStatus:C,slideStatus:k})}if(B){let{id:Nt,ids:dt,async:W}=B;(!W||"asyncfalse"==W)&&(0,b.Ar)({id:Nt,ids:dt,nodeStatus:C,slideStatus:k})}if(V){let{id:Nt,ids:dt,async:W}=V;(!W||"asyncfalse"==W)&&(0,b.WT)({id:Nt,ids:dt,nodeStatus:C,slideStatus:k})}}})};if(null!=tt&&tt.value){u.total+=1;let Nt=()=>{u.counter+=1,Mt()};switch(null==tt?void 0:tt.value){case"hide":var Kt;(0,R.E)(h.id,{node:h,value:null===(Kt=h.animate)||void 0===Kt?void 0:Kt.out,nodeStatus:C,slideStatus:k},()=>{jQuery("#"+h.id).addClass("hide"),Nt()});break;case"points":{let{points:dt,time:W,iteration:_t,finish:Ot}=tt;dt&&(0,j.G)(h.id,{node:h,points:dt,time:W,iteration:_t,finish:Ot,nodeStatus:C,slideStatus:k},Nt);break}default:{let{value:dt,time:W,iteration:_t,finish:Ot}=tt;(0,ot.Q)(h.id,{node:h,value:dt,time:W,iteration:_t,finish:Ot,nodeStatus:C,slideStatus:k},Nt);break}}}if(null!=J&&null!==(P=J.source)&&void 0!==P&&P.path){u.total+=1;let Nt=()=>{u.counter+=1,Mt()};(0,yt.R)(h.id,J,u,{nodeStatus:C,slideStatus:k},Nt)}if(u.total||Mt(),null!=I&&I.id)switch(I.id){case-1:E.$.runSlide(E.$.slideIdx-1);break;case-2:E.$.runSlide(E.$.slideIdx+1);break;default:var te;E.$.runSlide(void 0,I.id,null===(te=I.code)||void 0===te?void 0:te.toString())}if(null!=vt&&vt.type){var Ft;let dt=`<div class="popup-media-viewer"><iframe src="${(0,v.e)({readfileuploadurl:null===(Ft=T.icdt.config)||void 0===Ft?void 0:Ft.readfileuploadurl,type:null==vt?void 0:vt.type,oss:null==vt?void 0:vt.oss,path:null==vt?void 0:vt.path,url:null==vt?void 0:vt.url})}" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>`,W=jQuery(dt).appendTo(window.document.body);W.find(".btn-close").click(function(_t){_t.preventDefault(),W.remove()})}}},4787:(de,Dt,p)=>{p.d(Dt,{Ar:()=>yt,L5:()=>j,WT:()=>b});var T=p(70),E=p(5973),ot=p(7267);const j=v=>{v.id?jQuery("#"+v.id).removeClass("hide"):v.ids&&v.ids.forEach(R=>{jQuery("#"+R).removeClass("hide")})},yt=v=>{v.id?(jQuery("#"+v.id).removeClass("hide"),(0,E.F)(T.$.findNode(v.id),v.nodeStatus,v.slideStatus)):v.ids&&v.ids.forEach(R=>{jQuery("#"+R).removeClass("hide"),(0,E.F)(T.$.findNode(R),v.nodeStatus,v.slideStatus)})},b=v=>{if(v.id){var R;let M=T.$.findNode(v.id);(0,ot.E)(v.id,{node:M,value:null===(R=M.animate)||void 0===R?void 0:R.out,nodeStatus:v.nodeStatus,slideStatus:v.slideStatus},()=>{jQuery("#"+v.id).addClass("hide")})}else v.ids&&v.ids.forEach(M=>{var h;let C=T.$.findNode(M);(0,ot.E)(M,{node:C,value:null===(h=C.animate)||void 0===h?void 0:h.out,nodeStatus:v.nodeStatus,slideStatus:v.slideStatus},()=>{jQuery("#"+M).addClass("hide")})})}},7492:(de,Dt,p)=>{p.d(Dt,{Mh:()=>B,wM:()=>J,xo:()=>V,it:()=>I,g1:()=>Ft,__:()=>vt,QI:()=>Kt,DB:()=>Mt,eb:()=>tt,x0:()=>it,g$:()=>Nt,mo:()=>St,XH:()=>Ot,hJ:()=>dt,vl:()=>_t,yD:()=>W,Yw:()=>$t});var T=p(9054),E=p(1687),ot=p(9359),yt=/^#?[a-fA-F0-9]+$/;const R=(X,F)=>{var d;if("none"==(X=null!==(d=X)&&void 0!==d?d:""))return"none";if("transparent"==X)return"rgba(0,0,0,0)";if(X.includes("rgba("))return X;if(X.includes("rgb(")&&(X=(0,ot.E)(X)),!(X=X.replace(/[^0-9a-fA-F]/g,"")))return"";if(!yt.test(X))return console.error(`hex2rgba -> ${X}: first argument has invalid hexadecimal characters`),"";if("#"===X[0]&&(X=X.slice(1)),3===X.length){let mt=X.split("");mt.splice(2,0,X[2]),mt.splice(1,0,X[1]),mt.splice(0,0,X[0]),X=mt.join("")}if(6!==X.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var at=[parseInt(X.slice(0,2),16),parseInt(X.slice(2,4),16),parseInt(X.slice(4,6),16)];return F="number"==typeof F?F:parseFloat(F),at.push(F>=0&&F<=1?F:1),"rgba("+at.join(",")+")"};var M=p(370),h=p(1814),C=p(4981),k=p(3423),A=p(8054),Z=p(7210),_=p(8619),P=p(70),u=p(2875),K=p(1105);class B{constructor(F,d){let at=window.document.querySelector(d);var mt;at||(at=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(mt=window.document.querySelector(F))||void 0===mt||mt.appendChild(at));let{svgViewBox:Pt,svgSize:Gt}=C.icdt.screen.init();at.setAttributeNS(null,"viewBox",`${Pt.x} ${Pt.y} ${Pt.width} ${Pt.height}`),at.setAttribute("id",d.replace("#","")),at.style.display="block",at.style.width=`${Gt.width}px`,at.style.height=`${Gt.height}px`,at.style.backgroundColor="#fafafa",at.style.cursor="default"}}const V=X=>{jQuery(C.icdt.target).find("#"+E.O.BACKGROUND_GROUP).empty();let F=Ft(E.O.BACKGROUND_GROUP,"g",void 0,C.icdt.target);it(F,X),(()=>{let d=window.document.getElementById(null==X?void 0:X.id);jQuery(d).find("#"+E.O.BACKGROUND_GROUP).empty();let at=Ft(E.O.BACKGROUND_GROUP,"g",void 0,d);it(at,X)})()},tt=()=>{let X=C.icdt.screen.svgViewBox,F=C.icdt.screen.svgSize;C.icdt.target&&(C.icdt.target.setAttributeNS(null,"viewBox",`${X.x} ${X.y} ${X.width} ${X.height}`),C.icdt.target.style.left=`${F.x}px`,C.icdt.target.style.top=`${F.y}px`,C.icdt.target.style.width=`${F.width}px`,C.icdt.target.style.height=`${F.height}px`)},J=()=>{jQuery(C.icdt.target).find(">*:not(defs)").remove()},I=(X,F,d,at,mt)=>{let Pt;return X?(Pt=jQuery(mt||C.icdt.target).find("#"+X).get(0),Pt||(Pt=window.document.createElementNS("http://www.w3.org/2000/svg",d),Pt.setAttribute("id",X),F==T.$.FOREIGNOBJECT&&Pt.setAttribute("xmlns:html","http://www.w3.org/1999/xhtml"),jQuery(Pt).appendTo(mt||C.icdt.target))):(Pt=window.document.createElementNS("http://www.w3.org/2000/svg",d),jQuery(Pt).appendTo(mt||C.icdt.target)),null!=at&&at.attribute&&vt(Pt,null==at?void 0:at.attribute),null!=at&&at.style&&Mt(Pt,null==at?void 0:at.style),null!=at&&at.source&&Kt(Pt,F,null==at?void 0:at.source),Pt},vt=(X,F)=>{return jQuery(X).attr((d=Object.assign({},F||{}),null===(at=Object.keys(d))||void 0===at||at.forEach(Gt=>{switch(Gt){case"fill":break;case"fillRule":var Xt;Object.assign(d,{"fill-rule":null!==(Xt=d.fillRule)&&void 0!==Xt?Xt:null,fillRule:null});break;case"stroke":var Ht;Object.assign(d,{"stroke-width":null!==(Ht=d.strokeWidth)&&void 0!==Ht?Ht:null,strokeWidth:null});break;case"strokeLinecap":var At;Object.assign(d,{"stroke-linecap":null!==(At=d.strokeLinecap)&&void 0!==At?At:null,strokeLinecap:null});break;case"strokeLinejoin":var pt;Object.assign(d,{"stroke-linejoin":null!==(pt=d.strokeLinejoin)&&void 0!==pt?pt:null,strokeLinejoin:null});break;case"strokeMiterlimit":var ee;Object.assign(d,{"stroke-miterlimit":null!==(ee=d.strokeMiterlimit)&&void 0!==ee?ee:null,strokeMiterlimit:null});break;case"strokeDasharray":var Y;Object.assign(d,{"stroke-dasharray":null!==(Y=d.strokeDasharray)&&void 0!==Y?Y:null,strokeDasharray:null});break;case"strokeDasharrays":var c,Q;Object.assign(d,{"stroke-dasharray":null!==(c=null===(Q=d.strokeDasharrays)||void 0===Q?void 0:Q.join(" "))&&void 0!==c?c:null,strokeDasharrays:null});break;case"fontFamily":var gt;Object.assign(d,{"font-family":null!==(gt=d.fontFamily)&&void 0!==gt?gt:null,fontFamily:null});break;case"fontWeight":var ut;Object.assign(d,{"font-weight":null!==(ut=d.fontWeight)&&void 0!==ut?ut:null,fontWeight:null});break;case"fontSize":var q;Object.assign(d,{"font-size":null!==(q=d.fontSize)&&void 0!==q?q:null,fontSize:null});break;case"textLength":Object.assign(d,{textLength:d.textLength?`${d.textLength}px`:null});break;case"transformOrigin":var H;Object.assign(d,{"transform-origin":null!==(H=d.transformOrigin)&&void 0!==H?H:null,transformOrigin:null})}}),Object.assign({},null!=d?d:{},{fill:null!=d&&d.fill?R(d.fill,null!==(mt=null==d?void 0:d.fillOpacity)&&void 0!==mt?mt:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:null!=d&&d.stroke?R(d.stroke,null!==(Pt=null==d?void 0:d.strokeOpacity)&&void 0!==Pt?Pt:1):"rgba(0,0,0,0)",strokeOpacity:null}))),X;var d,at,mt,Pt},Mt=(X,F)=>{return jQuery(X).css((d=Object.assign({},F||{}),null===(at=Object.keys(d))||void 0===at||at.forEach(mt=>{switch(mt){case"padding":Object.assign(d,{padding:d.padding?`${d.padding}px`:null});break;case"borderWidth":var Pt;Object.assign(d,d.borderWidth&&d.borderColor?{"border-width":`${d.borderWidth}px`,"border-style":d.borderStyle||"solid","border-color":R(d.borderColor,null!==(Pt=d.borderOpacity)&&void 0!==Pt?Pt:1)}:{"border-width":"","border-style":"","border-color":""}),Object.assign(d,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(d,{"border-radius":d.borderRadius?`${d.borderRadius}px`:null,borderRadius:null});break;case"backgroundColor":var Gt;Object.assign(d,d.backgroundColor?{"background-color":R(d.backgroundColor,null!==(Gt=d.backgroundOpacity)&&void 0!==Gt?Gt:1)}:{"background-color":""}),Object.assign(d,{backgroundColor:null,backgroundOpacity:null})}}),d)),X;var d,at},Kt=(X,F,d)=>{switch(F){case T.$.TEXT:var at,mt;jQuery(X).text(null!==(at=null==d||null===(mt=d.text)||void 0===mt?void 0:mt.textContent)&&void 0!==at?at:"");break;case T.$.IMAGE:var Pt,Gt,Xt,Ht,At;jQuery(X).attr("href",(null==d||null===(Pt=d.image)||void 0===Pt?void 0:Pt.base64)||(null!=d&&null!==(Gt=d.image)&&void 0!==Gt&&Gt.path?(null===(Xt=C.icdt.config)||void 0===Xt?void 0:Xt.readfileuploadurl)+(null==d||null===(Ht=d.image)||void 0===Ht?void 0:Ht.path):null==d||null===(At=d.image)||void 0===At?void 0:At.url)||"");break;case T.$.FOREIGNOBJECT:switch(null==d?void 0:d.type){case"text":var pt,ee;if(null!==(pt=d.text)&&void 0!==pt&&pt.variableKeywords&&null!==(ee=d.text)&&void 0!==ee&&ee.variableKeywords.length){var Y;let a=C.icdt.variable.getKeys(),m=(null===(Y=d.text)||void 0===Y?void 0:Y.textContent)||"";d.text.variableKeywords.forEach(y=>{var g=y.replace(/[^a-zA-Z0-9_]/gm,"");if(a.indexOf(g)>=0){var O=C.icdt.variable.getValue(g);m=m.replace(y,O)}}),jQuery(X).text(m)}else{var c;jQuery(X).text((null===(c=d.text)||void 0===c?void 0:c.textContent)||"")}break;case"html":{var Q,gt,ut;let a=(null==d||null===(Q=d.html)||void 0===Q?void 0:Q.htmlContent)||"";if(null!==(gt=d.html)&&void 0!==gt&&gt.variableKeywords&&null!==(ut=d.html)&&void 0!==ut&&ut.variableKeywords.length){let m=C.icdt.variable.getKeys();d.html.variableKeywords.forEach(y=>{var g=y.replace(/[^a-zA-Z0-9_]/gm,"");if(m.indexOf(g)>=0){var O=C.icdt.variable.getValue(g);a=a.replace(y,O)}})}jQuery(X).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${a}</div>`).find("img[path],video[path],iframe[path]").each((m,y)=>{var g,O;y.setAttribute("src",(null!==(g=null===(O=C.icdt.config)||void 0===O?void 0:O.readfileuploadurl)&&void 0!==g?g:"")+y.getAttribute("path")),y.removeAttribute("path")});break}case"input":var q,H,rt,L;if(null!==(q=d.input)&&void 0!==q&&q.input)jQuery(X).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="${null!==(rt=null===(L=d.input)||void 0===L?void 0:L.placeholder)&&void 0!==rt?rt:""}" maxlength="100" /></div>`);else if(null!==(H=d.input)&&void 0!==H&&H.textarea){var et,Et;jQuery(X).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="${null!==(et=null===(Et=d.input)||void 0===Et?void 0:Et.placeholder)&&void 0!==et?et:""}" maxlength="1000"></textarea></div>`)}break;case"image":var Rt,bt,It,Ct,kt;jQuery(X).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="${(null===(Rt=d.image)||void 0===Rt?void 0:Rt.base64)||(null!==(bt=d.image)&&void 0!==bt&&bt.path?(null===(It=C.icdt.config)||void 0===It?void 0:It.readfileuploadurl)+(null===(Ct=d.image)||void 0===Ct?void 0:Ct.path):null===(kt=d.image)||void 0===kt?void 0:kt.url)||""}" style="width:100%;height:100%;display:block;"/></div>`);break;case"iframe":var ht,zt,Jt,fe;jQuery(X).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${(null!==(ht=d.iframe)&&void 0!==ht&&ht.path?(null===(zt=C.icdt.config)||void 0===zt?void 0:zt.readfileuploadurl)+(null===(Jt=d.iframe)||void 0===Jt?void 0:Jt.path):null===(fe=d.iframe)||void 0===fe?void 0:fe.url)||""}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break;case"embed":{var ne,re,we,Qe,He;let a=(0,M.e)({readfileuploadurl:null===(ne=C.icdt.config)||void 0===ne?void 0:ne.readfileuploadurl,type:null===(re=d.embed)||void 0===re?void 0:re.type,oss:null===(we=d.embed)||void 0===we?void 0:we.oss,path:null===(Qe=d.embed)||void 0===Qe?void 0:Qe.path,url:null===(He=d.embed)||void 0===He?void 0:He.url});jQuery(X).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${a}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break}case"svg":var Pe,Je;jQuery(X).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${null!==(Pe=null===(Je=d.svg)||void 0===Je?void 0:Je.svgContent)&&void 0!==Pe?Pe:""}</div>`);break;case"test":{var Ze,ei,Ee,Xe;let a=(null==d||null===(Ze=d.html)||void 0===Ze?void 0:Ze.htmlContent)||"";if(null!==(ei=d.html)&&void 0!==ei&&ei.variableKeywords&&null!==(Ee=d.html)&&void 0!==Ee&&Ee.variableKeywords.length){let m=C.icdt.variable.getKeys();d.html.variableKeywords.forEach(y=>{var g=y.replace(/[^a-zA-Z0-9_]/gm,"");if(m.indexOf(g)>=0){var O=C.icdt.variable.getValue(g);a=a.replace(y,O)}})}switch(null==d||null===(Xe=d.test)||void 0===Xe?void 0:Xe.type){case"truefalse":var De;jQuery(X).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==d?void 0:d.test.type}" data-correct="${null!=d&&null!==(De=d.test.truefalse)&&void 0!==De&&De.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${a}</div></div></div>`);break;case"singlechoice":var Ge;jQuery(X).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==d?void 0:d.test.type}" data-correct="${null!=d&&null!==(Ge=d.test.singlechoice)&&void 0!==Ge&&Ge.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${a}</div></div></div>`);break;case"multichoice":var Ye;jQuery(X).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==d?void 0:d.test.type}" data-correct="${null!=d&&null!==(Ye=d.test.multichoice)&&void 0!==Ye&&Ye.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${a}</div></div></div>`);break;case"matching-empty":var qe;jQuery(X).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-empty" data-key="${null==d||null===(qe=d.test.matching)||void 0===qe?void 0:qe.key}"></div>`);break;case"matching-content":var Ue,Ve,ii;jQuery(X).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-content" data-key="${null==d||null===(Ue=d.test.matching)||void 0===Ue?void 0:Ue.key}"><div class="ondrag-item" data-key="${null!==(Ve=null==d||null===(ii=d.test)||void 0===ii||null===(ii=ii.matching)||void 0===ii?void 0:ii.key)&&void 0!==Ve?Ve:"KIEN"}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${a}</div></div></div></div>`);break;case"fill":var wt;((null===(wt=d.html)||void 0===wt?void 0:wt.fillKeywords)||[]).forEach(m=>{var y=`<input type="text" maxlength="128" style="display:inline-block;width:100px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:border-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:inherit;" data-key="${m.replace(/[^a-zA-Z0-9]+/gm,"")}"/>`;a=a.replace(new RegExp(m.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),y)}),jQuery(X).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${a}</div></div></div>`);break;case"speech":jQuery(X).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":var D,i,n,r,o;jQuery(X).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="${null!==(D=null!==(i=d.image)&&void 0!==i&&i.path?(null===(n=C.icdt.config)||void 0===n?void 0:n.readfileuploadurl)+(null===(r=d.image)||void 0===r?void 0:r.path):null===(o=d.image)||void 0===o?void 0:o.url)&&void 0!==D?D:""}" style="width:100%;height:100%;display:block;"/></div>`)}jQuery(X).find("img[path],video[path],iframe[path]").each((m,y)=>{var g,O;y.setAttribute("src",(null!==(g=null===(O=C.icdt.config)||void 0===O?void 0:O.readfileuploadurl)&&void 0!==g?g:"")+y.getAttribute("path")),y.removeAttribute("path")})}}}},Ft=(X,F,d,at)=>{let mt=jQuery(at||C.icdt.target).find("#"+X).get(0);return mt||(mt=window.document.createElementNS("http://www.w3.org/2000/svg",F),mt.setAttribute("id",X),jQuery(mt).appendTo(at||C.icdt.target)),jQuery(mt).attr((null==d?void 0:d.attribute)||{}),jQuery(mt).css((null==d?void 0:d.style)||{}),mt},Nt=(X,F)=>{let d=(0,k.v)(2),at={fill:h.S3.fill,stroke:h.S3.stroke,"stroke-width":(0,k.v)(h.S3.strokeWidth)};return[{element:Ft("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:F.x-d,y:F.y-d,width:F.width+2*d,height:F.height+2*d},at)},X),posType:"rect-center"}]},dt=(X,F)=>{let{size:d}=F,at=(0,k.v)(1),mt=(0,k.v)(2),Pt=(0,k.v)(5),Gt={stroke:h.NV.stroke,"stroke-width":(0,k.v)(h.NV.strokeWidth),"stroke-linecap":h.NV.strokeLinecap},Xt={fill:h.Mo.fill,stroke:h.Mo.stroke,"stroke-width":(0,k.v)(h.Mo.strokeWidth)},Ht={fill:h.In.fill,stroke:h.In.stroke,"stroke-width":(0,k.v)(h.In.strokeWidth),width:(0,k.v)(h.In.width),height:(0,k.v)(h.In.height)};return Ft("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:d.x-at,y1:d.y,x2:d.x-at,y2:d.y+d.height},Gt)},X),Ft("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:d.x,y1:d.y-at,x2:d.x+d.width,y2:d.y-at},Gt)},X),Ft("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:d.x+d.width+at,y1:d.y,x2:d.x+d.width+at,y2:d.y+d.height},Gt)},X),Ft("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:d.x,y1:d.y+d.height+at,x2:d.x+d.width,y2:d.y+d.height+at},Gt)},X),[{element:Ft("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:d.x,y:d.y,width:d.width,height:d.height},Xt),style:{cursor:"move"}},X),posType:"rect-center"},{element:Ft("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:d.x-Pt,y:d.y-Pt},Ht),style:{cursor:"nw-resize"}},X),posType:"rect-top-left"},{element:Ft("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:d.x+d.width-mt,y:d.y-Pt},Ht),style:{cursor:"ne-resize"}},X),posType:"rect-top-right"},{element:Ft("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:d.x-Pt,y:d.y+d.height-mt},Ht),style:{cursor:"sw-resize"}},X),posType:"rect-bottom-left"},{element:Ft("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:d.x+d.width-mt,y:d.y+d.height-mt},Ht),style:{cursor:"se-resize"}},X),posType:"rect-bottom-right"},{element:Ft("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:d.x+d.width/2-mt-at,y:d.y-Pt},Ht),style:{cursor:"n-resize"}},X),posType:"rect-top"},{element:Ft("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:d.x+d.width-mt,y:d.y+d.height/2-mt-at},Ht),style:{cursor:"e-resize"}},X),posType:"rect-right"},{element:Ft("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:d.x+d.width/2-mt-at,y:d.y+d.height-mt},Ht),style:{cursor:"s-resize"}},X),posType:"rect-bottom"},{element:Ft("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:d.x-Pt,y:d.y+d.height/2-mt-at},Ht),style:{cursor:"w-resize"}},X),posType:"rect-left"}]},W=(X,F,d)=>{let at=(0,k.v)(1),mt={stroke:h.NV.stroke,"stroke-width":(0,k.v)(h.NV.strokeWidth),"stroke-linecap":h.NV.strokeLinecap},Pt={fill:h.Mo.fill,stroke:h.Mo.stroke,"stroke-width":(0,k.v)(h.Mo.strokeWidth)},Gt={fill:h.dt.fill,stroke:h.dt.stroke,"stroke-width":(0,k.v)(h.dt.strokeWidth)},ee=(Ft("icdt-temp-select-line-left","line",{attribute:Object.assign({x1:d.x-at,y1:d.y,x2:d.x-at,y2:d.y+d.height},mt)},X),Ft("icdt-temp-select-line-top","line",{attribute:Object.assign({x1:d.x,y1:d.y-at,x2:d.x+d.width,y2:d.y-at},mt)},X),Ft("icdt-temp-select-line-right","line",{attribute:Object.assign({x1:d.x+d.width+at,y1:d.y,x2:d.x+d.width+at,y2:d.y+d.height},mt)},X),Ft("icdt-temp-select-line-bottom","line",{attribute:Object.assign({x1:d.x,y1:d.y+d.height+at,x2:d.x+d.width,y2:d.y+d.height+at},mt)},X),Ft("icdt-temp-select-rect-center","rect",{attribute:Object.assign({x:d.x,y:d.y,width:d.width,height:d.height},Pt)},X));return F.forEach(Y=>{let{size:c}=Y;Ft("icdt-temp-select-rect-node-"+Y.id,"rect",{attribute:Object.assign({x:c.x,y:c.y,width:c.width,height:c.height},Gt)},X)}),[{element:ee,posType:"rect-center"}]},_t=(X,F)=>{let d=(0,k.v)(1),at={stroke:h.NV.stroke,"stroke-width":(0,k.v)(h.NV.strokeWidth),"stroke-linecap":h.NV.strokeLinecap},mt={fill:h.Mo.fill,stroke:h.Mo.stroke,"stroke-width":(0,k.v)(h.Mo.strokeWidth)};return Ft("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:F.x-d,y1:F.y,x2:F.x-d,y2:F.y+F.height},at)},X),Ft("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:F.x,y1:F.y-d,x2:F.x+F.width,y2:F.y-d},at)},X),Ft("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:F.x+F.width+d,y1:F.y,x2:F.x+F.width+d,y2:F.y+F.height},at)},X),Ft("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:F.x,y1:F.y+F.height+d,x2:F.x+F.width,y2:F.y+F.height+d},at)},X),[{element:Ft("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:F.x,y:F.y,width:F.width,height:F.height},mt)},X),posType:"rect-center"}]},Ot=(X,F)=>((0,k.v)(-1),(0,k.v)(h.h8.strokeWidth),(0,k.v)(h.h8.strokeDasharray),Ft("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:F.x,y:F.y,width:F.width,height:F.height,class:"cursor-draw"},{fill:h.MA.fill})},X),[]),St=(X,F)=>{let d={fill:h.k0.fill,stroke:h.k0.stroke,"stroke-width":(0,k.v)(h.k0.strokeWidth),"stroke-dasharray":(0,k.v)(h.k0.strokeDasharray)};jQuery(X).empty(),F.forEach(at=>{var mt,Pt;let{size:Gt}=at;if(!at.idx)return;Ft("icdt-temp-index-rect-node-"+at.id,"rect",{attribute:Object.assign({x:Gt.x-5,y:Gt.y-5,width:Gt.width+10,height:Gt.height+10},d)},X);let{element:Xt}=(0,u.e)(Math.ceil(1e9*Math.random()),{size:{x:Gt.x-76,y:Gt.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:`<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Th\u1ee9 t\u1ef1 xu\u1ea5t hi\u1ec7n">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="${null!==(mt=at.idx)&&void 0!==mt?mt:0}" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Th\u1eddi gian \u0111\u1ee3i(s), n\u1ebfu gi\xe1 tr\u1ecb = 0 s\u1ebd chuy\u1ec3n sang \u0111\u1ee3i ho\xe0n t\u1ea5t ho\u1ea1t \u0111\u1ed9ng v\xe0 \xe2m thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="${null!==(Pt=at.time)&&void 0!==Pt?Pt:0}" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="H\u1ee7y thi\u1ebft l\u1eadp" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>`}}},X);Xt.classList.add("node-input"),jQuery(Xt).on("change",'input[name="idx"]',Ht=>{var At;at.idx=parseInt(null!==(At=Ht.target.value)&&void 0!==At?At:"0")}).on("change",'input[name="time"]',Ht=>{var At;at.time=parseFloat(null!==(At=Ht.target.value)&&void 0!==At?At:"0")}).on("click",'button[name="remove"]',Ht=>{at.idx=0,at.time=null,St(X,F)})})},it=(X,F)=>{var d,at,mt,Pt,Gt,Xt;let{color:Ht,opacity:At,path:pt,url:ee,base64:Y}=null!==(d=null==F||null===(at=F.svg)||void 0===at?void 0:at.background)&&void 0!==d?d:{},{x:c,y:Q,width:gt,height:ut}=null!==(mt=null==F||null===(Pt=F.svg)||void 0===Pt?void 0:Pt.viewBox)&&void 0!==mt?mt:{x:0,y:0,width:0,height:0};(0,K.$)(void 0,{size:{x:0,y:(0,k.v)(-21),width:gt,height:ut},attribute:{fill:"#999",fontSize:(0,k.v)(14),class:"hide-on-viewer"},source:{type:"text",text:{textContent:null!==(Gt=null!==(Xt=null==F?void 0:F.name)&&void 0!==Xt?Xt:null==F?void 0:F.code)&&void 0!==Gt?Gt:void 0}}},X),(0,A.f)(void 0,{size:{x:c,y:Q,width:gt,height:ut},attribute:{fill:"#fff",stroke:"#999",strokeWidth:(0,k.v)(1),strokeDasharray:(0,k.v)(10),class:"hide-on-viewer"}},X),Ht&&(0,A.f)(void 0,{size:{x:c,y:Q,width:gt,height:ut},attribute:{fill:Ht,fillOpacity:At}},X),pt&&(0,Z.G)(void 0,{size:{x:c,y:Q,width:gt,height:ut},source:{type:"image",image:{path:pt,url:ee,base64:Y}}},X)},$t=(X,F,d)=>{var at;switch(jQuery(X).empty(),null===(at=F.test)||void 0===at?void 0:at.type){case"truefalse":{var mt,Pt,Gt,Xt;let It=null==F||null===(mt=F.test)||void 0===mt||null===(mt=mt.answer)||void 0===mt||null===(mt=mt.truefalse)||void 0===mt?void 0:mt.value,Ct=null===(Pt=F.svg)||void 0===Pt?void 0:Pt.nodes.find(kt=>{var ht;return"submit"==(null===(ht=kt.source)||void 0===ht||null===(ht=ht.test)||void 0===ht?void 0:ht.type)});null===(Gt=F.svg)||void 0===Gt||Gt.nodes.filter(kt=>{var ht;return"truefalse"==(null===(ht=kt.source)||void 0===ht||null===(ht=ht.test)||void 0===ht?void 0:ht.type)&&(kt.id!=It||!Ct)}).forEach(kt=>{var ht;let{x:Jt,y:fe,width:ne,height:re}=null!==(ht=null==kt?void 0:kt.size)&&void 0!==ht?ht:{x:0,y:0,width:0,height:0};(0,_._)(Math.ceil(1e9*Math.random()),{size:{x:Jt-.5,y:fe-.5,width:ne+1,height:re+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},X)}),null!=F&&null!==(Xt=F.test)&&void 0!==Xt&&null!==(Xt=Xt.answer)&&void 0!==Xt&&Xt.truefalse&&It&&Ct&&(kt=>{let ht=P.$.findNode(It),{x:Jt,y:fe,width:ne,height:re}=null!==(kt=null==ht?void 0:ht.size)&&void 0!==kt?kt:{x:0,y:0,width:0,height:0};(0,_._)(Math.ceil(1e9*Math.random()),{size:{x:Jt-2,y:fe-2,width:ne+4,height:re+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},X)})();break}case"singlechoice":{var Ht,At,pt,ee;let It=null==F||null===(Ht=F.test)||void 0===Ht||null===(Ht=Ht.answer)||void 0===Ht||null===(Ht=Ht.singlechoice)||void 0===Ht?void 0:Ht.value,Ct=null===(At=F.svg)||void 0===At?void 0:At.nodes.find(kt=>{var ht;return"submit"==(null===(ht=kt.source)||void 0===ht||null===(ht=ht.test)||void 0===ht?void 0:ht.type)});null===(pt=F.svg)||void 0===pt||pt.nodes.filter(kt=>{var ht;return"singlechoice"==(null===(ht=kt.source)||void 0===ht||null===(ht=ht.test)||void 0===ht?void 0:ht.type)&&(kt.id!=It||!Ct)}).forEach(kt=>{var ht;let{x:Jt,y:fe,width:ne,height:re}=null!==(ht=null==kt?void 0:kt.size)&&void 0!==ht?ht:{x:0,y:0,width:0,height:0};(0,_._)(Math.ceil(1e9*Math.random()),{size:{x:Jt-.5,y:fe-.5,width:ne+1,height:re+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},X)}),null!=F&&null!==(ee=F.test)&&void 0!==ee&&null!==(ee=ee.answer)&&void 0!==ee&&ee.singlechoice&&It&&Ct&&(kt=>{let ht=P.$.findNode(It),{x:Jt,y:fe,width:ne,height:re}=null!==(kt=null==ht?void 0:ht.size)&&void 0!==kt?kt:{x:0,y:0,width:0,height:0};(0,_._)(Math.ceil(1e9*Math.random()),{size:{x:Jt-2,y:fe-2,width:ne+4,height:re+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},X)})();break}case"multichoice":{var Y,c,Q,gt,ut;let It=null!==(Y=null==F||null===(c=F.test)||void 0===c||null===(c=c.answer)||void 0===c||null===(c=c.multichoice)||void 0===c?void 0:c.map(kt=>kt.value))&&void 0!==Y?Y:[],Ct=null===(Q=F.svg)||void 0===Q?void 0:Q.nodes.find(kt=>{var ht;return"submit"==(null===(ht=kt.source)||void 0===ht||null===(ht=ht.test)||void 0===ht?void 0:ht.type)});var q;null===(gt=F.svg)||void 0===gt||gt.nodes.filter(kt=>{var ht;return!("multichoice"!=(null===(ht=kt.source)||void 0===ht||null===(ht=ht.test)||void 0===ht?void 0:ht.type)||It.includes(kt.id)&&Ct)}).forEach(kt=>{var ht;let{x:Jt,y:fe,width:ne,height:re}=null!==(ht=null==kt?void 0:kt.size)&&void 0!==ht?ht:{x:0,y:0,width:0,height:0};(0,A.f)(Math.ceil(1e9*Math.random()),{size:{x:Jt-.5,y:fe-.5,width:ne+1,height:re+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},X)}),null!=F&&null!==(ut=F.test)&&void 0!==ut&&null!==(ut=ut.answer)&&void 0!==ut&&ut.multichoice&&It.length&&Ct&&(null==F||null===(q=F.test)||void 0===q||null===(q=q.answer)||void 0===q||q.multichoice.forEach(kt=>{var ht;let zt=P.$.findNode(kt.value),{x:fe,y:ne,width:re,height:we}=null!==(ht=null==zt?void 0:zt.size)&&void 0!==ht?ht:{x:0,y:0,width:0,height:0};(0,A.f)(Math.ceil(1e9*Math.random()),{size:{x:fe-2,y:ne-2,width:re+4,height:we+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},X)}));break}case"fill":var H,rt;null!=F&&null!==(H=F.test)&&void 0!==H&&null!==(H=H.answer)&&void 0!==H&&H.fill&&(null==F||null===(rt=F.test)||void 0===rt||null===(rt=rt.answer)||void 0===rt||rt.fill.forEach(It=>{jQuery("#"+d.id).find(`input[type="text"][data-key="${It.key}"]`).val(It.value)}));break;case"matching":var L,et,Et,Rt;if(null!=F&&null!==(L=F.test)&&void 0!==L&&null!==(L=L.answer)&&void 0!==L&&L.matching)if("matching-empty"==(null===(et=d.source)||void 0===et||null===(et=et.test)||void 0===et?void 0:et.type))null==F||null===(Rt=F.test)||void 0===Rt||null===(Rt=Rt.answer)||void 0===Rt||Rt.matching.filter(It=>{var Ct;return It.key==(null===(Ct=d.source)||void 0===Ct||null===(Ct=Ct.test)||void 0===Ct||null===(Ct=Ct.matching)||void 0===Ct?void 0:Ct.key)}).forEach(It=>{$(`foreignObject .ondrop-here[data-type2="matching-content"][data-key="${It.value}"] .ondrag-item`).appendTo($(`foreignObject#${d.id} .ondrop-here[data-type2="matching-empty"][data-key="${It.key}"]`))});else if("matching-content"==(null===(Et=d.source)||void 0===Et||null===(Et=Et.test)||void 0===Et?void 0:Et.type)){var bt;null==F||null===(bt=F.test)||void 0===bt||null===(bt=bt.answer)||void 0===bt||bt.matching.filter(It=>{var Ct;return It.value==(null===(Ct=d.source)||void 0===Ct||null===(Ct=Ct.test)||void 0===Ct||null===(Ct=Ct.matching)||void 0===Ct?void 0:Ct.key)}).forEach(It=>{$(`foreignObject#${d.id} .ondrop-here[data-type2="matching-content"][data-key="${It.value}"] .ondrag-item`).appendTo($(`foreignObject .ondrop-here[data-type2="matching-empty"][data-key="${It.key}"]:empty`))})}}}},370:(de,Dt,p)=>{p.d(Dt,{e:()=>ot});const ot=b=>{switch(null==b?void 0:b.type){case 901:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+b.readfileuploadurl+b.path;case 902:return"assets/iframe/lib/mk-audio-player/player.html?url="+b.readfileuploadurl+b.path;case 903:return"assets/iframe/lib/mk-video-player/player.html?url="+b.readfileuploadurl+b.path;case 908:return"https://view.officeapps.live.com/op/view.aspx?src="+b.readfileuploadurl+b.path;case 909:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+b.readfileuploadurl+b.path;case 906:case 911:case 910:return""+b.readfileuploadurl+b.path;case 905:case 912:var v;return"imsmanifest.xml"==(null===(v=b.path)||void 0===v||null===(v=v.split("/"))||void 0===v?void 0:v.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+b.readfileuploadurl+b.path:""+b.readfileuploadurl+b.path;case 907:case 900:return""+b.readfileuploadurl+b.path;case 904:switch(b.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+b.url;case 1002:var R;return null!==(R=j(b.url))&&void 0!==R?R:"";case 1005:var M;return null!==(M=b.url)&&void 0!==M?M:"";default:var h;return null!==(h=b.url)&&void 0!==h?h:""}default:return""+b.readfileuploadurl+b.path}},j=b=>{let v=yt(b);return v?"https://www.youtube.com/embed/"+v+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},yt=b=>{let v=null==b?void 0:b.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return v&&v.length>=2?v[1]:null}},511:(de,Dt,p)=>{function T(){}function E(t){return null==t?T:function(){return this.querySelector(t)}}function yt(){return[]}function b(t){return null==t?yt:function(){return this.querySelectorAll(t)}}function M(t){return function(){return this.matches(t)}}function h(t){return function(e){return e.matches(t)}}p.d(Dt,{$0Z:()=>aa,jvg:()=>la});var C=Array.prototype.find;function A(){return this.firstElementChild}var _=Array.prototype.filter;function P(){return Array.from(this.children)}function V(t){return new Array(t.length)}function J(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function vt(t,e,l,s,f,x){for(var G,S=0,U=e.length,lt=x.length;S<lt;++S)(G=e[S])?(G.__data__=x[S],s[S]=G):l[S]=new J(t,x[S]);for(;S<U;++S)(G=e[S])&&(f[S]=G)}function Mt(t,e,l,s,f,x,S){var G,U,Yt,lt=new Map,ft=e.length,Ut=x.length,Wt=new Array(ft);for(G=0;G<ft;++G)(U=e[G])&&(Wt[G]=Yt=S.call(U,U.__data__,G,e)+"",lt.has(Yt)?f[G]=U:lt.set(Yt,U));for(G=0;G<Ut;++G)Yt=S.call(t,x[G],G,x)+"",(U=lt.get(Yt))?(s[G]=U,U.__data__=x[G],lt.delete(Yt)):l[G]=new J(t,x[G]);for(G=0;G<ft;++G)(U=e[G])&&lt.get(Wt[G])===U&&(f[G]=U)}function Kt(t){return t.__data__}function Ft(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function St(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}J.prototype={constructor:J,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var mt="http://www.w3.org/1999/xhtml";const Pt={svg:"http://www.w3.org/2000/svg",xhtml:mt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Gt(t){var e=t+="",l=e.indexOf(":");return l>=0&&"xmlns"!==(e=t.slice(0,l))&&(t=t.slice(l+1)),Pt.hasOwnProperty(e)?{space:Pt[e],local:t}:t}function Xt(t){return function(){this.removeAttribute(t)}}function Ht(t){return function(){this.removeAttributeNS(t.space,t.local)}}function At(t,e){return function(){this.setAttribute(t,e)}}function pt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ee(t,e){return function(){var l=e.apply(this,arguments);null==l?this.removeAttribute(t):this.setAttribute(t,l)}}function Y(t,e){return function(){var l=e.apply(this,arguments);null==l?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,l)}}function Q(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function gt(t){return function(){this.style.removeProperty(t)}}function ut(t,e,l){return function(){this.style.setProperty(t,e,l)}}function q(t,e,l){return function(){var s=e.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,l)}}function rt(t,e){return t.style.getPropertyValue(e)||Q(t).getComputedStyle(t,null).getPropertyValue(e)}function L(t){return function(){delete this[t]}}function et(t,e){return function(){this[t]=e}}function Et(t,e){return function(){var l=e.apply(this,arguments);null==l?delete this[t]:this[t]=l}}function bt(t){return t.trim().split(/^|\s+/)}function It(t){return t.classList||new Ct(t)}function Ct(t){this._node=t,this._names=bt(t.getAttribute("class")||"")}function kt(t,e){for(var l=It(t),s=-1,f=e.length;++s<f;)l.add(e[s])}function ht(t,e){for(var l=It(t),s=-1,f=e.length;++s<f;)l.remove(e[s])}function zt(t){return function(){kt(this,t)}}function Jt(t){return function(){ht(this,t)}}function fe(t,e){return function(){(e.apply(this,arguments)?kt:ht)(this,t)}}function re(){this.textContent=""}function we(t){return function(){this.textContent=t}}function Qe(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Pe(){this.innerHTML=""}function Je(t){return function(){this.innerHTML=t}}function Ze(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Ee(){this.nextSibling&&this.parentNode.appendChild(this)}function De(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ye(t){return function(){var e=this.ownerDocument,l=this.namespaceURI;return l===mt&&e.documentElement.namespaceURI===mt?e.createElement(t):e.createElementNS(l,t)}}function qe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ue(t){var e=Gt(t);return(e.local?qe:Ye)(e)}function ii(){return null}function D(){var t=this.parentNode;t&&t.removeChild(this)}function n(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function r(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function g(t){return function(){var e=this.__on;if(e){for(var x,l=0,s=-1,f=e.length;l<f;++l)x=e[l],t.type&&x.type!==t.type||x.name!==t.name?e[++s]=x:this.removeEventListener(x.type,x.listener,x.options);++s?e.length=s:delete this.__on}}}function O(t,e,l){return function(){var f,s=this.__on,x=function m(t){return function(e){t.call(this,e,this.__data__)}}(e);if(s)for(var S=0,G=s.length;S<G;++S)if((f=s[S]).type===t.type&&f.name===t.name)return this.removeEventListener(f.type,f.listener,f.options),this.addEventListener(f.type,f.listener=x,f.options=l),void(f.value=e);this.addEventListener(t.type,x,l),f={type:t.type,name:t.name,value:e,listener:x,options:l},s?s.push(f):this.__on=[f]}}function z(t,e,l){var s=Q(t),f=s.CustomEvent;"function"==typeof f?f=new f(e,l):(f=s.document.createEvent("Event"),l?(f.initEvent(e,l.bubbles,l.cancelable),f.detail=l.detail):f.initEvent(e,!1,!1)),t.dispatchEvent(f)}function N(t,e){return function(){return z(this,t,e)}}function st(t,e){return function(){return z(this,t,e.apply(this,arguments))}}Ct.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var jt=[null];function Qt(t,e){this._groups=t,this._parents=e}function ye(){return new Qt([[document.documentElement]],jt)}Qt.prototype=ye.prototype={constructor:Qt,select:function ot(t){"function"!=typeof t&&(t=E(t));for(var e=this._groups,l=e.length,s=new Array(l),f=0;f<l;++f)for(var U,lt,x=e[f],S=x.length,G=s[f]=new Array(S),ft=0;ft<S;++ft)(U=x[ft])&&(lt=t.call(U,U.__data__,ft,x))&&("__data__"in U&&(lt.__data__=U.__data__),G[ft]=lt);return new Qt(s,this._parents)},selectAll:function R(t){t="function"==typeof t?function v(t){return function(){return function j(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):b(t);for(var e=this._groups,l=e.length,s=[],f=[],x=0;x<l;++x)for(var U,S=e[x],G=S.length,lt=0;lt<G;++lt)(U=S[lt])&&(s.push(t.call(U,U.__data__,lt,S)),f.push(U));return new Qt(s,f)},selectChild:function Z(t){return this.select(null==t?A:function k(t){return function(){return C.call(this.children,t)}}("function"==typeof t?t:h(t)))},selectChildren:function K(t){return this.selectAll(null==t?P:function u(t){return function(){return _.call(this.children,t)}}("function"==typeof t?t:h(t)))},filter:function B(t){"function"!=typeof t&&(t=M(t));for(var e=this._groups,l=e.length,s=new Array(l),f=0;f<l;++f)for(var U,x=e[f],S=x.length,G=s[f]=[],lt=0;lt<S;++lt)(U=x[lt])&&t.call(U,U.__data__,lt,x)&&G.push(U);return new Qt(s,this._parents)},data:function te(t,e){if(!arguments.length)return Array.from(this,Kt);var l=e?Mt:vt,s=this._parents,f=this._groups;"function"!=typeof t&&(t=function I(t){return function(){return t}}(t));for(var x=f.length,S=new Array(x),G=new Array(x),U=new Array(x),lt=0;lt<x;++lt){var ft=s[lt],Ut=f[lt],Wt=Ut.length,Yt=Ft(t.call(ft,ft&&ft.__data__,lt,s)),_e=Yt.length,Oe=G[lt]=new Array(_e),Bt=S[lt]=new Array(_e);l(ft,Ut,Oe,Bt,U[lt]=new Array(Wt),Yt,e);for(var ue,ve,ae=0,qt=0;ae<_e;++ae)if(ue=Oe[ae]){for(ae>=qt&&(qt=ae+1);!(ve=Bt[qt])&&++qt<_e;);ue._next=ve||null}}return(S=new Qt(S,s))._enter=G,S._exit=U,S},enter:function tt(){return new Qt(this._enter||this._groups.map(V),this._parents)},exit:function Nt(){return new Qt(this._exit||this._groups.map(V),this._parents)},join:function dt(t,e,l){var s=this.enter(),f=this,x=this.exit();return"function"==typeof t?(s=t(s))&&(s=s.selection()):s=s.append(t+""),null!=e&&(f=e(f))&&(f=f.selection()),null==l?x.remove():l(x),s&&f?s.merge(f).order():f},merge:function W(t){for(var e=t.selection?t.selection():t,l=this._groups,s=e._groups,f=l.length,S=Math.min(f,s.length),G=new Array(f),U=0;U<S;++U)for(var Yt,lt=l[U],ft=s[U],Ut=lt.length,Wt=G[U]=new Array(Ut),_e=0;_e<Ut;++_e)(Yt=lt[_e]||ft[_e])&&(Wt[_e]=Yt);for(;U<f;++U)G[U]=l[U];return new Qt(G,this._parents)},selection:function ge(){return this},order:function _t(){for(var t=this._groups,e=-1,l=t.length;++e<l;)for(var S,s=t[e],f=s.length-1,x=s[f];--f>=0;)(S=s[f])&&(x&&4^S.compareDocumentPosition(x)&&x.parentNode.insertBefore(S,x),x=S);return this},sort:function Ot(t){function e(Ut,Wt){return Ut&&Wt?t(Ut.__data__,Wt.__data__):!Ut-!Wt}t||(t=St);for(var l=this._groups,s=l.length,f=new Array(s),x=0;x<s;++x){for(var lt,S=l[x],G=S.length,U=f[x]=new Array(G),ft=0;ft<G;++ft)(lt=S[ft])&&(U[ft]=lt);U.sort(e)}return new Qt(f,this._parents).order()},call:function it(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function $t(){return Array.from(this)},node:function X(){for(var t=this._groups,e=0,l=t.length;e<l;++e)for(var s=t[e],f=0,x=s.length;f<x;++f){var S=s[f];if(S)return S}return null},size:function F(){let t=0;for(const e of this)++t;return t},empty:function d(){return!this.node()},each:function at(t){for(var e=this._groups,l=0,s=e.length;l<s;++l)for(var G,f=e[l],x=0,S=f.length;x<S;++x)(G=f[x])&&t.call(G,G.__data__,x,f);return this},attr:function c(t,e){var l=Gt(t);if(arguments.length<2){var s=this.node();return l.local?s.getAttributeNS(l.space,l.local):s.getAttribute(l)}return this.each((null==e?l.local?Ht:Xt:"function"==typeof e?l.local?Y:ee:l.local?pt:At)(l,e))},style:function H(t,e,l){return arguments.length>1?this.each((null==e?gt:"function"==typeof e?q:ut)(t,e,null==l?"":l)):rt(this.node(),t)},property:function Rt(t,e){return arguments.length>1?this.each((null==e?L:"function"==typeof e?Et:et)(t,e)):this.node()[t]},classed:function ne(t,e){var l=bt(t+"");if(arguments.length<2){for(var s=It(this.node()),f=-1,x=l.length;++f<x;)if(!s.contains(l[f]))return!1;return!0}return this.each(("function"==typeof e?fe:e?zt:Jt)(l,e))},text:function He(t){return arguments.length?this.each(null==t?re:("function"==typeof t?Qe:we)(t)):this.node().textContent},html:function ei(t){return arguments.length?this.each(null==t?Pe:("function"==typeof t?Ze:Je)(t)):this.node().innerHTML},raise:function Xe(){return this.each(Ee)},lower:function Ge(){return this.each(De)},append:function Ve(t){var e="function"==typeof t?t:Ue(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function wt(t,e){var l="function"==typeof t?t:Ue(t),s=null==e?ii:"function"==typeof e?e:E(e);return this.select(function(){return this.insertBefore(l.apply(this,arguments),s.apply(this,arguments)||null)})},remove:function i(){return this.each(D)},clone:function o(t){return this.select(t?r:n)},datum:function a(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function w(t,e,l){var f,S,s=function y(t){return t.trim().split(/^|\s+/).map(function(e){var l="",s=e.indexOf(".");return s>=0&&(l=e.slice(s+1),e=e.slice(0,s)),{type:e,name:l}})}(t+""),x=s.length;if(!(arguments.length<2)){for(G=e?O:g,f=0;f<x;++f)this.each(G(s[f],e,l));return this}var G=this.node().__on;if(G)for(var ft,U=0,lt=G.length;U<lt;++U)for(f=0,ft=G[U];f<x;++f)if((S=s[f]).type===ft.type&&S.name===ft.name)return ft.value},dispatch:function ct(t,e){return this.each(("function"==typeof e?st:N)(t,e))},[Symbol.iterator]:function*xt(){for(var t=this._groups,e=0,l=t.length;e<l;++e)for(var S,s=t[e],f=0,x=s.length;f<x;++f)(S=s[f])&&(yield S)}};const pe=ye;var me={value:()=>{}};function Se(){for(var s,t=0,e=arguments.length,l={};t<e;++t){if(!(s=arguments[t]+"")||s in l||/[\s.]/.test(s))throw new Error("illegal type: "+s);l[s]=[]}return new Ni(l)}function Ni(t){this._=t}function ar(t,e){for(var f,l=0,s=t.length;l<s;++l)if((f=t[l]).name===e)return f.value}function gn(t,e,l){for(var s=0,f=t.length;s<f;++s)if(t[s].name===e){t[s]=me,t=t.slice(0,s).concat(t.slice(s+1));break}return null!=l&&t.push({name:e,value:l}),t}Ni.prototype=Se.prototype={constructor:Ni,on:function(t,e){var f,l=this._,s=function lr(t,e){return t.trim().split(/^|\s+/).map(function(l){var s="",f=l.indexOf(".");if(f>=0&&(s=l.slice(f+1),l=l.slice(0,f)),l&&!e.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:s}})}(t+"",l),x=-1,S=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++x<S;)if(f=(t=s[x]).type)l[f]=gn(l[f],t.name,e);else if(null==e)for(f in l)l[f]=gn(l[f],t.name,null);return this}for(;++x<S;)if((f=(t=s[x]).type)&&(f=ar(l[f],t.name)))return f},copy:function(){var t={},e=this._;for(var l in e)t[l]=e[l].slice();return new Ni(t)},call:function(t,e){if((f=arguments.length-2)>0)for(var f,x,l=new Array(f),s=0;s<f;++s)l[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,f=(x=this._[t]).length;s<f;++s)x[s].value.apply(e,l)},apply:function(t,e,l){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],f=0,x=s.length;f<x;++f)s[f].value.apply(e,l)}};const or=Se;var Li,Si,yi=0,Ei=0,Oi=0,yn=1e3,Di=0,hi=0,ji=0,ki="object"==typeof performance&&performance.now?performance:Date,pn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Yi(){return hi||(pn(sr),hi=ki.now()+ji)}function sr(){hi=0}function Bi(){this._call=this._time=this._next=null}function mn(t,e,l){var s=new Bi;return s.restart(t,e,l),s}function _n(){hi=(Di=ki.now())+ji,yi=Ei=0;try{!function dr(){Yi(),++yi;for(var e,t=Li;t;)(e=hi-t._time)>=0&&t._call.call(void 0,e),t=t._next;--yi}()}finally{yi=0,function hr(){for(var t,l,e=Li,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(l=e._next,e._next=null,e=t?t._next=l:Li=l);Si=t,qi(s)}(),hi=0}}function ur(){var t=ki.now(),e=t-Di;e>yn&&(ji-=e,Di=t)}function qi(t){yi||(Ei&&(Ei=clearTimeout(Ei)),t-hi>24?(t<1/0&&(Ei=setTimeout(_n,t-ki.now()-ji)),Oi&&(Oi=clearInterval(Oi))):(Oi||(Di=ki.now(),Oi=setInterval(ur,yn)),yi=1,pn(_n)))}function wn(t,e,l){var s=new Bi;return s.restart(f=>{s.stop(),t(f+e)},e=null==e?0:+e,l),s}Bi.prototype=mn.prototype={constructor:Bi,restart:function(t,e,l){if("function"!=typeof t)throw new TypeError("callback is not a function");l=(null==l?Yi():+l)+(null==e?0:+e),!this._next&&Si!==this&&(Si?Si._next=this:Li=this,Si=this),this._call=t,this._time=l,qi()},stop:function(){this._call&&(this._call=null,this._time=1/0,qi())}};var cr=or("start","end","cancel","interrupt"),fr=[],bn=0,Ki=3;function Gi(t,e,l,s,f,x){var S=t.__transition;if(S){if(l in S)return}else t.__transition={};!function vr(t,e,l){var f,s=t.__transition;function S(lt){var ft,Ut,Wt,Yt;if(1!==l.state)return U();for(ft in s)if((Yt=s[ft]).name===l.name){if(Yt.state===Ki)return wn(S);4===Yt.state?(Yt.state=6,Yt.timer.stop(),Yt.on.call("interrupt",t,t.__data__,Yt.index,Yt.group),delete s[ft]):+ft<e&&(Yt.state=6,Yt.timer.stop(),Yt.on.call("cancel",t,t.__data__,Yt.index,Yt.group),delete s[ft])}if(wn(function(){l.state===Ki&&(l.state=4,l.timer.restart(G,l.delay,l.time),G(lt))}),l.state=2,l.on.call("start",t,t.__data__,l.index,l.group),2===l.state){for(l.state=Ki,f=new Array(Wt=l.tween.length),ft=0,Ut=-1;ft<Wt;++ft)(Yt=l.tween[ft].value.call(t,t.__data__,l.index,l.group))&&(f[++Ut]=Yt);f.length=Ut+1}}function G(lt){for(var ft=lt<l.duration?l.ease.call(null,lt/l.duration):(l.timer.restart(U),l.state=5,1),Ut=-1,Wt=f.length;++Ut<Wt;)f[Ut].call(t,ft);5===l.state&&(l.on.call("end",t,t.__data__,l.index,l.group),U())}function U(){for(var lt in l.state=6,l.timer.stop(),delete s[e],s)return;delete t.__transition}s[e]=l,l.timer=mn(function x(lt){l.state=1,l.timer.restart(S,l.delay,l.time),l.delay<=lt&&S(lt-l.delay)},0,l.time)}(t,l,{name:e,index:s,group:f,on:cr,tween:fr,time:x.time,delay:x.delay,duration:x.duration,ease:x.ease,timer:null,state:bn})}function en(t,e){var l=$e(t,e);if(l.state>bn)throw new Error("too late; already scheduled");return l}function ni(t,e){var l=$e(t,e);if(l.state>Ki)throw new Error("too late; already running");return l}function $e(t,e){var l=t.__transition;if(!l||!(l=l[e]))throw new Error("transition not found");return l}function di(t,e){return t=+t,e=+e,function(l){return t*(1-l)+e*l}}var Ui,On=180/Math.PI,nn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sn(t,e,l,s,f,x){var S,G,U;return(S=Math.sqrt(t*t+e*e))&&(t/=S,e/=S),(U=t*l+e*s)&&(l-=t*U,s-=e*U),(G=Math.sqrt(l*l+s*s))&&(l/=G,s/=G,U/=G),t*s<e*l&&(t=-t,e=-e,U=-U,S=-S),{translateX:f,translateY:x,rotate:Math.atan2(e,t)*On,skewX:Math.atan(U)*On,scaleX:S,scaleY:G}}function kn(t,e,l,s){function f(lt){return lt.length?lt.pop()+" ":""}return function(lt,ft){var Ut=[],Wt=[];return lt=t(lt),ft=t(ft),function x(lt,ft,Ut,Wt,Yt,_e){if(lt!==Ut||ft!==Wt){var Oe=Yt.push("translate(",null,e,null,l);_e.push({i:Oe-4,x:di(lt,Ut)},{i:Oe-2,x:di(ft,Wt)})}else(Ut||Wt)&&Yt.push("translate("+Ut+e+Wt+l)}(lt.translateX,lt.translateY,ft.translateX,ft.translateY,Ut,Wt),function S(lt,ft,Ut,Wt){lt!==ft?(lt-ft>180?ft+=360:ft-lt>180&&(lt+=360),Wt.push({i:Ut.push(f(Ut)+"rotate(",null,s)-2,x:di(lt,ft)})):ft&&Ut.push(f(Ut)+"rotate("+ft+s)}(lt.rotate,ft.rotate,Ut,Wt),function G(lt,ft,Ut,Wt){lt!==ft?Wt.push({i:Ut.push(f(Ut)+"skewX(",null,s)-2,x:di(lt,ft)}):ft&&Ut.push(f(Ut)+"skewX("+ft+s)}(lt.skewX,ft.skewX,Ut,Wt),function U(lt,ft,Ut,Wt,Yt,_e){if(lt!==Ut||ft!==Wt){var Oe=Yt.push(f(Yt)+"scale(",null,",",null,")");_e.push({i:Oe-4,x:di(lt,Ut)},{i:Oe-2,x:di(ft,Wt)})}else(1!==Ut||1!==Wt)&&Yt.push(f(Yt)+"scale("+Ut+","+Wt+")")}(lt.scaleX,lt.scaleY,ft.scaleX,ft.scaleY,Ut,Wt),lt=ft=null,function(Yt){for(var Bt,_e=-1,Oe=Wt.length;++_e<Oe;)Ut[(Bt=Wt[_e]).i]=Bt.x(Yt);return Ut.join("")}}}var _r=kn(function pr(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?nn:Sn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),wr=kn(function mr(t){return null!=t&&(Ui||(Ui=document.createElementNS("http://www.w3.org/2000/svg","g")),Ui.setAttribute("transform",t),t=Ui.transform.baseVal.consolidate())?Sn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):nn},", ",")",")");function br(t,e){var l,s;return function(){var f=ni(this,t),x=f.tween;if(x!==l)for(var S=0,G=(s=l=x).length;S<G;++S)if(s[S].name===e){(s=s.slice()).splice(S,1);break}f.tween=s}}function xr(t,e,l){var s,f;if("function"!=typeof l)throw new Error;return function(){var x=ni(this,t),S=x.tween;if(S!==s){f=(s=S).slice();for(var G={name:e,value:l},U=0,lt=f.length;U<lt;++U)if(f[U].name===e){f[U]=G;break}U===lt&&f.push(G)}x.tween=f}}function rn(t,e,l){var s=t._id;return t.each(function(){var f=ni(this,s);(f.value||(f.value={}))[e]=l.apply(this,arguments)}),function(f){return $e(f,s).value[e]}}function ln(t,e,l){t.prototype=e.prototype=l,l.constructor=t}function Tn(t,e){var l=Object.create(t.prototype);for(var s in e)l[s]=e[s];return l}function Ti(){}var Wi=1/.7,pi="\\s*([+-]?\\d+)\\s*",Ai="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ri="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Or=/^#([0-9a-f]{3,8})$/,Sr=new RegExp(`^rgb\\(${pi},${pi},${pi}\\)$`),kr=new RegExp(`^rgb\\(${ri},${ri},${ri}\\)$`),Tr=new RegExp(`^rgba\\(${pi},${pi},${pi},${Ai}\\)$`),Cr=new RegExp(`^rgba\\(${ri},${ri},${ri},${Ai}\\)$`),Ar=new RegExp(`^hsl\\(${Ai},${ri},${ri}\\)$`),Ir=new RegExp(`^hsla\\(${Ai},${ri},${ri},${Ai}\\)$`),Cn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function An(){return this.rgb().formatHex()}function In(){return this.rgb().formatRgb()}function Ii(t){var e,l;return t=(t+"").trim().toLowerCase(),(e=Or.exec(t))?(l=e[1].length,e=parseInt(e[1],16),6===l?Mn(e):3===l?new Be(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===l?Fi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===l?Fi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sr.exec(t))?new Be(e[1],e[2],e[3],1):(e=kr.exec(t))?new Be(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Tr.exec(t))?Fi(e[1],e[2],e[3],e[4]):(e=Cr.exec(t))?Fi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ar.exec(t))?Nn(e[1],e[2]/100,e[3]/100,1):(e=Ir.exec(t))?Nn(e[1],e[2]/100,e[3]/100,e[4]):Cn.hasOwnProperty(t)?Mn(Cn[t]):"transparent"===t?new Be(NaN,NaN,NaN,0):null}function Mn(t){return new Be(t>>16&255,t>>8&255,255&t,1)}function Fi(t,e,l,s){return s<=0&&(t=e=l=NaN),new Be(t,e,l,s)}function Qi(t,e,l,s){return 1===arguments.length?function Rr(t){return t instanceof Ti||(t=Ii(t)),t?new Be((t=t.rgb()).r,t.g,t.b,t.opacity):new Be}(t):new Be(t,e,l,null==s?1:s)}function Be(t,e,l,s){this.r=+t,this.g=+e,this.b=+l,this.opacity=+s}function Pn(){return`#${fi(this.r)}${fi(this.g)}${fi(this.b)}`}function Rn(){const t=Hi(this.opacity);return`${1===t?"rgb(":"rgba("}${ci(this.r)}, ${ci(this.g)}, ${ci(this.b)}${1===t?")":`, ${t})`}`}function Hi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ci(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function fi(t){return((t=ci(t))<16?"0":"")+t.toString(16)}function Nn(t,e,l,s){return s<=0?t=e=l=NaN:l<=0||l>=1?t=e=NaN:e<=0&&(t=NaN),new ti(t,e,l,s)}function Ln(t){if(t instanceof ti)return new ti(t.h,t.s,t.l,t.opacity);if(t instanceof Ti||(t=Ii(t)),!t)return new ti;if(t instanceof ti)return t;var e=(t=t.rgb()).r/255,l=t.g/255,s=t.b/255,f=Math.min(e,l,s),x=Math.max(e,l,s),S=NaN,G=x-f,U=(x+f)/2;return G?(S=e===x?(l-s)/G+6*(l<s):l===x?(s-e)/G+2:(e-l)/G+4,G/=U<.5?x+f:2-x-f,S*=60):G=U>0&&U<1?0:S,new ti(S,G,U,t.opacity)}function ti(t,e,l,s){this.h=+t,this.s=+e,this.l=+l,this.opacity=+s}function Dn(t){return(t=(t||0)%360)<0?t+360:t}function Vi(t){return Math.max(0,Math.min(1,t||0))}function an(t,e,l){return 255*(t<60?e+(l-e)*t/60:t<180?l:t<240?e+(l-e)*(240-t)/60:e)}function jn(t,e,l,s,f){var x=t*t,S=x*t;return((1-3*t+3*x-S)*e+(4-6*x+3*S)*l+(1+3*t+3*x-3*S)*s+S*f)/6}ln(Ti,Ii,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:An,formatHex:An,formatHex8:function Mr(){return this.rgb().formatHex8()},formatHsl:function Pr(){return Ln(this).formatHsl()},formatRgb:In,toString:In}),ln(Be,Qi,Tn(Ti,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new Be(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Be(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Be(ci(this.r),ci(this.g),ci(this.b),Hi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pn,formatHex:Pn,formatHex8:function Nr(){return`#${fi(this.r)}${fi(this.g)}${fi(this.b)}${fi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Rn,toString:Rn})),ln(ti,function Lr(t,e,l,s){return 1===arguments.length?Ln(t):new ti(t,e,l,null==s?1:s)},Tn(Ti,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new ti(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new ti(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,l=this.l,s=l+(l<.5?l:1-l)*e,f=2*l-s;return new Be(an(t>=240?t-240:t+120,f,s),an(t,f,s),an(t<120?t+240:t-120,f,s),this.opacity)},clamp(){return new ti(Dn(this.h),Vi(this.s),Vi(this.l),Hi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Hi(this.opacity);return`${1===t?"hsl(":"hsla("}${Dn(this.h)}, ${100*Vi(this.s)}%, ${100*Vi(this.l)}%${1===t?")":`, ${t})`}`}}));const Bn=t=>()=>t;function zn(t,e){var l=e-t;return l?function Kn(t,e){return function(l){return t+l*e}}(t,l):Bn(isNaN(t)?e:t)}const Gn=function t(e){var l=function Kr(t){return 1==(t=+t)?zn:function(e,l){return l-e?function Br(t,e,l){return t=Math.pow(t,l),e=Math.pow(e,l)-t,l=1/l,function(s){return Math.pow(t+s*e,l)}}(e,l,t):Bn(isNaN(e)?l:e)}}(e);function s(f,x){var S=l((f=Qi(f)).r,(x=Qi(x)).r),G=l(f.g,x.g),U=l(f.b,x.b),lt=zn(f.opacity,x.opacity);return function(ft){return f.r=S(ft),f.g=G(ft),f.b=U(ft),f.opacity=lt(ft),f+""}}return s.gamma=t,s}(1);function Un(t){return function(e){var S,G,l=e.length,s=new Array(l),f=new Array(l),x=new Array(l);for(S=0;S<l;++S)G=Qi(e[S]),s[S]=G.r||0,f[S]=G.g||0,x[S]=G.b||0;return s=t(s),f=t(f),x=t(x),G.opacity=1,function(U){return G.r=s(U),G.g=f(U),G.b=x(U),G+""}}}Un(function Dr(t){var e=t.length-1;return function(l){var s=l<=0?l=0:l>=1?(l=1,e-1):Math.floor(l*e),f=t[s],x=t[s+1];return jn((l-s/e)*e,s>0?t[s-1]:2*f-x,f,x,s<e-1?t[s+2]:2*x-f)}}),Un(function jr(t){var e=t.length;return function(l){var s=Math.floor(((l%=1)<0?++l:l)*e);return jn((l-s/e)*e,t[(s+e-1)%e],t[s%e],t[(s+1)%e],t[(s+2)%e])}});var on=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sn=new RegExp(on.source,"g");function Ur(t,e){var s,f,x,l=on.lastIndex=sn.lastIndex=0,S=-1,G=[],U=[];for(t+="",e+="";(s=on.exec(t))&&(f=sn.exec(e));)(x=f.index)>l&&(x=e.slice(l,x),G[S]?G[S]+=x:G[++S]=x),(s=s[0])===(f=f[0])?G[S]?G[S]+=f:G[++S]=f:(G[++S]=null,U.push({i:S,x:di(s,f)})),l=sn.lastIndex;return l<e.length&&(x=e.slice(l),G[S]?G[S]+=x:G[++S]=x),G.length<2?U[0]?function Gr(t){return function(e){return t(e)+""}}(U[0].x):function zr(t){return function(){return t}}(e):(e=U.length,function(lt){for(var Ut,ft=0;ft<e;++ft)G[(Ut=U[ft]).i]=Ut.x(lt);return G.join("")})}function Wn(t,e){var l;return("number"==typeof e?di:e instanceof Ii?Gn:(l=Ii(e))?(e=l,Gn):Ur)(t,e)}function Wr(t){return function(){this.removeAttribute(t)}}function Fr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qr(t,e,l){var s,x,f=l+"";return function(){var S=this.getAttribute(t);return S===f?null:S===s?x:x=e(s=S,l)}}function Hr(t,e,l){var s,x,f=l+"";return function(){var S=this.getAttributeNS(t.space,t.local);return S===f?null:S===s?x:x=e(s=S,l)}}function Vr(t,e,l){var s,f,x;return function(){var S,U,G=l(this);return null==G?void this.removeAttribute(t):(S=this.getAttribute(t))===(U=G+"")?null:S===s&&U===f?x:(f=U,x=e(s=S,G))}}function Jr(t,e,l){var s,f,x;return function(){var S,U,G=l(this);return null==G?void this.removeAttributeNS(t.space,t.local):(S=this.getAttributeNS(t.space,t.local))===(U=G+"")?null:S===s&&U===f?x:(f=U,x=e(s=S,G))}}function qr(t,e){var l,s;function f(){var x=e.apply(this,arguments);return x!==s&&(l=(s=x)&&function Yr(t,e){return function(l){this.setAttributeNS(t.space,t.local,e.call(this,l))}}(t,x)),l}return f._value=e,f}function $r(t,e){var l,s;function f(){var x=e.apply(this,arguments);return x!==s&&(l=(s=x)&&function Xr(t,e){return function(l){this.setAttribute(t,e.call(this,l))}}(t,x)),l}return f._value=e,f}function el(t,e){return function(){en(this,t).delay=+e.apply(this,arguments)}}function il(t,e){return e=+e,function(){en(this,t).delay=e}}function rl(t,e){return function(){ni(this,t).duration=+e.apply(this,arguments)}}function ll(t,e){return e=+e,function(){ni(this,t).duration=e}}var wl=pe.prototype.constructor;function Fn(t){return function(){this.style.removeProperty(t)}}var Bl=0;function ai(t,e,l,s){this._groups=t,this._parents=e,this._name=l,this._id=s}function Qn(){return++Bl}var oi=pe.prototype;ai.prototype=function Kl(t){return pe().transition(t)}.prototype={constructor:ai,select:function ml(t){var e=this._name,l=this._id;"function"!=typeof t&&(t=E(t));for(var s=this._groups,f=s.length,x=new Array(f),S=0;S<f;++S)for(var ft,Ut,G=s[S],U=G.length,lt=x[S]=new Array(U),Wt=0;Wt<U;++Wt)(ft=G[Wt])&&(Ut=t.call(ft,ft.__data__,Wt,G))&&("__data__"in ft&&(Ut.__data__=ft.__data__),lt[Wt]=Ut,Gi(lt[Wt],e,l,Wt,lt,$e(ft,l)));return new ai(x,this._parents,e,l)},selectAll:function _l(t){var e=this._name,l=this._id;"function"!=typeof t&&(t=b(t));for(var s=this._groups,f=s.length,x=[],S=[],G=0;G<f;++G)for(var ft,U=s[G],lt=U.length,Ut=0;Ut<lt;++Ut)if(ft=U[Ut]){for(var Yt,Wt=t.call(ft,ft.__data__,Ut,U),_e=$e(ft,l),Oe=0,Bt=Wt.length;Oe<Bt;++Oe)(Yt=Wt[Oe])&&Gi(Yt,e,l,Oe,Wt,_e);x.push(Wt),S.push(ft)}return new ai(x,S,e,l)},selectChild:oi.selectChild,selectChildren:oi.selectChildren,filter:function hl(t){"function"!=typeof t&&(t=M(t));for(var e=this._groups,l=e.length,s=new Array(l),f=0;f<l;++f)for(var U,x=e[f],S=x.length,G=s[f]=[],lt=0;lt<S;++lt)(U=x[lt])&&t.call(U,U.__data__,lt,x)&&G.push(U);return new ai(s,this._parents,this._name,this._id)},merge:function cl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,l=t._groups,s=e.length,x=Math.min(s,l.length),S=new Array(s),G=0;G<x;++G)for(var Wt,U=e[G],lt=l[G],ft=U.length,Ut=S[G]=new Array(ft),Yt=0;Yt<ft;++Yt)(Wt=U[Yt]||lt[Yt])&&(Ut[Yt]=Wt);for(;G<s;++G)S[G]=e[G];return new ai(S,this._parents,this._name,this._id)},selection:function bl(){return new wl(this._groups,this._parents)},transition:function Dl(){for(var t=this._name,e=this._id,l=Qn(),s=this._groups,f=s.length,x=0;x<f;++x)for(var U,S=s[x],G=S.length,lt=0;lt<G;++lt)if(U=S[lt]){var ft=$e(U,e);Gi(U,t,l,lt,S,{time:ft.time+ft.delay+ft.duration,delay:0,duration:ft.duration,ease:ft.ease})}return new ai(s,this._parents,t,l)},call:oi.call,nodes:oi.nodes,node:oi.node,size:oi.size,empty:oi.empty,each:oi.each,on:function gl(t,e){var l=this._id;return arguments.length<2?$e(this.node(),l).on.on(t):this.each(function vl(t,e,l){var s,f,x=function fl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var l=e.indexOf(".");return l>=0&&(e=e.slice(0,l)),!e||"start"===e})}(e)?en:ni;return function(){var S=x(this,t),G=S.on;G!==s&&(f=(s=G).copy()).on(e,l),S.on=f}}(l,t,e))},attr:function Zr(t,e){var l=Gt(t),s="transform"===l?wr:Wn;return this.attrTween(t,"function"==typeof e?(l.local?Jr:Vr)(l,s,rn(this,"attr."+t,e)):null==e?(l.local?Fr:Wr)(l):(l.local?Hr:Qr)(l,s,e))},attrTween:function tl(t,e){var l="attr."+t;if(arguments.length<2)return(l=this.tween(l))&&l._value;if(null==e)return this.tween(l,null);if("function"!=typeof e)throw new Error;var s=Gt(t);return this.tween(l,(s.local?qr:$r)(s,e))},style:function kl(t,e,l){var s="transform"==(t+="")?_r:Wn;return null==e?this.styleTween(t,function xl(t,e){var l,s,f;return function(){var x=rt(this,t),S=(this.style.removeProperty(t),rt(this,t));return x===S?null:x===l&&S===s?f:f=e(l=x,s=S)}}(t,s)).on("end.style."+t,Fn(t)):"function"==typeof e?this.styleTween(t,function Ol(t,e,l){var s,f,x;return function(){var S=rt(this,t),G=l(this),U=G+"";return null==G&&(this.style.removeProperty(t),U=G=rt(this,t)),S===U?null:S===s&&U===f?x:(f=U,x=e(s=S,G))}}(t,s,rn(this,"style."+t,e))).each(function Sl(t,e){var l,s,f,G,x="style."+e,S="end."+x;return function(){var U=ni(this,t),lt=U.on,ft=null==U.value[x]?G||(G=Fn(e)):void 0;(lt!==l||f!==ft)&&(s=(l=lt).copy()).on(S,f=ft),U.on=s}}(this._id,t)):this.styleTween(t,function El(t,e,l){var s,x,f=l+"";return function(){var S=rt(this,t);return S===f?null:S===s?x:x=e(s=S,l)}}(t,s,e),l).on("end.style."+t,null)},styleTween:function Al(t,e,l){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==e)return this.tween(s,null);if("function"!=typeof e)throw new Error;return this.tween(s,function Cl(t,e,l){var s,f;function x(){var S=e.apply(this,arguments);return S!==f&&(s=(f=S)&&function Tl(t,e,l){return function(s){this.style.setProperty(t,e.call(this,s),l)}}(t,S,l)),s}return x._value=e,x}(t,e,null==l?"":l))},text:function Pl(t){return this.tween("text","function"==typeof t?function Ml(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(rn(this,"text",t)):function Il(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Ll(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function Nl(t){var e,l;function s(){var f=t.apply(this,arguments);return f!==l&&(e=(l=f)&&function Rl(t){return function(e){this.textContent=t.call(this,e)}}(f)),e}return s._value=t,s}(t))},remove:function pl(){return this.on("end.remove",function yl(t){return function(){var e=this.parentNode;for(var l in this.__transition)if(+l!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function Er(t,e){var l=this._id;if(t+="",arguments.length<2){for(var S,s=$e(this.node(),l).tween,f=0,x=s.length;f<x;++f)if((S=s[f]).name===t)return S.value;return null}return this.each((null==e?br:xr)(l,t,e))},delay:function nl(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?el:il)(e,t)):$e(this.node(),e).delay},duration:function al(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rl:ll)(e,t)):$e(this.node(),e).duration},ease:function sl(t){var e=this._id;return arguments.length?this.each(function ol(t,e){if("function"!=typeof e)throw new Error;return function(){ni(this,t).ease=e}}(e,t)):$e(this.node(),e).ease},easeVarying:function ul(t){if("function"!=typeof t)throw new Error;return this.each(function dl(t,e){return function(){var l=e.apply(this,arguments);if("function"!=typeof l)throw new Error;ni(this,t).ease=l}}(this._id,t))},end:function jl(){var t,e,l=this,s=l._id,f=l.size();return new Promise(function(x,S){var G={value:S},U={value:function(){0==--f&&x()}};l.each(function(){var lt=ni(this,s),ft=lt.on;ft!==t&&((e=(t=ft).copy())._.cancel.push(G),e._.interrupt.push(G),e._.end.push(U)),lt.on=e}),0===f&&x()})},[Symbol.iterator]:oi[Symbol.iterator]};var Gl={time:null,delay:0,duration:250,ease:function zl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ul(t,e){for(var l;!(l=t.__transition)||!(l=l[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return l}pe.prototype.interrupt=function yr(t){return this.each(function(){!function gr(t,e){var s,f,S,l=t.__transition,x=!0;if(l){for(S in e=null==e?null:e+"",l)(s=l[S]).name===e?(f=s.state>2&&s.state<5,s.state=6,s.timer.stop(),s.on.call(f?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete l[S]):x=!1;x&&delete t.__transition}}(this,t)})},pe.prototype.transition=function Wl(t){var e,l;t instanceof ai?(e=t._id,t=t._name):(e=Qn(),(l=Gl).time=Yi(),t=null==t?null:t+"");for(var s=this._groups,f=s.length,x=0;x<f;++x)for(var U,S=s[x],G=S.length,lt=0;lt<G;++lt)(U=S[lt])&&Gi(U,t,e,lt,S,l||Ul(U,e));return new ai(s,this._parents,t,e)};Math;function Mi(t){return{type:t}}function wi(t){return function(){return t}}function Yn(t){this._context=t}function ql(t){return new Yn(t)}["w","e"].map(Mi),["n","s"].map(Mi),["n","w","e","s","nw","ne","sw","se"].map(Mi),Yn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const fn=Math.PI,vn=2*fn,vi=1e-6,$l=vn-vi;function qn(t){this._+=t[0];for(let e=1,l=t.length;e<l;++e)this._+=arguments[e]+t[e]}class Xi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?qn:function ta(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return qn;const l=10**e;return function(s){this._+=s[0];for(let f=1,x=s.length;f<x;++f)this._+=Math.round(arguments[f]*l)/l+s[f]}}(e)}moveTo(e,l){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+l}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,l){this._append`L${this._x1=+e},${this._y1=+l}`}quadraticCurveTo(e,l,s,f){this._append`Q${+e},${+l},${this._x1=+s},${this._y1=+f}`}bezierCurveTo(e,l,s,f,x,S){this._append`C${+e},${+l},${+s},${+f},${this._x1=+x},${this._y1=+S}`}arcTo(e,l,s,f,x){if(e=+e,l=+l,s=+s,f=+f,(x=+x)<0)throw new Error(`negative radius: ${x}`);let S=this._x1,G=this._y1,U=s-e,lt=f-l,ft=S-e,Ut=G-l,Wt=ft*ft+Ut*Ut;if(null===this._x1)this._append`M${this._x1=e},${this._y1=l}`;else if(Wt>vi)if(Math.abs(Ut*U-lt*ft)>vi&&x){let Yt=s-S,_e=f-G,Oe=U*U+lt*lt,Bt=Yt*Yt+_e*_e,Lt=Math.sqrt(Oe),ae=Math.sqrt(Wt),qt=x*Math.tan((fn-Math.acos((Oe+Wt-Bt)/(2*Lt*ae)))/2),ue=qt/ae,ve=qt/Lt;Math.abs(ue-1)>vi&&this._append`L${e+ue*ft},${l+ue*Ut}`,this._append`A${x},${x},0,0,${+(Ut*Yt>ft*_e)},${this._x1=e+ve*U},${this._y1=l+ve*lt}`}else this._append`L${this._x1=e},${this._y1=l}`}arc(e,l,s,f,x,S){if(e=+e,l=+l,S=!!S,(s=+s)<0)throw new Error(`negative radius: ${s}`);let G=s*Math.cos(f),U=s*Math.sin(f),lt=e+G,ft=l+U,Ut=1^S,Wt=S?f-x:x-f;null===this._x1?this._append`M${lt},${ft}`:(Math.abs(this._x1-lt)>vi||Math.abs(this._y1-ft)>vi)&&this._append`L${lt},${ft}`,s&&(Wt<0&&(Wt=Wt%vn+vn),Wt>$l?this._append`A${s},${s},0,1,${Ut},${e-G},${l-U}A${s},${s},0,1,${Ut},${this._x1=lt},${this._y1=ft}`:Wt>vi&&this._append`A${s},${s},0,${+(Wt>=fn)},${Ut},${this._x1=e+s*Math.cos(x)},${this._y1=l+s*Math.sin(x)}`)}rect(e,l,s,f){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+l}h${s=+s}v${+f}h${-s}Z`}toString(){return this._}}function na(t){return t[0]}function ra(t){return t[1]}function la(t,e){var l=wi(!0),s=null,f=ql,x=null,S=function ia(t){let e=3;return t.digits=function(l){if(!arguments.length)return e;if(null==l)e=null;else{const s=Math.floor(l);if(!(s>=0))throw new RangeError(`invalid digits: ${l}`);e=s}return t},()=>new Xi(e)}(G);function G(U){var lt,Ut,Yt,ft=(U=function Yl(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(U)).length,Wt=!1;for(null==s&&(x=f(Yt=S())),lt=0;lt<=ft;++lt)!(lt<ft&&l(Ut=U[lt],lt,U))===Wt&&((Wt=!Wt)?x.lineStart():x.lineEnd()),Wt&&x.point(+t(Ut,lt,U),+e(Ut,lt,U));if(Yt)return x=null,Yt+""||null}return t="function"==typeof t?t:void 0===t?na:wi(t),e="function"==typeof e?e:void 0===e?ra:wi(e),G.x=function(U){return arguments.length?(t="function"==typeof U?U:wi(+U),G):t},G.y=function(U){return arguments.length?(e="function"==typeof U?U:wi(+U),G):e},G.defined=function(U){return arguments.length?(l="function"==typeof U?U:wi(!!U),G):l},G.curve=function(U){return arguments.length?(f=U,null!=s&&(x=f(s)),G):f},G.context=function(U){return arguments.length?(null==U?s=x=null:x=f(s=U),G):s},G}function $n(t,e,l){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+l)/6)}function tr(t){this._context=t}function aa(t){return new tr(t)}function bi(t,e,l){this.k=t,this.x=e,this.y=l}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$n(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$n(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},bi.prototype={constructor:bi,scale:function(t){return 1===t?this:new bi(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new bi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new bi(1,0,0)}}]);