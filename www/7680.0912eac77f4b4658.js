"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7680],{3377:(ut,W,p)=>{p.d(W,{Kr:()=>d,LE:()=>F,iA:()=>h,lL:()=>j});var S=p(5861),g=p(2014),I=p(4459);const D=new g.K({name:"_userDB",driverOrder:[g.N.IndexedDB,g.N.LocalStorage]}),h=function(){var w=(0,S.Z)(function*(c){yield D.create();try{var v=(yield D.get("user-local"))||{};return"function"==typeof(null==c?void 0:c.callback)&&c.callback(Object.assign({},v||{})),v}catch(b){"function"==typeof(null==c?void 0:c.callback)&&c.callback(),console.error(b)}return{}});return function(v){return w.apply(this,arguments)}}(),d=function(){var w=(0,S.Z)(function*(c){yield D.create(),c.params=c.params||{};try{var v=Object.assign({},c.params);yield D.set("user-local",v),"function"==typeof c.callback&&c.callback(Object.assign({},v||{}))}catch(b){"function"==typeof c.callback&&c.callback(),console.error(b)}});return function(v){return w.apply(this,arguments)}}(),j=function(){var w=(0,S.Z)(function*(c){return c&&(c.params={}),d(null!=c?c:{})});return function(v){return w.apply(this,arguments)}}(),F=function(){var w=(0,S.Z)(function*(c,v){let b=yield(0,I.H0)();if(v){let N=[];c.params.profilephoto&&N.push(new Promise((A,L)=>{let P=new Image;P.onload=()=>{c.params.url_profilephoto=P.src,A(1)},P.onerror=()=>{c.params.url_profilephoto="assets/image/user-avatar-default.png",A(0)},P.src=b.readfileuploadurl+c.params.profilephoto})),c.params.banner&&N.push(new Promise((A,L)=>{let P=new Image;P.onload=()=>{c.params.url_banner=P.src,A(1)},P.onerror=()=>{c.params.url_banner="assets/image/user-banner-default.png",A(0)},P.src=b.readfileuploadurl+c.params.banner})),N.length>0?Promise.all(N).then(()=>{d(c)}):d(c)}else h({callback:N=>{if(N){let A=[];c.params.profilephoto&&A.push(new Promise((L,P)=>{let m=new Image;m.onload=()=>{c.params.url_profilephoto=m.src,L(1)},m.onerror=()=>{c.params.url_profilephoto="assets/image/user-avatar-default.png",L(0)},m.src=b.readfileuploadurl+c.params.profilephoto})),c.params.banner&&A.push(new Promise((L,P)=>{let m=new Image;m.onload=()=>{c.params.url_banner=m.src,L(1)},m.onerror=()=>{c.params.url_banner="assets/image/user-banner-default.png",L(0)},m.src=b.readfileuploadurl+c.params.banner})),A.length>0?Promise.all(A).then(()=>{d({params:Object.assign({},N,c.params),callback:c.callback})}):d({params:Object.assign({},N,c.params),callback:c.callback})}else"function"==typeof c.callback&&c.callback()}})});return function(v,b){return w.apply(this,arguments)}}()},9074:(ut,W,p)=>{p.d(W,{V:()=>F});var S=p(6814),g=p(6223),I=p(3536),D=p(5470),h=p(2630),d=p(9515),j=p(5879);let F=(()=>{var O;class nt{}return(O=nt).\u0275fac=function(c){return new(c||O)},O.\u0275mod=j.oAB({type:O}),O.\u0275inj=j.cJS({imports:[S.ez,g.u5,I.Pc,D.Z,h.L,d.d,D.Z,h.L]}),nt})()},8186:(ut,W,p)=>{p.d(W,{B:()=>g});var S=p(5861);const g=function(){var I=(0,S.Z)(function*(D,h,d){var j,F,O;d&&(h.message||(h.message=null!==(O=null==d?void 0:d.returnmsg)&&void 0!==O?O:0==(null==d?void 0:d.returncode)?"Th\xe0nh c\xf4ng!":null!=d&&d.returncode?`L\u1ed7i: #${null==d?void 0:d.returncode}`:"H\u1ec7 th\u1ed1ng kh\xf4ng c\xf3 ph\u1ea3n h\u1ed3i!"),h.icon||(h.icon=0==(null==d?void 0:d.returncode)?"checkmark-circle-sharp":null!=d&&d.returncode?"alert-circle-outline":"close-circle-sharp"),h.color||(h.color=0==(null==d?void 0:d.returncode)?"success":null!=d&&d.returncode?"warning":"danger"));return h.position||(h.position="bottom"),h.icon||(h.icon="bulb-outline"),h.color||(h.color="secondary"),h.duration=null!==(j=h.duration)&&void 0!==j?j:3e3,h.animated=null===(F=h.animated)||void 0===F||F,h.buttons=[{icon:"close-outline",side:"end",role:"cancel"}],yield D.create(h)});return function(h,d,j){return I.apply(this,arguments)}}()},9515:(ut,W,p)=>{p.d(W,{u:()=>Fi,d:()=>Bi});var S=p(5861),g=p(5879);function j(t,e=new Set){const r=[t],n=new Set;let o=0;for(;r.length>o;){const a=r[o++];if(!n.has(a)&&F(a)&&!e.has(a))if(n.add(a),Symbol.iterator in a)try{for(const s of a)r.push(s)}catch{}else for(const s in a)"defaultValue"!==s&&r.push(a[s])}return n}function F(t){const e=Object.prototype.toString.call(t),r=typeof t;return!("number"===r||"boolean"===r||"string"===r||"symbol"===r||"function"===r||"[object Date]"===e||"[object RegExp]"===e||"[object Module]"===e||null==t||t._watchdogExcluded||t instanceof EventTarget||t instanceof Event)}Symbol("MainQueueId");class c{constructor(e){if(this.crashes=[],this.state="initializing",this._now=Date.now,this.crashes=[],this._crashNumberLimit="number"==typeof e.crashNumberLimit?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod="number"==typeof e.minimumNonErrorTimePeriod?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=r=>{const n="error"in r?r.error:r.reason;n instanceof Error&&this._handleError(n,r)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,r){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(r)}off(e,r){this._listeners[e]=this._listeners[e].filter(n=>n!==r)}_fire(e,...r){const n=this._listeners[e]||[];for(const o of n)o.apply(this,[null,...r])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,r){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:r instanceof ErrorEvent?r.filename:void 0,lineno:r instanceof ErrorEvent?r.lineno:void 0,colno:r instanceof ErrorEvent?r.colno:void 0,date:this._now()});const n=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:n}),n?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&null!=e.context&&"ready"===this.state&&this._isErrorComingFromThisItem(e)}_shouldRestart(){return this.crashes.length<=this._crashNumberLimit||(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}const b=function v(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},A="object"==typeof global&&global&&global.Object===Object&&global;var L="object"==typeof self&&self&&self.Object===Object&&self;const m=A||L||Function("return this")(),dt=function(){return m.Date.now()};var Se=/\s/;var Ie=/^\s+/;const Me=function De(t){return t&&t.slice(0,function je(t){for(var e=t.length;e--&&Se.test(t.charAt(e)););return e}(t)+1).replace(Ie,"")},V=m.Symbol;var xt=Object.prototype,Fe=xt.hasOwnProperty,Le=xt.toString,X=V?V.toStringTag:void 0;var We=Object.prototype.toString;var It=V?V.toStringTag:void 0;const k=function Ve(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":It&&It in Object(t)?function Be(t){var e=Fe.call(t,X),r=t[X];try{t[X]=void 0;var n=!0}catch{}var o=Le.call(t);return n&&(e?t[X]=r:delete t[X]),o}(t):function ke(t){return We.call(t)}(t)},B=function Je(t){return null!=t&&"object"==typeof t};var Qe=/^[-+]0x[0-9a-f]+$/i,Ye=/^0b[01]+$/i,Xe=/^0o[0-7]+$/i,qe=parseInt;const Mt=function tr(t){if("number"==typeof t)return t;if(function Ze(t){return"symbol"==typeof t||B(t)&&"[object Symbol]"==k(t)}(t))return NaN;if(b(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=b(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Me(t);var r=Ye.test(t);return r||Xe.test(t)?qe(t.slice(2),r?2:8):Qe.test(t)?NaN:+t};var rr=Math.max,nr=Math.min;const cr=function ir(t,e,r){var n=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return b(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),function or(t,e,r){var n,o,a,s,i,u,l=0,T=!1,E=!1,R=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function Y(y){var U=n,rt=o;return n=o=void 0,l=y,s=t.apply(rt,U)}function M(y){var U=y-u;return void 0===u||U>=e||U<0||E&&y-l>=a}function x(){var y=dt();if(M(y))return we(y);i=setTimeout(x,function lt(y){var Ae=e-(y-u);return E?nr(Ae,a-(y-l)):Ae}(y))}function we(y){return i=void 0,R&&n?Y(y):(n=o=void 0,s)}function jt(){var y=dt(),U=M(y);if(n=arguments,o=this,u=y,U){if(void 0===i)return function St(y){return l=y,i=setTimeout(x,e),T?Y(y):s}(u);if(E)return clearTimeout(i),i=setTimeout(x,e),Y(u)}return void 0===i&&(i=setTimeout(x,e)),s}return e=Mt(e)||0,b(r)&&(T=!!r.leading,a=(E="maxWait"in r)?rr(Mt(r.maxWait)||0,e):a,R="trailing"in r?!!r.trailing:R),jt.cancel=function Ri(){void 0!==i&&clearTimeout(i),l=0,n=u=o=i=void 0},jt.flush=function Ui(){return void 0===i?s:we(dt())},jt}(t,e,{leading:n,maxWait:e,trailing:o})},Nt=function lr(t,e){return function(r){return t(e(r))}},ht=Nt(Object.getPrototypeOf,Object);var Ft=Function.prototype.toString,fr=Object.prototype.hasOwnProperty,gr=Ft.call(Object);const Lt=function mr(t){return B(t)&&1===t.nodeType&&!function pr(t){if(!B(t)||"[object Object]"!=k(t))return!1;var e=ht(t);if(null===e)return!0;var r=fr.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&Ft.call(r)==gr}(t)},Bt=function Tr(t,e){return t===e||t!=t&&e!=e},ot=function Cr(t,e){for(var r=t.length;r--;)if(Bt(t[r][0],e))return r;return-1};var Or=Array.prototype.splice;function J(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}J.prototype.clear=function yr(){this.__data__=[],this.size=0},J.prototype.delete=function wr(t){var e=this.__data__,r=ot(e,t);return!(r<0||(r==e.length-1?e.pop():Or.call(e,r,1),--this.size,0))},J.prototype.get=function Pr(t){var e=this.__data__,r=ot(e,t);return r<0?void 0:e[r][1]},J.prototype.has=function jr(t){return ot(this.__data__,t)>-1},J.prototype.set=function Ir(t,e){var r=this.__data__,n=ot(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};const at=J,Rt=function Vr(t){if(!b(t))return!1;var e=k(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var t,Jr=m["__core-js_shared__"],Ut=(t=/[^.]+$/.exec(Jr&&Jr.keys&&Jr.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"";var Qr=Function.prototype.toString;const K=function Yr(t){if(null!=t){try{return Qr.call(t)}catch{}try{return t+""}catch{}}return""};var qr=/^\[object .+?Constructor\]$/,on=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const sn=function an(t){return!(!b(t)||function zr(t){return!!Ut&&Ut in t}(t))&&(Rt(t)?on:qr).test(K(t))},G=function un(t,e){var r=function cn(t,e){return null==t?void 0:t[e]}(t,e);return sn(r)?r:void 0},q=G(m,"Map"),tt=G(Object,"create");var yn=Object.prototype.hasOwnProperty;var En=Object.prototype.hasOwnProperty;function z(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}z.prototype.clear=function _n(){this.__data__=tt?tt(null):{},this.size=0},z.prototype.delete=function gn(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},z.prototype.get=function vn(t){var e=this.__data__;if(tt){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return yn.call(e,t)?e[t]:void 0},z.prototype.has=function On(t){var e=this.__data__;return tt?void 0!==e[t]:En.call(e,t)},z.prototype.set=function Pn(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=tt&&void 0===e?"__lodash_hash_undefined__":e,this};const Wt=z,st=function Mn(t,e){var r=t.__data__;return function In(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?r["string"==typeof e?"string":"hash"]:r.map};function Z(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Z.prototype.clear=function jn(){this.size=0,this.__data__={hash:new Wt,map:new(q||at),string:new Wt}},Z.prototype.delete=function Nn(t){var e=st(this,t).delete(t);return this.size-=e?1:0,e},Z.prototype.get=function Ln(t){return st(this,t).get(t)},Z.prototype.has=function Rn(t){return st(this,t).has(t)},Z.prototype.set=function Wn(t,e){var r=st(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};const Kn=Z;function $(t){var e=this.__data__=new at(t);this.size=e.size}$.prototype.clear=function Mr(){this.__data__=new at,this.size=0},$.prototype.delete=function Fr(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},$.prototype.get=function Br(t){return this.__data__.get(t)},$.prototype.has=function Ur(t){return this.__data__.has(t)},$.prototype.set=function Hn(t,e){var r=this.__data__;if(r instanceof at){var n=r.__data__;if(!q||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Kn(n)}return r.set(t,e),this.size=r.size,this};const Jn=$;var $n=function(){try{var t=G(Object,"defineProperty");return t({},"",{}),t}catch{}}();const kt=$n,Kt=function Qn(t,e,r){"__proto__"==e&&kt?kt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r};var Xn=Object.prototype.hasOwnProperty;const Gt=function qn(t,e,r){var n=t[e];(!Xn.call(t,e)||!Bt(n,r)||void 0===r&&!(e in t))&&Kt(t,e,r)},it=function to(t,e,r,n){var o=!r;r||(r={});for(var a=-1,s=e.length;++a<s;){var i=e[a],u=n?n(r[i],t[i],i,r,t):void 0;void 0===u&&(u=t[i]),o?Kt(r,i,u):Gt(r,i,u)}return r},Ht=function oo(t){return B(t)&&"[object Arguments]"==k(t)};var Vt=Object.prototype,ao=Vt.hasOwnProperty,so=Vt.propertyIsEnumerable,io=Ht(function(){return arguments}())?Ht:function(t){return B(t)&&ao.call(t,"callee")&&!so.call(t,"callee")};const co=io,ft=Array.isArray;var Jt="object"==typeof exports&&exports&&!exports.nodeType&&exports,zt=Jt&&"object"==typeof module&&module&&!module.nodeType&&module,Zt=zt&&zt.exports===Jt?m.Buffer:void 0;const $t=(Zt?Zt.isBuffer:void 0)||function uo(){return!1};var bo=/^(?:0|[1-9]\d*)$/;const yo=function mo(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&bo.test(t))&&t>-1&&t%1==0&&t<e},Qt=function To(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var f={};f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f["[object Arguments]"]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object Boolean]"]=f["[object DataView]"]=f["[object Date]"]=f["[object Error]"]=f["[object Function]"]=f["[object Map]"]=f["[object Number]"]=f["[object Object]"]=f["[object RegExp]"]=f["[object Set]"]=f["[object String]"]=f["[object WeakMap]"]=!1;const gt=function Zo(t){return function(e){return t(e)}};var Yt="object"==typeof exports&&exports&&!exports.nodeType&&exports,et=Yt&&"object"==typeof module&&module&&!module.nodeType&&module,pt=et&&et.exports===Yt&&A.process;const Q=function(){try{return et&&et.require&&et.require("util").types||pt&&pt.binding&&pt.binding("util")}catch{}}();var Xt=Q&&Q.isTypedArray;const Xo=Xt?gt(Xt):function Jo(t){return B(t)&&Qt(t.length)&&!!f[k(t)]};var ta=Object.prototype.hasOwnProperty;const qt=function ea(t,e){var r=ft(t),n=!r&&co(t),o=!r&&!n&&$t(t),a=!r&&!n&&!o&&Xo(t),s=r||n||o||a,i=s?function eo(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],u=i.length;for(var l in t)(e||ta.call(t,l))&&(!s||!("length"==l||o&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||yo(l,u)))&&i.push(l);return i};var ra=Object.prototype;const bt=function na(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ra)},aa=Nt(Object.keys,Object);var ia=Object.prototype.hasOwnProperty;const te=function ua(t){return null!=t&&Qt(t.length)&&!Rt(t)},mt=function da(t){return te(t)?qt(t):function ca(t){if(!bt(t))return aa(t);var e=[];for(var r in Object(t))ia.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)};var ba=Object.prototype.hasOwnProperty;const ya=function ma(t){if(!b(t))return function fa(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=bt(t),r=[];for(var n in t)"constructor"==n&&(e||!ba.call(t,n))||r.push(n);return r},yt=function va(t){return te(t)?qt(t,!0):ya(t)};var ee="object"==typeof exports&&exports&&!exports.nodeType&&exports,re=ee&&"object"==typeof module&&module&&!module.nodeType&&module,ne=re&&re.exports===ee?m.Buffer:void 0,oe=ne?ne.allocUnsafe:void 0;const ae=function xa(){return[]};var Da=Object.prototype.propertyIsEnumerable,se=Object.getOwnPropertySymbols,Ma=se?function(t){return null==t?[]:(t=Object(t),function Sa(t,e){for(var r=-1,n=null==t?0:t.length,o=0,a=[];++r<n;){var s=t[r];e(s,r,t)&&(a[o++]=s)}return a}(se(t),function(e){return Da.call(t,e)}))}:ae;const vt=Ma,ie=function La(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t};var Ra=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)ie(e,vt(t)),t=ht(t);return e}:ae;const ce=Ra,le=function ka(t,e,r){var n=e(t);return ft(t)?n:ie(n,r(t))},Ga=function Ka(t){return le(t,mt,vt)},Va=function Ha(t){return le(t,yt,ce)},Tt=G(m,"DataView"),Ct=G(m,"Promise"),Et=G(m,"Set"),Ot=G(m,"WeakMap");var ue="[object Map]",de="[object Promise]",he="[object Set]",_e="[object WeakMap]",fe="[object DataView]",Ya=K(Tt),Xa=K(q),qa=K(Ct),ts=K(Et),es=K(Ot),H=k;(Tt&&H(new Tt(new ArrayBuffer(1)))!=fe||q&&H(new q)!=ue||Ct&&H(Ct.resolve())!=de||Et&&H(new Et)!=he||Ot&&H(new Ot)!=_e)&&(H=function(t){var e=k(t),r="[object Object]"==e?t.constructor:void 0,n=r?K(r):"";if(n)switch(n){case Ya:return fe;case Xa:return ue;case qa:return de;case ts:return he;case es:return _e}return e});const wt=H;var ns=Object.prototype.hasOwnProperty;const ge=m.Uint8Array,At=function is(t){var e=new t.constructor(t.byteLength);return new ge(e).set(new ge(t)),e};var us=/\w*$/;var pe=V?V.prototype:void 0,be=pe?pe.valueOf:void 0;const Bs=function Ls(t,e,r){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return At(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return function cs(t,e){var r=e?At(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function gs(t,e){var r=e?At(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,r);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return function ds(t){var e=new t.constructor(t.source,us.exec(t));return e.lastIndex=t.lastIndex,e}(t);case"[object Symbol]":return function _s(t){return be?Object(be.call(t)):{}}(t)}};var me=Object.create,Rs=function(){function t(){}return function(e){if(!b(e))return{};if(me)return me(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();const Us=Rs;var ye=Q&&Q.isMap;const Js=ye?gt(ye):function Gs(t){return B(t)&&"[object Map]"==wt(t)};var ve=Q&&Q.isSet;const Ys=ve?gt(ve):function Zs(t){return B(t)&&"[object Set]"==wt(t)};var Te="[object Arguments]",Ce="[object Function]",Ee="[object Object]",_={};_[Te]=_["[object Array]"]=_["[object ArrayBuffer]"]=_["[object DataView]"]=_["[object Boolean]"]=_["[object Date]"]=_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Map]"]=_["[object Number]"]=_[Ee]=_["[object RegExp]"]=_["[object Set]"]=_["[object String]"]=_["[object Symbol]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_["[object Error]"]=_[Ce]=_["[object WeakMap]"]=!1;const Oi=function ct(t,e,r,n,o,a){var s,i=1&e,u=2&e,l=4&e;if(r&&(s=o?r(t,n,o,a):r(t)),void 0!==s)return s;if(!b(t))return t;var T=ft(t);if(T){if(s=function os(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&ns.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!i)return function Aa(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(t,s)}else{var E=wt(t),R=E==Ce||"[object GeneratorFunction]"==E;if($t(t))return function Oa(t,e){if(e)return t.slice();var r=t.length,n=oe?oe(r):new t.constructor(r);return t.copy(n),n}(t,i);if(E==Ee||E==Te||R&&!o){if(s=u||R?{}:function Ws(t){return"function"!=typeof t.constructor||bt(t)?{}:Us(ht(t))}(t),!i)return u?function Ua(t,e){return it(t,ce(t),e)}(t,function Ta(t,e){return t&&it(e,yt(e),t)}(s,t)):function Na(t,e){return it(t,vt(t),e)}(t,function ha(t,e){return t&&it(e,mt(e),t)}(s,t))}else{if(!_[E])return o?t:{};s=Bs(t,E,i)}}a||(a=new Jn);var Y=a.get(t);if(Y)return Y;a.set(t,s),Ys(t)?t.forEach(function(M){s.add(ct(M,e,r,M,t,a))}):Js(t)&&t.forEach(function(M,x){s.set(x,ct(M,e,r,x,t,a))});var lt=T?void 0:(l?u?Va:Ga:u?yt:mt)(t);return function zn(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););}(lt||t,function(M,x){lt&&(M=t[x=M]),Gt(s,x,ct(M,e,r,x,t,a))}),s};class ji extends c{constructor(e,r={}){super(r),this._editor=null,this._lifecyclePromise=null,this._initUsingData=!0,this._editables={},this._throttledSave=cr(this._save.bind(this),"number"==typeof r.saveInterval?r.saveInterval:5e3),e&&(this._creator=(n,o)=>e.create(n,o)),this._destructor=n=>n.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{const e={},r=[],n=this._config.rootsAttributes||{},o={};for(const[s,i]of Object.entries(this._data.roots))i.isLoaded?(e[s]="",o[s]=n[s]||{}):r.push(s);const a={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:r,rootsAttributes:o,_watchdogInitialData:this._data};return delete a.initialData,a.extraPlugins.push(xi),this._initUsingData?this.create(e,a,a.context):Lt(this._elementOrData)?this.create(this._elementOrData,a,a.context):this.create(this._editables,a,a.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,r=this._config,n){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData="string"==typeof e||Object.keys(e).length>0&&"string"==typeof Object.values(e)[0],this._config=this._cloneEditorConfiguration(r)||{},this._config.context=n,this._creator(e,this._config))).then(o=>{this._editor=o,o.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=o.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){const e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(r){console.error(r,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){const e=this._editor,r=e.model.document.roots.filter(i=>i.isAttached()&&"$graveyard"!=i.rootName),{plugins:n}=e,o=n.has("CommentsRepository")&&n.get("CommentsRepository"),a=n.has("TrackChanges")&&n.get("TrackChanges"),s={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};r.forEach(i=>{s.roots[i.rootName]={content:JSON.stringify(Array.from(i.getChildren())),attributes:JSON.stringify(Array.from(i.getAttributes())),isLoaded:i._isLoaded}});for(const i of e.model.markers)i._affectsData&&(s.markers[i.name]={rangeJSON:i.getRange().toJSON(),usingOperation:i._managedUsingOperations,affectsData:i._affectsData});return o&&(s.commentThreads=JSON.stringify(o.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),a&&(s.suggestions=JSON.stringify(a.getSuggestions({toJSON:!0,skipNotAttached:!0}))),s}_getEditables(){const e={};for(const r of this.editor.model.document.getRootNames()){const n=this.editor.ui.getEditableElement(r);n&&(e[r]=n)}return e}_isErrorComingFromThisItem(e){return function O(t,e,r=new Set){if(t===e&&function w(t){return"object"==typeof t&&null!==t}(t))return!0;const n=j(t,r),o=j(e,r);for(const a of n)if(o.has(a))return!0;return!1}(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return function Pi(t,e){return Oi(t,5,e="function"==typeof e?e:void 0)}(e,(r,n)=>{if(Lt(r)||"context"===n)return r})}}class xi{constructor(e){this.editor=e,this._data=e.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",e=>{e.stop(),this.editor.model.enqueueChange({isUndoable:!1},r=>{this._restoreCollaborationData(),this._restoreEditorData(r)}),this.editor.data.fire("ready")},{priority:999})}_createNode(e,r){if("name"in r){const n=e.createElement(r.name,r.attributes);if(r.children)for(const o of r.children)n._appendChild(this._createNode(e,o));return n}return e.createText(r.data,r.attributes)}_restoreEditorData(e){const r=this.editor;Object.entries(this._data.roots).forEach(([n,{content:o,attributes:a}])=>{const s=JSON.parse(o),i=JSON.parse(a),u=r.model.document.getRoot(n);for(const[l,T]of i)e.setAttribute(l,T,u);for(const l of s){const T=this._createNode(e,l);e.insert(T,u,"end")}}),Object.entries(this._data.markers).forEach(([n,o])=>{const{document:a}=r.model,{rangeJSON:{start:s,end:i},...u}=o,l=a.getRoot(s.root),T=e.createPositionFromPath(l,s.path,s.stickiness),E=e.createPositionFromPath(l,i.path,i.stickiness),R=e.createRange(T,E);e.addMarker(n,{range:R,...u})})}_restoreCollaborationData(){const e=JSON.parse(this._data.commentThreads),r=JSON.parse(this._data.suggestions);e.forEach(n=>{const o=this.editor.config.get("collaboration.channelId"),a=this.editor.plugins.get("CommentsRepository");a.hasCommentThread(n.threadId)&&a.getCommentThread(n.threadId).remove(),a.addCommentThread({channelId:o,...n})}),r.forEach(n=>{const o=this.editor.plugins.get("TrackChangesEditing");o.hasSuggestion(n.id)?o.getSuggestion(n.id).attributes=n.attributes:o.addSuggestionData(n)})}}var Ii=p(1374),Oe=p(6223),Di=p(6814);function Mi(t,e){}const C=new Array(256).fill(0).map((t,e)=>("0"+e.toString(16)).slice(-2)),Pt="Lock from Angular integration (@ckeditor/ckeditor5-angular)";let Fi=(()=>{class t{constructor(r,n){this.config={},this.data="",this.tagName="div",this.disableTwoWayDataBinding=!1,this.ready=new g.vpe,this.change=new g.vpe,this.blur=new g.vpe,this.focus=new g.vpe,this.error=new g.vpe,this.initiallyDisabled=!1,this.isEditorSettingData=!1,this.id=function Ni(){const t=4294967296*Math.random()>>>0,e=4294967296*Math.random()>>>0,r=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0;return"e"+C[t>>0&255]+C[t>>8&255]+C[t>>16&255]+C[t>>24&255]+C[e>>0&255]+C[e>>8&255]+C[e>>16&255]+C[e>>24&255]+C[r>>0&255]+C[r>>8&255]+C[r>>16&255]+C[r>>24&255]+C[n>>0&255]+C[n>>8&255]+C[n>>16&255]+C[n>>24&255]}(),this.ngZone=n,this.elementRef=r;const{CKEDITOR_VERSION:o}=window;if(o){const[a]=o.split(".").map(Number);a<37&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 37 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')}set disabled(r){this.setDisabledState(r)}get disabled(){return this.editorInstance?this.editorInstance.isReadOnly:this.initiallyDisabled}get editorInstance(){let r=this.editorWatchdog;return this.watchdog&&(r=this.watchdog._watchdogs.get(this.id)),r?r.editor:null}getId(){return this.id}ngOnChanges(r){Object.prototype.hasOwnProperty.call(r,"data")&&r.data&&!r.data.isFirstChange()&&this.writeValue(r.data.currentValue)}ngAfterViewInit(){this.attachToWatchdog()}ngOnDestroy(){var r=this;return(0,S.Z)(function*(){r.watchdog?yield r.watchdog.remove(r.id):r.editorWatchdog&&r.editorWatchdog.editor&&(yield r.editorWatchdog.destroy(),r.editorWatchdog=void 0)})()}writeValue(r){null===r&&(r=""),this.editorInstance?(this.isEditorSettingData=!0,this.editorInstance.data.set(r),this.isEditorSettingData=!1):(this.data=r,this.ready.pipe((0,Ii.P)()).subscribe(n=>{n.data.set(this.data)}))}registerOnChange(r){this.cvaOnChange=r}registerOnTouched(r){this.cvaOnTouched=r}setDisabledState(r){this.editorInstance&&(r?this.editorInstance.enableReadOnlyMode(Pt):this.editorInstance.disableReadOnlyMode(Pt)),this.initiallyDisabled=r}attachToWatchdog(){var r=this;const n=(u,l)=>this.ngZone.runOutsideAngular((0,S.Z)(function*(){r.elementRef.nativeElement.appendChild(u);const T=yield r.editor.create(u,l);return r.initiallyDisabled&&T.enableReadOnlyMode(Pt),r.ngZone.run(()=>{r.ready.emit(T)}),r.setUpEditorEvents(T),T})),o=function(){var u=(0,S.Z)(function*(l){yield l.destroy(),r.elementRef.nativeElement.removeChild(r.editorElement)});return function(T){return u.apply(this,arguments)}}(),a=u=>{(function Li(t){return t.observed||t.observers.length>0})(this.error)&&this.ngZone.run(()=>this.error.emit(u))},s=document.createElement(this.tagName),i=this.getConfig();if(this.editorElement=s,this.watchdog)this.watchdog.add({id:this.id,type:"editor",creator:n,destructor:o,sourceElementOrData:s,config:i}).catch(u=>{a(u)}),this.watchdog.on("itemError",(u,{itemId:l})=>{l===this.id&&a()});else{const u=new ji(this.editor,this.editorWatchdogConfig);u.setCreator(n),u.setDestructor(o),u.on("error",a),this.editorWatchdog=u,this.ngZone.runOutsideAngular(()=>{u.create(s,i).catch(l=>{a(l)})})}}getConfig(){if(this.data&&this.config.initialData)throw new Error("Editor data should be provided either using `config.initialData` or `data` properties.");const r={...this.config},n=this.config.initialData||this.data;return n&&(r.initialData=n),r}setUpEditorEvents(r){const o=r.editing.view.document;r.model.document.on("change:data",a=>{this.ngZone.run(()=>{if(!this.disableTwoWayDataBinding){if(this.cvaOnChange&&!this.isEditorSettingData){const s=r.data.get();this.cvaOnChange(s)}this.change.emit({event:a,editor:r})}})}),o.on("focus",a=>{this.ngZone.run(()=>{this.focus.emit({event:a,editor:r})})}),o.on("blur",a=>{this.ngZone.run(()=>{this.cvaOnTouched&&this.cvaOnTouched(),this.blur.emit({event:a,editor:r})})})}}return t.\u0275fac=function(r){return new(r||t)(g.Y36(g.SBq),g.Y36(g.R0b))},t.\u0275cmp=g.Xpm({type:t,selectors:[["ckeditor"]],inputs:{editor:"editor",config:"config",data:"data",tagName:"tagName",watchdog:"watchdog",editorWatchdogConfig:"editorWatchdogConfig",disableTwoWayDataBinding:"disableTwoWayDataBinding",disabled:"disabled"},outputs:{ready:"ready",change:"change",blur:"blur",focus:"focus",error:"error"},features:[g._Bn([{provide:Oe.JU,useExisting:(0,g.Gpc)(()=>t),multi:!0}]),g.TTD],decls:1,vars:0,template:function(r,n){1&r&&g.YNc(0,Mi,0,0,"ng-template")},encapsulation:2}),t})(),Bi=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[Oe.u5,Di.ez]]}),t})()}}]);